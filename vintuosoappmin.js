var jDrupal=void 0===jDrupal?{}:jDrupal;jDrupal.init=function(){jDrupal.csrf_token=!1,jDrupal.sessid=null,jDrupal.modules={},jDrupal.connected=!1,jDrupal.settings={sitePath:null,basePath:"/"}},jDrupal.init(),jDrupal.config=function(e){var t=void 0!==arguments[1]?arguments[1]:null;if(!t)return jDrupal.settings[e];jDrupal.settings[e]=t},jDrupal.sitePath=function(){return jDrupal.settings.sitePath},jDrupal.basePath=function(){return jDrupal.settings.basePath},jDrupal.restPath=function(){return this.sitePath()+this.basePath()},jDrupal.path=function(){return this.restPath().substr(this.restPath().indexOf("://")+3).replace("localhost","")},jDrupal.isReady=function(){try{var e=!jDrupal.isEmpty(jDrupal.sitePath());return e||console.log("sitePath not set in jdrupal.settings.js"),e}catch(e){console.log("jDrupal.isReady - "+e)}},jDrupal.isEmpty=function(e){return null!==e&&"object"==typeof e?0===Object.keys(e).length:null==e||""==e},jDrupal.functionExists=function(name){return"function"==eval("typeof "+name)},jDrupal.inArray=function(e,t){try{if(void 0===t)return!1;if("string"==typeof e)return-1<t.indexOf(e);for(var i=!1,n=0;n<t.length;n++)if(t[n]==e){i=!0;break}return i}catch(e){console.log("jDrupal.inArray - "+e)}},jDrupal.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},jDrupal.isInt=function(e){return"number"==typeof(e="string"==typeof e?parseInt(e):e)&&e%1==0},jDrupal.isPromise=function(e){return Promise.resolve(e)==e},jDrupal.shuffle=function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},jDrupal.time=function(){var e=new Date;return Math.floor(e/1e3)},jDrupal.lcfirst=function(e){return(e+="").charAt(0).toLowerCase()+e.substr(1)},jDrupal.ucfirst=function(e){return(e+="").charAt(0).toUpperCase()+e.substr(1)},jDrupal.Module=function(){this.name=null},jDrupal.moduleExists=function(e){try{return void 0!==jDrupal.modules[e]}catch(e){console.log("jDrupal.moduleExists - "+e)}},jDrupal.moduleImplements=function(e){try{var t=[];if(e)for(var i in jDrupal.modules)jDrupal.modules.hasOwnProperty(i)&&jDrupal.functionExists(i+"_"+e)&&t.push(i);return 0==t.length?!1:t}catch(e){console.log("jDrupal.moduleImplements - "+e)}},jDrupal.moduleInvoke=function(e,t){if(jDrupal.moduleLoad(e)){var i,n=e+"_"+t;if(jDrupal.functionExists(n))return n=window[n],(i=Array.prototype.slice.call(arguments)).splice(0,2),0==Object.getOwnPropertyNames(i).length?n():n.apply(null,i)}},jDrupal.moduleInvokeAll=function(e){var t,i=[],n=Array.prototype.slice.call(arguments),a=(n.splice(0,1),[]);for(t in jDrupal.modules)jDrupal.modules.hasOwnProperty(t)&&jDrupal.functionExists(t+"_"+e)&&a.push(t);if(jDrupal.isEmpty(a))return Promise.resolve();for(var o=0;o<a.length;o++)0==n.length?i.push(jDrupal.moduleInvoke(a[o],e)):(n.unshift(a[o],e),i.push(jDrupal.moduleInvoke.apply(null,n)),n.splice(0,2));return Promise.all(i)},jDrupal.moduleLoad=function(e){try{return jDrupal.modules[e]||!1}catch(e){console.log("jDrupal.moduleLoad - "+e)}},jDrupal.modulesLoad=function(){return jDrupal.modules},!function(n){XMLHttpRequest.prototype.send=function(e){var t=this,i=jDrupal.moduleInvokeAll("rest_pre_process",this,e);i?i.then(function(){n.call(t,e)}):n.call(this,e)}}(XMLHttpRequest.prototype.send),jDrupal.getResultFromRequest=function(e){return JSON.parse(void 0!==e.responseText?e.responseText:e.response)},jDrupal.token=function(){return new Promise(function(t,i){var n=new XMLHttpRequest;n.dg={service:"system",resource:"token"},n.open("GET",jDrupal.restPath()+"rest/session/token"),n.onload=function(){var e;200==n.status?(e=jDrupal.moduleInvokeAll("rest_post_process",n))?e.then(t(n.response)):t(n.response):i(n)},n.onerror=function(){i(Error("Network Error"))},n.send()})},jDrupal.connect=function(){return new Promise(function(i,t){function n(){jDrupal.connected=!0;var t=JSON.parse(void 0!==a.responseText?a.responseText:a.response);0==t.uid?(jDrupal.setCurrentUser(jDrupal.userDefaults()),i(t)):jDrupal.userLoad(t.uid).then(function(e){jDrupal.setCurrentUser(e),i(t)})}var a=new XMLHttpRequest;a.dg={service:"system",resource:"connect"},a.open("GET",jDrupal.restPath()+"jdrupal/connect?_format=json");a.onload=function(){var e;200!=a.status?t(a):(e=jDrupal.moduleInvokeAll("rest_post_process",a))?e.then(n):n()},a.onerror=function(){t(Error("Network Error"))},a.send()})},jDrupal.userLogin=function(a,o){return new Promise(function(e,t){function i(){jDrupal.connect().then(e)}var n=new XMLHttpRequest;n.dg={service:"user",resource:"login"},n.open("POST",jDrupal.restPath()+"user/login?_format=json"),n.setRequestHeader("Content-type","application/json");n.onload=function(){var e;200==n.status?(e=jDrupal.moduleInvokeAll("rest_post_process",n))?e.then(i):i():t(n)},n.onerror=function(){t(Error("Network Error"))},n.send(JSON.stringify({name:a,pass:o}))})},jDrupal.userLogout=function(){return new Promise(function(e,t){function i(){jDrupal.setCurrentUser(jDrupal.userDefaults()),jDrupal.connect().then(e)}var n=new XMLHttpRequest;n.dg={service:"user",resource:"logout"},n.open("GET",jDrupal.restPath()+"user/logout"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");n.onload=function(){var e;200==n.status||303==n.status?(e=jDrupal.moduleInvokeAll("rest_post_process",n))?e.then(i):i():t(n)},n.onerror=function(){t(Error("Network Error"))},n.send()})},jDrupal.entityLoad=function(e,t){return new this[this.ucfirst(e)](t).load()},jDrupal.commentLoad=function(e){return this.entityLoad("comment",e)},jDrupal.nodeLoad=function(e){return this.entityLoad("node",e)},jDrupal.userLoad=function(e){return this.entityLoad("user",e)},jDrupal.userRegister=function(a,o,s,r,l){return new Promise(function(e,t){function i(){jDrupal.connect().then(e)}var n=new XMLHttpRequest;n.dg={service:"user",resource:"register"},n.open("POST",jDrupal.restPath()+"user/register?_format=json"),n.setRequestHeader("Content-type","application/json");n.onload=function(){var e;200==n.status?(e=jDrupal.moduleInvokeAll("rest_post_process",n))?e.then(i):i():t(n)},n.onerror=function(){t(Error("Network Error"))},n.send(JSON.stringify({name:{value:a},pass:{value:o},mail:{value:s},preferred_langcode:{value:r},timezone:{value:l}}))})},jDrupal.Views=function(e){this.path=e,this.results=null},jDrupal.Views.prototype.getPath=function(){return this.path},jDrupal.Views.prototype.getResults=function(){return this.results},jDrupal.Views.prototype.getView=function(){var a=this;return new Promise(function(e,t){function i(){a.results=JSON.parse(n.response),e()}var n=new XMLHttpRequest;n.dg={service:"views",resource:null},n.open("GET",jDrupal.restPath()+a.getPath());n.onload=function(){var e;200==n.status?(e=jDrupal.moduleInvokeAll("rest_post_process",n))?e.then(i):i():t(n)},n.onerror=function(){t(Error("Network Error"))},n.send()})},jDrupal.viewsLoad=function(n){return new Promise(function(e,t){var i=new jDrupal.Views(n);i.getView().then(function(){e(i)})})},jDrupal.Entity=function(e,t,i){this.entity=null,this.bundle=t,this.entityID=i,this.entityKeys={}},jDrupal.Entity.prototype.get=function(e,t){return this.entity&&void 0!==this.entity[e]?void 0!==t?this.entity[e][t]:this.entity[e]:null},jDrupal.Entity.prototype.set=function(e,t,i){this.entity&&(void 0!==t&&void 0!==this.entity[e]?this.entity[e][t]=i:this.entity[e]=i)},jDrupal.Entity.prototype.getEntityKey=function(e){return void 0!==this.entityKeys[e]?this.entityKeys[e]:null},jDrupal.Entity.prototype.getEntityType=function(){return this.entityKeys.type},jDrupal.Entity.prototype.getBundle=function(){var e=this.getEntityKey("bundle");return void 0!==this.entity[e]?this.entity[e][0].target_id:null},jDrupal.Entity.prototype.id=function(){var e=this.getEntityKey("id");return void 0!==this.entity[e]?this.entity[e][0].value:null},jDrupal.Entity.prototype.language=function(){return this.entity.langcode[0].value},jDrupal.Entity.prototype.isNew=function(){return!this.id()},jDrupal.Entity.prototype.label=function(){var e=this.getEntityKey("label");return void 0!==this.entity[e]?this.entity[e][0].value:null},jDrupal.Entity.prototype.stringify=function(){return JSON.stringify(this.entity)},jDrupal.Entity.prototype.preLoad=function(e){return new Promise(function(e,t){e()})},jDrupal.Entity.prototype.load=function(){try{var o=this,s=o.getEntityType();return new Promise(function(n,a){o.preLoad().then(function(){function t(){o.entity=JSON.parse(i.response),o.postLoad(i).then(function(){n(o)})}var e=jDrupal.restPath()+s+"/"+o.id()+"?_format=json",i=new XMLHttpRequest;i.dg={service:s,resource:"retrieve"},i.open("GET",e);i.onload=function(){var e;200==i.status?(e=jDrupal.moduleInvokeAll("rest_post_process",i))?e.then(t):t():a(i)},i.onerror=function(){a(Error("Network Error"))},i.send()})})}catch(e){console.log("jDrupal.Entity.load - "+e)}},jDrupal.Entity.prototype.postLoad=function(e){return new Promise(function(e,t){e()})},jDrupal.Entity.prototype.preSave=function(e){return new Promise(function(e,t){e()})},jDrupal.Entity.prototype.save=function(){var l=this;return new Promise(function(s,r){l.preSave().then(function(){jDrupal.token().then(function(e){var t=l.getEntityType(),i=null,n=null,a=null,a=l.isNew()?(i="POST",n="create",t):(i="PATCH",n="update",t+"/"+l.id()),o=(a+="?_format=json",new XMLHttpRequest);o.dg={service:t,resource:n},o.open(i,jDrupal.restPath()+a),o.setRequestHeader("Content-type","application/json"),o.setRequestHeader("X-CSRF-Token",e),o.onload=function(){l.postSave(o).then(function(){var e;"POST"==i&&201==o.status||"PATCH"==i&&204==o.status||200==o.status?(e=jDrupal.moduleInvokeAll("rest_post_process",o))?e.then(s(o)):s(o):r(o)})},o.onerror=function(){r(Error("Network Error"))},o.send(l.stringify())})})})},jDrupal.Entity.prototype.postSave=function(n){var a=this;return new Promise(function(e,t){var i;a.isNew()&&n.getResponseHeader("Location")&&(i=n.getResponseHeader("Location").split("/"),a.entity[a.getEntityKey("id")]=[{value:i[i.length-1]}]),e()})},jDrupal.Entity.prototype.preDelete=function(e){return new Promise(function(e,t){e()})},jDrupal.Entity.prototype.delete=function(e){var r=this;return new Promise(function(o,s){r.preDelete().then(function(){jDrupal.token().then(function(e){var t=r.getEntityType(),i=jDrupal.restPath()+t+"/"+r.id(),n={},a=(n[r.getEntityKey("bundle")]=[{target_id:r.getBundle()}],new XMLHttpRequest);a.dg={service:t,resource:"delete"},a.open("DELETE",i),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("X-CSRF-Token",e),a.onload=function(){r.postDelete(a).then(function(){var e;204==a.status?(e=jDrupal.moduleInvokeAll("rest_post_process",a))?e.then(o(a)):o(a):s(a)})},a.onerror=function(){s(Error("Network Error"))},a.send(JSON.stringify(n))})})})},jDrupal.Entity.prototype.postDelete=function(e){var i=this;return new Promise(function(e,t){i.entity=null,e()})},jDrupal.entityConstructorPrep=function(e,t){var i;t&&("object"==typeof t?e.entity=t:((i={})[e.getEntityKey("id")]=[{value:t}],e.entity=i))},jDrupal.Comment=function(e){this.entityKeys.type="comment",this.entityKeys.bundle="comment_type",this.entityKeys.id="cid",this.entityKeys.label="subject",jDrupal.entityConstructorPrep(this,e)},jDrupal.Comment.prototype=new jDrupal.Entity,jDrupal.Comment.prototype.constructor=jDrupal.Comment,jDrupal.Comment.prototype.getSubject=function(){return this.entity.subject[0].value},jDrupal.Comment.prototype.setSubject=function(e){try{this.entity.subject[0].value=e}catch(e){console.log("jDrupal.Comment.setSubject - "+e)}},jDrupal.Comment.prototype.preSave=function(e){return new Promise(function(e,t){e()})},jDrupal.Comment.prototype.stringify=function(){try{if(this.isNew())return JSON.stringify(this.entity);for(var e=JSON.parse(JSON.stringify(this.entity)),t=["hostname","changed","cid","thread","uuid","entity_id","entity_type","pid","field_name","created","name","mail","homepage"],i=0;i<t.length;i++)void 0!==e[t[i]]&&delete e[t[i]];return JSON.stringify(e)}catch(e){console.log("jDrupal.Comment.stringify - "+e)}},jDrupal.Node=function(e){this.entityKeys.type="node",this.entityKeys.bundle="type",this.entityKeys.id="nid",this.entityKeys.label="title",jDrupal.entityConstructorPrep(this,e),this.entity&&!this.entity.title&&(this.entity.title=[{value:""}])},jDrupal.Node.prototype=new jDrupal.Entity,jDrupal.Node.prototype.constructor=jDrupal.Node,jDrupal.Node.prototype.getTitle=function(){return this.label()},jDrupal.Node.prototype.setTitle=function(e){try{this.entity.title[0].value=e}catch(e){console.log("jDrupal.Node.setTitle - "+e)}},jDrupal.Node.prototype.getType=function(){return this.getBundle()},jDrupal.Node.prototype.getCreatedTime=function(){return this.entity.created[0].value},jDrupal.Node.prototype.isPromoted=function(){return this.entity.promote[0].value},jDrupal.Node.prototype.isPublished=function(){return this.entity.status[0].value},jDrupal.Node.prototype.isSticky=function(){return this.entity.sticky[0].value},jDrupal.Node.prototype.preSave=function(e){var a=this;return new Promise(function(e,t){for(var i=["changed","revision_timestamp","revision_uid"],n=0;n<i.length;n++)delete a.entity[i[n]];e()})},jDrupal.User=function(e){this.entityKeys.type="user",this.entityKeys.bundle="user",this.entityKeys.id="uid",this.entityKeys.label="name",jDrupal.entityConstructorPrep(this,e)},jDrupal.User.prototype=new jDrupal.Entity,jDrupal.User.prototype.constructor=jDrupal.User,jDrupal.User.prototype.getAccountName=function(){return this.label()},jDrupal.User.prototype.getRoles=function(){this.entity.roles;for(var e=[],t=0;t<this.entity.roles.length;t++)e.push(this.entity.roles[t].target_id);return e},jDrupal.User.prototype.hasRole=function(e){return jDrupal.inArray(e,this.getRoles())},jDrupal.User.prototype.isAnonymous=function(){return 0==this.id()},jDrupal.User.prototype.isAuthenticated=function(){return!this.isAnonymous()},jDrupal.User.prototype.getEmail=function(){return this.get("mail")[0].value},jDrupal.currentUser=function(){return jDrupal._currentUser},jDrupal.User.prototype.postLoad=function(e){var i=this;return new Promise(function(e,t){i.entity.roles||(i.entity.roles=[{target_id:"authenticated"}]),e()})},jDrupal.userDefaults=function(){return new jDrupal.User({uid:[{value:0}],roles:[{target_id:"anonymous"}]})},jDrupal.setCurrentUser=function(e){e.isAuthenticated()&&!jDrupal.inArray("authenticated",e.getRoles())&&e.entity.roles.push({target_id:"authenticated"}),jDrupal._currentUser=e},jDrupal.userPassword=function(){for(var e=10,t=(arguments[0]&&(e=arguments[0]),""),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz23456789",n=0;n<e;n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},jDrupal.settings={sitePath:"https://app.vintuoso.com",basePath:"/"};const OPEN=!0,SEALED=!1,NEW=!0,OLD=!1;var OPAQUE="#FFFFFF",TRANSPARENT=OPAQUE+"00",MILKY=OPAQUE+"e0",PASTEL="#FCF6E8";const MIDTONE="#f1d38a",VIVID="#e5ab1e",VIVID10=VIVID+"1A",VIVID20=VIVID+"33",VIVID67=VIVID+"AA";var VLocal={};class VMain{constructor(e){return VMain.instance||(this._data=[],(VMain.instance=this).splashLogo=null,this.needReset=e,this.preInitApp()),VMain.instance}static version="1";preInitApp(){if(_isDebug())try{navigator.splashscreen.hide()}catch(e){}try{StatusBar.backgroundColorByHexString(VIVID),StatusBar.overlaysWebView(!1),StatusBar.styleLightContent()}catch(e){_debug_toast("StatusBar Error: <br>"+e,"ERROR")}this.darkMode=!1,this.appReady=!1,this.injectScriptIndex=1,this.userSettingsCached=_localInterface.user_reset?null:JSON.parse(localStorage.getItem("user_settings_cached")),this.is_showHints=!0,this.aromaburstInstance=null,this.foodPairingInstance=null;try{VMain.version=_builVersion+"."+_localInterface.minor_version,console.log("Version:"+VMain.version);var e=null==this.userSettingsCached?_deviceLangcode:this.userSettingsCached.langcode;this.localize(e).then(e=>{this.initApp()})}catch(e){_release_toast(e)}}initApp(){1==this.injectScriptIndex&&("apple"==_deviceType()?ons.platform.select("ios"):ons.platform.select("android"),ons.platform.select("ios"),null!=this.userSettingsCached)&&(vUserSingleton.settings=this.userSettingsCached),_injectScript(_localInterface.scripts[this.injectScriptIndex]).then(e=>{var t=Math.round(this.byteLength(localStorage.getItem(e))/1024)/1e3;_debug_toast("inserting "+e+" success ("+t+" Mb)","DEBUG"),this.injectScriptIndex++,this.injectScriptIndex<_localInterface.scripts.length?this.initApp():(vUserSingleton.updateDebugging(),this.needReset&&vDataSingleton.clearCache(),this.startApp())},e=>{_debug_toast("inserting "+e+" fail","ERROR")})}localize(n){return new Promise((t,e)=>{var i=localStorage.getItem("VLocal_cache");null!==i&&n==i.langcode?(VLocal=i,_debug_toast("lang is "+VLocal.langcode,"DEBUG"),t()):_injectConfig(_localInterface.scriptsDir+"/"+n+".json").then(e=>{VLocal=JSON.parse(e),VMain.localizeRangeNames(),localStorage.setItem("VLocal_cache",VLocal),_debug_toast("lang became "+VLocal.langcode,"DEBUG"),t()},()=>{_release_toast(vUserSingleton.settings.uid,3e4),_exitApp()})})}static signIn(){(new VUserEditor).prompt("signin")}static signOut(){(new VUserEditor).prompt("signout")}static signUp(){(new VUserEditor).prompt("signup")}static editUser(){(new VUserEditor).prompt("edit")}static editPic(){(new VUserEditor).editUserPicture()}static modal_target="";static modalShow(i="modal-custom"){return new Promise((e,t)=>{try{this.modal_target=i,document.getElementById(i).show().then(e)}catch(e){console.log(e),t()}})}static modalHide(){try{var e=document.getElementById(this.modal_target);null!=e&&e.visible&&e.hide()}catch(e){_debug_toast_err(e)}}static pushPage(i,n="lift",a="transparent"){return new Promise((e,t)=>{void 0===i.id&&t();t=document.getElementById("appNavigator");t.setAttribute("animation",n),t.pushPage(i.id,{data:{title:i.title,id:i.id,nid:i.id},options:{animation:n}}).then(()=>{this.setBackground(a),e()})})}static popPage(i="transparent"){return new Promise((e,t)=>{document.getElementById("appNavigator").popPage().then(()=>{this.setBackground(i),e()})})}static pushMainPage(i){let e=()=>new Promise((e,t)=>{document.getElementById("splitter-content").load(i.id).then(()=>{this.setBackground(OPAQUE);try{this.createMapToast()}catch(e){_debug_toast_err(e)}e()})});"edit-food-page.html"==i.prev||"edit-wine-page.html"==i.prev||"edit-user-page.html"==i.prev||"edit-cellar-page.html"==i.prev?(vCameraSingleton.hide(),this.popPage().then(()=>{e().then(()=>{this.searchWines()})})):"wine-card-page.html"==i.prev?this.popPage().then(()=>{this.setBackground(OPAQUE),this.searchWines()}):"my-cellar-page.html"==i.prev?(this.setBackground(OPAQUE),this.popPage()):"camera-wine-page.html"==i.prev||"camera-food-page.html"==i.prev||"camera-user-page.html"==i.prev||"camera-map-page.html"==i.prev?(vCameraSingleton.hide(),this.setBackground(OPAQUE),e().then(()=>{this.searchWines()})):e()}static initLanguages(){var a;function e(e,t){var i=document.createElement("option"),n=(i.innerText=e,i.value=t,a.firstChild.appendChild(i),0);switch(vUserSingleton.settings.langcode){case"fr":n=1;break;case"es":n=2;break;case"ru":n=3}setTimeout(function(){a.selectedIndex=n},500)}!_isDebug()||0<(a=document.getElementById("choose-language")).length||(e("English","en"),e("Français","fr"),e("Español","es"),e("Русский","ru"))}byteLength(e){if(null===e)return 0;for(var t=e.length,i=e.length-1;0<=i;i--){var n=e.charCodeAt(i);127<n&&n<=2047?t++:2047<n&&n<=65535&&(t+=2),56320<=n&&n<=57343&&i--}return t}startApp(){if(null==localStorage.getItem("wineColors_cached")){this.splashLogo=new VSplashLogo("modal-splash");try{navigator.splashscreen.hide()}catch(e){}}_debug_toast(vUserSingleton.settings.name+" is debug : "+_isDebugUser());try{cordova.plugins.osTheme.getTheme().then(e=>{_debug_toast("iosTheme: the current theme is: "+(e.isDark?"Dark":"Light"),"DEBUG"),this.darkMode=e.isDark,VMain.switchDarkMode(this.darkMode)}).catch(e=>{_debug_toast("iosTheme err: "+e,"ERROR")})}catch(e){_debug_toast("iosTheme exc: "+e,"ERROR")}vDataSingleton.loadCache(),this.createWinesPage(),document.getElementById("splitter-content").load("selected-wines.html",{id:"selected-wines.html",title:"Vintuoso",prev:""}).then(()=>{document.getElementById("page-toolbar-title").innerHTML='<img style="height: -webkit-fill-available;" src="css/title_yellow.png "/>',this.createFiltersPage(),VMain.createMapToast(),jDrupal.connect().then(()=>{VMain.appReady||vDrupalSingleton.getSessionToken().then(e=>{vUserSingleton.settings.csrfToken=e,VMain.createLeftSideMenu(),VMain.appReady=!0}),VMain.showFabs(),vDrupalSingleton.getServerData().then(()=>{vDrupalSingleton.getWines(vSearchSingleton.createPerfectWineFilter()).then(()=>{vSearchSingleton.showWines();try{navigator.splashscreen.hide()}catch(e){_debug_toast_err(e)}}),this.splashLogo&&this.splashLogo.destroy()})})})}createWinesPage(){if(null===document.getElementById("selected-wines.html")){var t=_isDebug()?"":"none",i=document.createElement("template");i.id="selected-wines.html";let e='<ons-page id="selected-wines-page"><ons-toolbar  ><div class="left" style="width:10%;"><ons-toolbar-button id="show-menu-button"  ontouchend="VMain.toggleLeftMenu()"><ons-icon icon="fa-bars"></ons-icon></ons-toolbar-button></div><div class="center" id="page-toolbar-title" style="width:80%;">'+VLocal.Vintuoso+'</div><div class="right" style="width:10%;"><ons-toolbar-button style="display:'+t+';" id="filters-toggle-button" class="hint-filters"  ontouchend="VMain.showFiltersPage()"><ons-icon icon="fa-filter"></ons-icon></ons-toolbar-button></div></ons-toolbar><ons-fab id="describe-wine-button" class="hint-describe-wine" style="top:50px" modifier="mini" position="top right" ontouchend="VMain.createNewWine();"><ons-icon icon="fa-edit" style="transform: scale(.7)"></ons-icon></ons-fab><ons-fab id="cellar-button"  modifier="mini" position="top right" style="top:100px" class="hint-describe-wine" ontouchend="VMain.openCellar();"><img style="transform: scale(.7); width: 1.28571429em; filter: invert(1);" class="list-item__icon cellar" src="css/wine-bottle-solid.svg"><img style="transform: scale(.7); width: 1.28571429em; margin-left: -2.3em; margin-top: 0.2em; filter: invert(1);" class="list-item__icon cellar" src="css/wine-bottle-solid.svg"></ons-fab><ons-fab id="toggle-my-wines" class="hint-describe-wine" style="top:150px" modifier="mini" position="top right" ontouchend="VMain.toggleMyWines();"><ons-icon icon="fa-user" style="transform: scale(.7)"></ons-icon></ons-fab>';_isInReview()||(e+='<ons-fab id="toggle-map-button" style="right:0;" class="fab-toggle hint-describe-wine" modifier="mini" position="bottom right" ><ons-icon icon="fa-map"></ons-icon>&nbsp;<ons-switch style="margin-top: 3px;" onchange="VMain.toggleMapToast();"></ons-switch></ons-fab>'),e+='<ons-progress-bar id="wine-list-progressbar" style="width:100%; height:5px;" secondary-value="100" class="progressStyle" indeterminate></ons-progress-bar><div class="page__content" style="overflow-y:scroll"><ons-list style="margin-top: -5px;" ><ons-lazy-repeat id="wines-infinite-list" style="background-color: transparent;"></ons-lazy-repeat></ons-list></div></ons-page>',i.innerHTML=e,$("#app-body")[0].appendChild(i);t=document.createElement("template"),i=(t.id="wine-details-sankey.html",t.innerHTML='<ons-alert-dialog id="sankey-card" mask-color = "rgba(0, 0, 0, 0.0)"  cancelable ><div class="alert-dialog-title"><ons-alert-dialog-button style="position: fixed; text-align: left; z-index: 1;" ontouchend="document.getElementById(\'sankey-card\').hide()"><ons-icon icon="fa-close"></ons-icon></ons-alert-dialog-button></div><div id="wine-sankey" style="height: '+.9*window.innerHeight+"px; width: "+.9*window.innerWidth+'px"></div></ons-alert-dialog>',$("#app-body")[0].appendChild(t),document.createElement("template"));i.id="wine-details-map.html",i.innerHTML='<ons-alert-dialog id="map-card" mask-color = "rgba(0, 0, 0, 0.0)"  cancelable ><div class="alert-dialog-title"><ons-alert-dialog-button style="position: fixed; text-align: left; z-index: 1;" ontouchend="document.getElementById(\'map-card\').hide()"><ons-icon icon="fa-close"></ons-icon></ons-alert-dialog-button></div><div id="appellation-map-canvas" style="height: '+.9*window.innerHeight+'px; width:100%; "></div><div id="map-legend" style="background-color:'+TRANSPARENT+' height:300px; width:100px;position:absolute;top:40px;left:-100px"></div></ons-alert-dialog>',$("#app-body")[0].appendChild(i)}}winesListProgressBar=null;static toggleMyWines(){var e=document.getElementById("toggle-my-wines");"fa-user"==e.querySelector("ons-icon").getAttribute("icon")?(e.innerHTML='<ons-icon icon="fa-globe" style="transform: scale(.7)"></ons-icon>',vDataSingleton.selectedWines=vUserSingleton.wines,vSearchSingleton.showWines()):(e.innerHTML='<ons-icon icon="fa-user" style="transform: scale(.7)"></ons-icon>',this.searchWines())}static toggleLeftMenu(){document.getElementById("appSplitter").left.toggle()}static createLeftSideMenu(){var e=document.getElementById("sidemenu_left"),t=document.getElementById("sidemenu_left-page"),i=(t.style.overflowY="scroll",e&&VMain.removeElement(e),(e=document.createElement("div")).style="height: "+window.innerHeight+"px",e.id="sidemenu_left",'<ons-list> <ons-list-item modifier="nodivider"><div class="left"><img id="logo-img" style="margin-right: 10px; width:70%" src="css/title_yellow.png"><canvas id="canvas-logo-img"  ></canvas></div></ons-list-item><ons-list-header id="access-title">'+VLocal.Access+"</ons-list-header>"),n=(jDrupal.currentUser().isAuthenticated()?i+='<ons-list-item modifier="nodivider"><div class="left left-30"><img id="user-img" ontouchend="VMain.editPic()" style="border-radius:50px; border:3px solid '+VIVID+"; background-color: "+OPAQUE+'; margin-right: 10px; height:80px; max-width:60px" src="'+vUserSingleton.settings.image+'"></div><div class="center"  ontouchend="VMain.editUser()" >'+VLocal.Hello+" "+jDrupal.currentUser().getAccountName()+'</div></ons-list-item><ons-list-item modifier="nodivider" id="sign-out" ontouchend="VMain.signOut()"><div class="left left-30"><ons-icon icon="fa-user-times" class="list-item__icon"></ons-icon></div><div class="center" id="sign-out-message">'+VLocal.SignOut+"</div></ons-list-item>":_localInterface.app_in_review||(i+='<ons-list-item modifier="nodivider" id="sign-up" ontouchend="VMain.signUp()"><div class="left left-30"><ons-icon icon="fa-user-plus" class="list-item__icon"></ons-icon></div><div class="center" id="sign-up-message">'+VLocal.SignUp+'</div></ons-list-item><ons-list-item modifier="nodivider" id="sign-in" ontouchend="VMain.signIn()"><div class="left left-30"><ons-icon icon="fa-sign-in" class="list-item__icon"></ons-icon></div><div class="center" id="sign-in-message">'+VLocal.SignIn+"</div></ons-list-item>"),i+='<ons-list-header style="margin-top: 10px" id="navigation-title">'+VLocal.Profile+"</ons-list-header>",""==vUserSingleton.settings.organic?"":"checked");i+='<ons-list-item modifier="nodivider"><div class="left left-30"><ons-icon fixed-width class="list-item__icon" icon="fa-leaf"></ons-icon></div><div class="center" id="bio-message">'+VLocal.OnlyBioWines+'</div><div class="right"><ons-switch  id="bio-switch" '+n+' onchange="vUserSingleton.switchBio(this);"></ons-switch></div></ons-list-item>',vUserSingleton.settings.organic,n="natural"==vUserSingleton.settings.organic?"checked":"",i+='<ons-list-item modifier="nodivider" ><div class="left left-30"><ons-icon fixed-width class="list-item__icon" icon="fa-heartbeat"></ons-icon></div><div class="center" id="natural-message">'+VLocal.OnlyNaturalWines+'</div><div class="right"><ons-switch  id="natural-switch"  onchange="vUserSingleton.switchNatural(this);" '+n+"></ons-switch></div></ons-list-item>",n=vUserSingleton.settings.vegan?"checked":"",i=(i+='<ons-list-item modifier="nodivider" ><div class="left left-30"><ons-icon fixed-width class="list-item__icon" icon="md-flower"></ons-icon><ion-icon name="flower-sharp"></ion-icon></div><div class="center" id="vegan-message">'+VLocal.OnlyVeganWines+'</div><div class="right"><ons-switch  id="vegan-switch"  onchange="vUserSingleton.switchVegan(this);" '+n+"></ons-switch></div></ons-list-item>")+'<ons-list-header style="margin-top: 10px" id="navigation-title">'+VLocal.Navigation+"</ons-list-header>",_isDebugUser()&&(i+='<ons-list-item modifier="nodivider"><div class="left left-30"><i class="fa fa-language list-item__icon"></i></div><div class="center"><ons-select id="choose-language" onchange="VMain.selectLanguage(event)"></ons-select></div></ons-list-item><ons-list-item modifier="nodivider" id="create-AOP-button" ontouchend="VMain.mapEdit();"><div class="left left-30"><ons-icon fixed-width class="list-item__icon" icon="fa-map-o"></ons-icon></div><div class="center" id="create-AOP">Add AOP</div></ons-list-item><ons-list-item modifier="nodivider" id="clear-cache-button" ontouchend="VMain.resetApp(false); "><div class="left left-30"><ons-icon fixed-width class="list-item__icon" icon="fa-sign-out"></ons-icon></div><div class="center" id="clear-cache-message">Clean restart</div></ons-list-item>'),n=this.darkMode?"checked":"",i+='<ons-list-item modifier="nodivider" ><div class="left left-30"><ons-icon fixed-width class="list-item__icon" icon="md-contrast"></ons-icon></div><div class="center" id="darkmode-message">'+VLocal.DarkMode+'</div><div class="right"><ons-switch  id="darkmode-switch"  onchange="VMain.switchDarkMode();" '+n+'></ons-switch></div></ons-list-item><ons-list-item modifier="nodivider" id="about-button" onclick="VMain.promptInfo()"><div class="left left-30"><ons-icon fixed-width class="list-item__icon" icon="fa-info"></ons-icon></div><div class="center" id="about-message">'+VLocal.About+' Vintuoso</div><div class="right" id="about-version">'+this.version+"</div></ons-list-item></ons-list>",e.innerHTML=i,t.appendChild(e),setTimeout(()=>{document.getElementById("appSplitter").left.addEventListener("postopen",()=>{jDrupal.currentUser().isAuthenticated()&&(document.getElementById("user-img").src=vUserSingleton.settings.image+"?v="+(new Date).getTime())}),this.initLanguages()},200)}static isDarkMode(){return this.darkMode}static switchDarkMode(e){var t=document.getElementById("darkmode-switch"),i=document.getElementById("boutiques-map-canvas");if(null!=e?(this.darkMode=e,null!=t&&(t.checked=e)):null!=t&&(this.darkMode=t.checked),this.darkMode){document.getElementById("onsen-theme-css").setAttribute("href","css/dark-onsen-css-components.min.css"),PASTEL="#030917",MILKY=(OPAQUE="#0D0D0D")+"e0",null!=i&&(i.style.filter="invert(0.9)");try{StatusBar.backgroundColorByHexString(OPAQUE)}catch(e){}}else{document.getElementById("onsen-theme-css").setAttribute("href","css/onsen-css-components.min.css"),PASTEL="#FCF6E8",MILKY=(OPAQUE="#FFFFFF")+"e0",null!=i&&(i.style.filter="");try{StatusBar.backgroundColorByHexString(VIVID)}catch(e){}}VMain.setBackground(OPAQUE)}static promptInfo(){ons.notification.alert({title:VLocal.About+" "+VLocal.Vintuoso,messageHTML:VLocal.PleaseRateUsContent,cancelable:!0})}createFiltersPage(){var e,t,i=document.getElementById("selected-wines-page");null==document.getElementById("hint-sunburst-chart")&&(t=document.querySelector("ons-toolbar").offsetHeight+(ons.platform.isIPhoneX()?15:0),(e=document.createElement("span")).id="hint-sunburst-chart",e.classList.add("hint-sunburst-chart"),e.style="position: absolute;  width:90%;  border-radius:50%; margin-left: 5%; margin-top: "+t+"px; top: 35%;",i.appendChild(e)),null==document.getElementById("toast-filters")&&((t=document.createElement("template")).id="food-pairing-page.html",t.innerHTML='<ons-page><div id="foodpairing" style="width: 100%;"></div></ons-page>',$("#app-body")[0].appendChild(t),(e=document.createElement("template")).id="aromaburst-page.html",e.innerHTML='<ons-page><div id="sunburstchart0" style=" width: 100%; height:'+window.innerWidth+'px; ;"></div></ons-page>',i.appendChild(e),$("#app-body")[0].appendChild(e),(t=document.createElement("template")).id="filters-page.html",t.addEventListener("preshow",this.toggleFabs),t.addEventListener("posthide",this.toggleFabs),t.innerHTML='<ons-page id="filters-page"><ons-toolbar><div class="left" style="width:10%"><ons-back-button></ons-back-button></div><div class="center" style="width:80%"><ons-segment tabbar-id="filters-tabbar"  active-index=0 onchange="" style="width:100%"><button id="food-title">'+VLocal.FoodPairing+'</button><button id="aromaburst-title" class="hint-aromaburst">'+VLocal.Aromas+'</button></ons-segment></div><div class="right" style="width:10%"></div></ons-toolbar><ons-tabbar id="filters-tabbar"><ons-tab page="food-pairing-page.html" active></ons-tab><ons-tab page="aromaburst-page.html"></ons-tab></ons-tabbar><ons-fab id="show-wines-button" position="bottom right" class="hint-show-wines" ontouchend="VMain.searchWines()">   <ons-icon icon="fa-search"></ons-icon></ons-fab></ons-page>',$("#app-body")[0].appendChild(t))}static toggleFabs(){jDrupal.currentUser().isAuthenticated()&&(document.getElementById("describe-wine-button").toggle(),document.getElementById("cellar-button").toggle(),document.getElementById("toggle-my-wines").toggle()),_isInReview()||document.getElementById("toggle-map-button").toggle()}static showFabs(){jDrupal.currentUser().isAuthenticated()?(document.getElementById("describe-wine-button").show(),document.getElementById("cellar-button").show(),document.getElementById("toggle-my-wines").show()):(document.getElementById("describe-wine-button").hide(),document.getElementById("cellar-button").hide(),document.getElementById("toggle-my-wines").hide()),_isInReview()||document.getElementById("toggle-map-button").show()}static hideFabs(){document.getElementById("toggle-map-button").hide(),document.getElementById("describe-wine-button").hide(),document.getElementById("cellar-button").hide(),document.getElementById("toggle-my-wines").hide()}static createMapToast(){var e,t=document.getElementById("selected-wines-page");null===document.getElementById("toast-map")&&((e=document.createElement("ons-toast")).id="toast-map",e.style="bottom:-10px; border-radius: 10px 10px 0 0; width:100%",e.innerHTML='<ons-gesture-detector style="padding:0; height:20px"><ons-button style="line-height: 20px; background-color:'+VIVID20+'; width:100%; padding: 0"  id="map-view-button" ripple><ons-icon color:#fff; icon="md-unfold-more" style="margin-left: 50%;"></ons-icon></ons-button></ons-gesture-detector><div id="map-view" class="hint-aromas" style="width: 100%; "><ons-search-input id="address-search" style="width:100%; " placeholder="Chez moi" float></ons-search-input><div id="boutiques-map-canvas" style="width:100%; height:200px; max-height:500px; background-color:inherit"></div></div',t.appendChild(e)),document.addEventListener("drag",function(e){e.target.matches("#map-view-button")&&(e.target.getBoundingClientRect(),document.getElementById("boutiques-map-canvas").style.height=window.innerHeight-44-e.gesture.center.clientY+"px")}),document.getElementById("show-menu-button").classList.add("hint-show-menu")}static toggleMapToast(){document.getElementById("toast-map").toggle().then(()=>{vMapSingleton.setGoogleMap("boutiques-map-canvas").then(()=>{vSearchSingleton.showBoutiques()})})}static showFiltersPage(){this.pushPage({id:"filters-page.html"},"fade",OPAQUE).then(()=>{try{this.foodPairingInstance=new VFoodSearch("foodpairing"),document.getElementById("filters-tabbar").addEventListener("prechange",e=>{this.aromaburstInstance=new VBurst("sunburstchart0","wine")})}catch(e){_release_toast(e,1e4)}})}static openCellar(){(new VCellar).open()}static addBottle(){this.popPage().then(()=>{new VBottleEditor(null)})}static mapEdit(){new VMapEditor(null)}static editBottle(e){new VBottleEditor(e)}static editWine(e){new VWineEditor(e)}static createNewWine(){new VWineEditor}static createNewFood(){new VWineEditor}static editFood(e){new VFoodEditor(e)}static searchWines(){this.winesListProgressBar=document.getElementById("wine-list-progressbar"),this.winesListProgressBar.style="display:block",vDrupalSingleton.getWines(vSearchSingleton.createPerfectWineFilter()).then(()=>{this.winesListProgressBar.style="display:none",vSearchSingleton.showWines()})}static setBackground(e){for(var t=document.querySelectorAll(".page__background"),i=0;i<t.length;i++)t[i].style.backgroundColor=e}static removeElementById(e){this.removeElement(document.getElementById(e))}static removeElement(e){null!==e&&e.parentElement.removeChild(e)}static showHints(){var e;VMain.is_showHints&&vUserSingleton.settings.is_showHints&&(this.is_showHints=!1,(e=new EnjoyHint({onEnd:function(){vUserSingleton.settings.is_showHints=!1,vUserSingleton.saveUserCache()}})).set([{"touchend .hint-sunburst-chart":"Wellcome to Aromaburst! <br> Start navigating in the circle. Click on the segments to burst aromas, click on the inner circle to go back",shape:"circle",showNext:!0},{"touchend .hint-aromas":"Available individual aromas and their families will be shown here",showNext:!0},{"click .hint-filters":"Tell where to look for wines.",showNext:!0},{"touchend .hint-aromas-food-pairing":"Switch between aromas and food pairing",showNext:!0},{"touchend .hint-show-wines":"After selecting aromas or food pairing click here to show corresponding wines",shape:"circle",showNext:!0},{"touchend .hint-show-menu":"Main menu where you can log in or register to be able to add your wines!",showNext:!0},{"click .hint-end":'Your are all set! Click "Done" to not show these hints next time, or "Hide" if you want to review the steps',showNext:!0,skipButton:{className:"mySkip",text:"Hide"},nextButton:{className:"mySkip",text:"Done"}}]),e.run())}static resetApp(e){vDataSingleton.clearCache(),e?location.reload():vDrupalSingleton.getServerData()}static selectLanguage(e){vUserSingleton.setUserLangcode(e.target.value),VMain.localize(e.target.value).then(()=>{VMain.resetApp(!0)})}static localizeRangeNames(){var e={foodAcidityRangeNames:[VLocal.AcidityNone,VLocal.AcidityLow,VLocal.AcidityMedium,VLocal.AcidityHigh,VLocal.AcidityAcid],foodSpicinessRangeNames:[VLocal.SpicinessNone,VLocal.SpicinessLow,VLocal.SpicinessSpicy,VLocal.SpicinessHot],foodSugarRangeNames:[VLocal.SugarNone,VLocal.SugarLow,VLocal.SugarSweet,VLocal.SugarVerySweet],foodSaltRangeNames:[VLocal.SaltNone,VLocal.SaltSalty,VLocal.SaltVerySalty],foodFatRangeNames:[VLocal.FatNone,VLocal.FatLow,VLocal.FatMedium,VLocal.FatFat],foodBitternessRangeNames:[VLocal.BitternessNone,VLocal.BitternessBitterish,VLocal.BitternessBitter]};Object.assign(VLocal,e),VLocal.wineAcidityRangeNames=[VLocal.AcidityFlat,VLocal.AcidityLow,VLocal.AcidityMedium,VLocal.AcidityFresh,VLocal.AcidityAcid],VLocal.wineAstringencyRangeNames=[VLocal.AstringencyNone,VLocal.AstringencyLow,VLocal.AstringencyMedium,VLocal.AstringencyTannic,VLocal.AstringencyRough],VLocal.wineBodyRangeNames=[VLocal.BodyFluid,VLocal.BodyLight,VLocal.BodyMedium,VLocal.BodyFull,VLocal.BodyHeavy],VLocal.winePersistenceRangeNames=[VLocal.PersistenceNone,VLocal.PersistenceShort,VLocal.PersistenceMedium,VLocal.PersistenceLong,VLocal.PersistenceExtra],VLocal.wineTanninsRangeNames=[VLocal.TanninsNone,VLocal.TanninsLight,VLocal.TanninsSmooth,VLocal.TanninsDry,VLocal.TanninsHarsh],VLocal.wineTransparencyRangeNames=[VLocal.TransparencyTransparent,VLocal.TransparencyTinted,VLocal.TransparencyMedium,VLocal.TransparencyHue,VLocal.TransparencyOpaque],VLocal.wineIntensityRangeNames=[VLocal.IntensityLow,VLocal.IntensityMediumLow,VLocal.IntensityMedium,VLocal.IntensityMediumHigh,VLocal.IntensityHigh],VLocal.wineSugarRangeNames=[VLocal.SugarExtraBrut,VLocal.SugarBrut,VLocal.SugarDry,VLocal.SugarSemiDry,VLocal.SugarSweet,VLocal.SugarLiquor],VLocal.wineSaltRangeNames=[VLocal.SaltNone,VLocal.SaltMineral,VLocal.SaltSaline],VLocal.wineParticlesRangeNames=[VLocal.ParticlesLimpid,VLocal.ParticlesPresent,VLocal.ParticlesCloudy],VLocal.wineGasRangeNames=[VLocal.GasStill,VLocal.GasBeady,VLocal.GasSemiSparkling,VLocal.GasSparkling],VLocal.wineBitternessRangeNames=[VLocal.BitternessNone,VLocal.BitternessBitterish,VLocal.BitternessBitter],VLocal.wineBioRangeNames=[VLocal.BioNo,VLocal.BioOrganic,VLocal.BioBiodynamic],VLocal.wineSulfitesRangeNames=[VLocal.SulfitesYes,VLocal.SulfitesNo],VLocal.wineVeganRangeNames=[VLocal.VeganNo,VLocal.VeganYes]}handleOpenURL(e){var t=setInterval(function(){VMain&&VMain.appReady&&(clearInterval(t),VMain.openUrl(e))},100)}openUrl(e){console.log(e)}}window._isDebug=()=>_isDebugUser()&&"DEBUG"==DEBUG_MODE,window._isInReview=()=>!_isDebug()&&_localInterface.app_in_review,String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.removeDiacritics=function(){for(var e=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]],t=this,i=0;i<e.length;i++)t=t.replace(e[i][0],e[i][1]);return t},window.handleOpenURL=function(e){setTimeout(function(){_release_toast(e)},10)};class VSplashLogo{constructor(e){return VSplashLogo.instance||(this._data=[],(VSplashLogo.instance=this).timer=0,VMain.modalShow("modal-splash").then(()=>{this.init(e)})),VSplashLogo.instance}static getTimer(){return this.timer}init(e){for(var t=document.getElementById(e),e=(this.target=e+"-draw",document.getElementById(this.target)),t=(null!==e&&t.removeChild(e),(e=document.createElement("div")).id=this.target,e.style="position:absolute; width:"+window.innerWidth+"px; height: "+(window.innerHeight+44)+"px; top:0px; left:0px; background:white",t.insertBefore(e,t.firstChild),this.timer=Date.now(),window.innerWidth),i=window.innerHeight+44,e=(console.log("draw: "+t+" : "+i),SVG(e).size(t,i)),n=[],a=(n[1]=e.path("M511.47,404.44c0-0.93,0-1.87,0-2.8c-1.05-1.5-1.96-3.16-1.79-4.97c0.31-3.18-1.01-5.97-1.68-8.92 c-0.12-0.54-0.4-0.96-1.09-0.95c-0.56,0.01-0.82-0.35-0.84-0.9c-0.01-0.4-0.12-0.83-0.01-1.19c0.41-1.36-0.39-2.11-1.32-2.81 c-0.21-0.16-0.42-0.33-0.63-0.49c-1.2-0.84-1.92-1.99-2.3-3.39c-0.32-1.18-0.68-2.35-1.04-3.56c-0.19,0.01-0.35,0.02-0.52,0.03 c-1.39,0.06-1.86-0.31-1.77-1.68c0.05-0.72,0.27-1.49,0.62-2.12c1.31-2.34,2.06-4.71,0.82-7.33c-0.22-0.47-0.38-1-0.69-1.4 c-0.6-0.78-1.48-1.4-1.11-2.59c0.04-0.12-0.13-0.29-0.19-0.44c-1.57-3.62-3.26-7.2-4.67-10.88c-1.16-3.02-1.79-6.22-3.18-9.18 c-1.22-2.6-2.07-5.38-3.12-8.06c-0.34-0.88-0.73-1.7-1.55-2.35c-0.76-0.6-1.41-1.43-1.87-2.29c-0.94-1.78-1.7-3.65-2.54-5.48 c-0.23-0.5-0.39-1.06-0.73-1.47c-0.73-0.9-1.66-1.66-2.31-2.61c-0.61-0.89-1.37-0.89-2.14-0.62c-1.88,0.66-3.76,1.32-5.56,2.17 c-2.4,1.13-4.72,2.45-7.08,3.67c-4.38,2.25-8.71,4.57-12.67,7.54c-0.44,0.33-1.08,0.51-1.64,0.54c-1.32,0.07-1.85,0.54-1.98,1.89 c-0.04,0.43-0.27,0.85-0.41,1.27c0,0.2,0,0.4,0,0.6c0.08,0.25,0.18,0.49,0.23,0.75c0.21,1.13,0.24,2.32,0.64,3.38 c0.79,2.11,1.78,4.14,2.7,6.2c1.54,3.46,2.97,6.94,3.9,10.64c0.66,2.62,1.74,5.16,2.83,7.64c0.45,1.01,0.7,2.02,0.97,3.07 c0.41,1.62,0.85,3.28,1.59,4.77c0.84,1.69,2.01,3.21,2.25,5.16c0.03,0.25,0.17,0.52,0.33,0.72c0.75,0.91,0.97,2,1.14,3.13 c0.09,0.55,0.25,1.1,0.47,1.62c2.18,5.19,4.44,10.36,6.57,15.57c1.45,3.56,2.75,7.18,4.1,10.78c0.13,0.34,0.21,0.7,0.33,1.04 c1.18,3.51,2.37,7.02,3.55,10.53c0.47,0,0.93,0,1.4,0c1.12-0.28,2.22-0.62,3.35-0.83c1.2-0.22,2.51-0.08,3.64-0.48 c4.34-1.52,8.94-2.17,13.09-4.3c1.51-0.77,3.03-1.47,4.38-2.51c0.44-0.34,0.95-0.63,1.46-0.84c1.82-0.75,3.67-1.45,5.61-2.21 C511.14,406.59,511.3,405.51,511.47,404.44z"),n[2]=e.path("M441.23,327.32c-0.73,0-1.47,0-2.2,0c-2.39-0.86-3.69-2.73-4.8-4.9c-1.71-3.36-3.57-6.64-5.7-9.78 c-2.28-3.35-4.26-6.91-6.27-10.44c-1.56-2.74-2.93-5.59-4.43-8.36c-0.65-1.2-1.5-2.29-2.11-3.5c-1.08-2.15-2.44-4.02-4.44-5.42 c-0.94-0.67-1.42-1.54-0.97-2.84c0.8-2.33,1.39-4.72,2.14-7.06c0.4-1.25,1.07-2.35,2.14-3.17c1.49-1.16,3.06-2.24,4.42-3.54 c4.66-4.45,10.37-6.31,16.61-6.93c0.46-0.05,1.01,0.09,1.42,0.32c1.25,0.67,2.29,1.56,2.93,2.9c0.22,0.47,0.74,0.83,1.18,1.15 c0.83,0.6,1.93,0.97,2.53,1.74c1.45,1.87,3.34,3.36,4.39,5.61c1.02,2.18,2.6,4.09,3.81,6.19c2.99,5.19,5.85,10.45,8.89,15.61 c1.78,3.02,3.26,6.21,5.31,9.11c0.95,1.35,0.9,3.4,1.26,5.14c0.05,0.26-0.13,0.58-0.22,0.86c-0.84,2.56-2.79,4.29-4.71,5.94 c-1.75,1.51-3.77,2.71-5.71,3.99c-1.26,0.83-2.55,1.62-3.9,2.29C449.02,324.09,445.33,326.16,441.23,327.32z"),n[3]=e.path("M400.75,283.85c-0.07,0-0.13,0-0.2,0c-0.21-0.08-0.42-0.2-0.65-0.23c-1.45-0.22-2.9-0.37-4.34-0.64 c-1.33-0.25-2.62-0.81-3.95-0.91c-2.04-0.15-4.11,0.01-6.16-0.04c-2.32-0.06-4.65-0.12-6.97-0.32c-4.93-0.42-9.81-1.39-14.79-1.37 c-2.31,0.01-4.63-0.33-6.94-0.62c-2.23-0.27-4.45-0.66-6.67-1.02c-1.18-0.2-2.33-0.62-3.51-0.67c-2.58-0.1-5.17,0.01-7.76-0.04 c-2.83-0.06-5.65-0.35-8.47-0.28c-2.2,0.05-4.26-0.71-6.5-0.55c-3.21,0.23-6.47,0.1-9.68-0.17c-3.17-0.26-5.56-1.86-6.64-5.05 c-0.24-0.72-0.56-1.43-0.91-2.11c-1.27-2.5-1.37-5.18-1.1-7.87c0.16-1.61,0.6-3.2,0.87-4.8c0.62-3.73,1.12-7.49,1.86-11.2 c0.32-1.6,1.37-3.07,1.64-4.67c0.27-1.64,1.33-2.05,2.55-2.33c2.65-0.61,5.29-0.15,7.94,0.2c2.05,0.27,4.05,0.83,6.16,0.67 c1.41-0.1,2.85,0.15,4.27,0.3c2.84,0.29,5.69,0.61,8.53,0.94c3.04,0.35,6.07,0.73,9.1,1.08c0.71,0.08,1.22,0.32,1.64,0.95 c0.26,0.39,0.8,0.79,1.24,0.83c1.42,0.12,2.88,0.26,4.27,0.05c2.56-0.4,5.08-0.3,7.62,0.08c1.17,0.17,2.41,0.29,3.56,0.11 c1.67-0.28,2.95-0.22,3.89,1.5c0.48,0.89,1.55,1.43,2.26,2.22c0.69,0.77,1.2,0.92,2,0.28c0.44-0.35,0.75-0.87,1.19-1.2 c0.87-0.65,1.72-1.46,2.71-1.77c2.8-0.87,5.67-0.95,8.53-0.15c1.69,0.47,3.4,0.92,5.12,1.27c2.47,0.5,4.99,0.79,7.44,1.37 c2.03,0.47,4.01,1.2,5.99,1.87c0.97,0.33,1.9,0.76,2.82,1.21c0.25,0.12,0.5,0.46,0.56,0.74c0.9,3.99,1.2,7.96,0.44,12.05 c-0.72,3.91-1.02,7.89-1.41,11.86c-0.23,2.39-1.26,4.46-2.29,6.54c-0.13,0.25-0.37,0.54-0.62,0.62c-0.97,0.34-1.95,0.61-2.94,0.89 C401.9,283.59,401.32,283.71,400.75,283.85z"),n[4]=e.path("M299.21,260.73c0,1.27,0,2.53,0,3.8c-0.06,0.19-0.15,0.37-0.18,0.56c-0.36,2.66-0.76,5.32-1.04,7.98 c-0.19,1.78-0.88,3.08-2.74,3.41c-1.56,0.27-3.16,0.3-4.71,0.63c-1.64,0.34-3.25,0.33-4.91,0.27c-1.4-0.04-2.81,0.47-4.22,0.74 c-0.67,0-1.33,0-2,0c-0.98-0.14-1.96-0.33-2.94-0.43c-3.02-0.31-6.03-0.31-9.06-0.04c-1.08,0.1-2.2-0.33-3.31-0.36 c-5.82-0.16-11.65-0.27-17.47-0.39c-0.37-0.01-0.76-0.09-1.09,0.02c-2.14,0.75-4.37,0.73-6.59,0.74c-3.1,0.02-6.2,0.01-9.3,0.01 c-2.23,0-4.45,0.04-6.68,0c-0.95-0.01-1.89-0.24-2.83-0.25c-4.09-0.06-8.18-0.08-12.26-0.09c-0.46,0-0.93,0.08-1.38,0.19 c-3.23,0.79-4.95-0.43-5.23-3.72c-0.01-0.1,0-0.2-0.02-0.3c-0.26-1.6-0.48-3.21-0.78-4.8c-0.37-1.99-1.16-3.97-1.14-5.95 c0.06-5.63-1.4-11.06-1.87-16.61c-0.1-1.14,0.02-2.31-0.06-3.45c-0.02-0.34-0.38-0.65-0.58-0.98c0-0.6,0-1.2,0-1.8 c0.07-0.25,0.19-0.51,0.2-0.76c0.02-0.8,0.3-1.18,1.2-1.33c2.38-0.41,4.72-1.05,7.11-1.47c1.99-0.35,4-0.64,6.01-0.75 c3.63-0.2,7.11,0.58,10.51,1.89c1.41,0.54,2.9,0.9,4.3-0.38c0.68-0.62,1.63-0.96,2.48-1.36c0.7-0.33,1.45-0.56,2.18-0.84 c0.8,0,1.6,0,2.4,0c1.46,0.21,2.92,0.54,4.39,0.6c1.82,0.07,3.65-0.14,5.48-0.14c3.89-0.01,7.8-0.15,11.68,0.09 c4.27,0.26,8.53,0.93,12.81,0.67c3.07-0.19,6.08,0.03,9.05,0.79c0.93,0.24,1.87,0.59,2.8,0.58c1.65-0.01,3.3-0.2,4.94-0.4 c4.6-0.54,8.86,0.38,12.74,2.9c0.33,0.21,0.67,0.68,0.69,1.05c0.13,1.85,0.62,3.59,1.4,5.25c0,0.07,0,0.13,0,0.2 c-0.15,0.83-0.4,1.66-0.42,2.49c-0.05,2.86-0.06,5.72-0.01,8.57C298.81,258.65,299.07,259.69,299.21,260.73z"),n[5]=e.path("M195.97,277.16c0,0.13,0,0.27,0,0.4c-0.09,0.08-0.23,0.15-0.26,0.25c-0.49,1.6-1.54,2.76-2.8,3.8 c-0.87,0.72-1.64,1.57-2.54,2.25c-0.83,0.63-1.75,1.19-2.69,1.65c-1.31,0.64-2.72,1.08-4.02,1.75c-2.63,1.36-5.17,2.9-7.81,4.22 c-2.04,1.02-4.17,1.87-6.3,2.7c-0.55,0.22-1.25,0.15-1.87,0.11c-1.77-0.11-3.02-0.88-3.34-2.79c-0.07-0.38-0.35-0.84-0.68-1.05 c-1-0.65-2.1-1.15-3.09-1.81c-0.93-0.61-1.91-1.24-2.64-2.06c-1.1-1.24-2.03-2.63-2.99-3.99c-2.27-3.2-4.43-6.48-6.81-9.59 c-1.11-1.45-1.98-2.97-2.71-4.61c-0.29-0.66-0.19-1.06,0.57-1.37c0.88-0.36,1.75-0.83,2.51-1.41c2.43-1.86,4.79-3.81,7.22-5.67 c1.89-1.45,3.86-2.8,5.79-4.19c0.27-0.19,0.52-0.4,0.76-0.63c1.65-1.61,3.47-2.97,5.52-4.07c2.13-1.14,4.13-2.53,6.22-3.77 c0.52-0.31,1.14-0.67,1.7-0.63c1.62,0.1,3.23,0.37,4.84,0.62c0.33,0.05,0.75,0.24,0.91,0.5c1.21,2.02,2.44,4.03,3.54,6.11 c1.86,3.52,3.65,7.08,5.43,10.64c1.38,2.75,2.97,5.4,3.93,8.36C194.81,274.34,195.43,275.74,195.97,277.16z"),n[6]=e.path("M98.23,372.48c0-0.93,0-1.87,0-2.8c1.05-1.5,1.96-3.16,1.79-4.97c-0.31-3.18,1.01-5.97,1.68-8.92 c0.12-0.54,0.4-0.96,1.09-0.95c0.56,0.01,0.82-0.35,0.84-0.9c0.01-0.4,0.12-0.83,0.01-1.19c-0.41-1.36,0.39-2.11,1.32-2.81 c0.21-0.16,0.42-0.33,0.63-0.49c1.2-0.84,1.92-1.99,2.3-3.39c0.32-1.18,0.68-2.35,1.04-3.56c0.19,0.01,0.35,0.02,0.52,0.03 c1.39,0.06,1.86-0.31,1.77-1.68c-0.05-0.72-0.27-1.49-0.62-2.12c-1.31-2.34-2.06-4.71-0.82-7.33c0.22-0.47,0.38-1,0.69-1.4 c0.6-0.78,1.48-1.4,1.11-2.59c-0.04-0.12,0.13-0.29,0.19-0.44c1.57-3.62,3.26-7.2,4.67-10.88c1.16-3.02,1.79-6.22,3.18-9.18 c1.22-2.6,2.07-5.38,3.12-8.06c0.34-0.88,0.73-1.7,1.55-2.35c0.76-0.6,1.41-1.43,1.87-2.29c0.94-1.78,1.7-3.65,2.54-5.48 c0.23-0.5,0.39-1.06,0.73-1.47c0.73-0.9,1.66-1.66,2.31-2.61c0.61-0.89,1.37-0.89,2.14-0.62c1.88,0.66,3.76,1.32,5.56,2.17 c2.4,1.13,4.72,2.45,7.08,3.67c4.38,2.25,8.71,4.57,12.67,7.54c0.44,0.33,1.08,0.51,1.64,0.54c1.32,0.07,1.85,0.54,1.98,1.89 c0.04,0.43,0.27,0.85,0.41,1.27c0,0.2,0,0.4,0,0.6c-0.08,0.25-0.18,0.49-0.23,0.75c-0.21,1.13-0.24,2.32-0.64,3.38 c-0.79,2.11-1.78,4.14-2.7,6.2c-1.54,3.46-2.97,6.94-3.9,10.64c-0.66,2.62-1.74,5.16-2.83,7.64c-0.45,1.01-0.7,2.02-0.97,3.07 c-0.41,1.62-0.85,3.28-1.59,4.77c-0.84,1.69-2.01,3.21-2.25,5.16c-0.03,0.25-0.17,0.52-0.33,0.72c-0.75,0.91-0.97,2-1.14,3.13 c-0.09,0.55-0.25,1.1-0.47,1.62c-2.18,5.19-4.44,10.36-6.57,15.57c-1.45,3.56-2.75,7.18-4.1,10.78c-0.13,0.34-0.21,0.7-0.33,1.04 c-1.18,3.51-2.37,7.02-3.55,10.53c-0.47,0-0.93,0-1.4,0c-1.12-0.28-2.22-0.62-3.35-0.83c-1.2-0.22-2.51-0.08-3.64-0.48 c-4.34-1.52-8.94-2.17-13.09-4.3c-1.51-0.77-3.03-1.47-4.38-2.51c-0.44-0.34-0.95-0.63-1.46-0.84c-1.82-0.75-3.67-1.45-5.61-2.21 C98.55,374.63,98.39,373.55,98.23,372.48z"),n[7]=e.path("M104.21,484.66c-0.64,0-1.28,0-1.92,0c-0.53-0.14-1.05-0.37-1.6-0.42c-3.79-0.31-5.66-2.23-4.8-4.87 c0.32-0.99,0.53-2.03,0.51-3.04c-0.05-3.39-0.24-6.79-0.32-10.18c-0.02-0.84,0.21-1.69,0.25-2.53c0.02-0.53-0.13-1.05-0.16-1.58 c-0.13-1.85-0.29-3.71-0.34-5.57c-0.06-2.12-0.04-4.25-0.02-6.37c0.01-1.51,0.91-2.95,0.39-4.53c-0.38-1.14-0.26-2.37-0.26-3.57 c0-1.36,0.13-2.72,0.19-4.08c0.12-2.85-1.08-5.68-0.18-8.54c0.03-0.09-0.01-0.2-0.02-0.3c-0.13-1.94-0.34-3.89-0.37-5.83 c-0.05-2.72,0.05-5.44,0.03-8.16c-0.03-3.81-0.1-7.62-0.16-11.43c-0.01-0.36-0.05-0.73-0.09-1.09c-0.12-1.05-0.61-2.16-0.31-3.15 c0.55-1.79-0.62-3.47-0.25-5.21c0.07-0.31,0.28-0.63,0.55-0.88c0.82-0.8,1.7-1.57,2.54-2.35c0.62-0.58,1.32-0.89,2.35-0.51 c0.43,0.16,1.11,0.4,1.36,0.27c1.51-0.76,3.09-0.33,4.66-0.29c1.24,0.03,2.48,0.11,3.7,0.05c4.15-0.2,8.28-0.71,12.44-0.12 c0.18,0.03,0.37-0.02,0.55,0.01c1.64,0.22,3.32,0.35,4.89,0.71c1.9,0.44,2.35,1.66,2.4,2.96c0.09,2.15,0.1,4.3,0.24,6.45 c0.21,3.19,0.66,6.37,0.73,9.56c0.1,4.43-0.11,8.86-0.07,13.29c0.01,0.89,0.54,1.77,0.78,2.66c0.16,0.59,0.23,1.18,0.36,1.89 c-0.73-0.1-1.12-0.14-1.59-0.21c0,0.55,0,1.02,0,1.48c0.49-0.23,0.85-0.4,1.21-0.58c0.06,0.33,0.12,0.66,0.17,0.99 c0.04,0.25,0.11,0.5,0.11,0.75c-0.02,0.88-0.07,1.76-0.11,2.63c-0.01,0.22-0.08,0.45-0.03,0.66c0.15,0.61,0.46,1.2,0.5,1.81 c0.13,1.66,0.11,3.33,0.22,4.99c0.33,4.78,0.73,9.56,1.02,14.34c0.13,2.09-0.07,4.2,0.12,6.29c0.38,4.14,1.24,8.27,0.46,12.44 c-0.48,2.56-0.9,5.14-1.39,7.7c-0.03,0.18-0.38,0.39-0.65,0.47c-1.21,0.38-2.41,0.79-3.67,1.05c-5.98,1.24-12.08,1.8-18.3,1.77 C108.31,484.49,106.26,484.61,104.21,484.66z"),n[8]=e.path("M134.28,488c0.33,0,0.67,0,1,0c0.6,0.27,1.21,0.52,1.8,0.81c0.2,0.1,0.45,0.23,0.53,0.41 c1.06,2.32,2.24,4.59,3.09,6.98c1.29,3.68,3.03,7.13,4.9,10.53c0.75,1.37,1.65,2.67,2.25,4.09c1.35,3.24,2.56,6.55,3.82,9.83 c0.07,0.18,0.17,0.37,0.17,0.55c0.02,0.82,0.01,1.65,0.01,2.55c-0.15,0.07-0.41,0.22-0.68,0.34c-0.21,0.09-0.43,0.2-0.66,0.22 c-3.41,0.43-6.18,2.28-9.06,3.94c-3.2,1.84-6.47,3.55-9.68,5.38c-2.52,1.44-5.27,2.47-7.45,4.56c-1.19,1.14-2.95,1.05-4.55,0.87 c-0.46-0.05-1.03-0.33-1.29-0.69c-1.12-1.51-2.19-3.07-3.2-4.66c-0.53-0.84-0.88-1.79-1.37-2.65c-0.73-1.29-0.7-1.93,0.26-3.01 c0.51-0.57,1.01-1.14,1.49-1.69c-0.32-0.28-0.6-0.5-0.85-0.74c-0.65-0.6-1.24-1.3-1.96-1.81c-1.77-1.26-3.51-2.45-4.4-4.62 c-0.75-1.8-1.94-3.41-2.8-5.17c-2.11-4.33-4.93-8.38-5.39-13.4c-0.14-1.54,0.46-2.86,1.9-3.39c2-0.73,3.99-1.45,5.99-2.18 c0.27-0.1,0.71-0.25,0.73-0.42c0.07-0.68,0.48-0.55,0.91-0.52c0.33,0.02,0.67,0.04,0.99-0.04c2.71-0.65,5.42-1.31,8.12-2 c1.48-0.38,2.93-1.15,4.4-1.19C127.2,490.8,130.6,488.9,134.28,488z"),n[9]=e.path("M188.67,597.32c-3.37-1.19-6.76-2.34-10.11-3.6c-2.08-0.78-3.67-2.24-5.03-3.98c-0.9-1.15-1.82-2.3-2.79-3.39 c-0.28-0.31-0.81-0.65-1.17-0.6c-1.3,0.18-1.98-0.7-2.8-1.39c-0.45-0.37-0.95-0.7-1.42-1.05c-1.19-0.89-2.43-1.73-3.57-2.68 c-2.38-1.98-4.72-4.01-7.07-6.02c-0.83-0.72-1.59-1.52-2.47-2.17c-1.72-1.28-2.13-3.18-2.32-5.08c-0.15-1.43-0.91-2.33-1.92-3.08 c-0.37-0.28-1-0.24-1.51-0.32c-0.9-0.13-1.86-0.09-2.7-0.39c-3-1.05-5.25-3.21-7.52-5.32c-0.23-0.22-0.35-0.56-0.52-0.84 c-0.44-0.72-0.79-1.53-1.35-2.15c-1.71-1.89-2.31-4.25-2.62-6.63c-0.25-1.95,1.17-3.32,2.45-4.59c1.08-1.07,2.38-1.94,3.4-3.05 c1.91-2.07,4.17-3.75,6.15-5.74c1.35-1.36,2.74-2.69,4.17-3.97c0.63-0.57,1.41-0.98,2.1-1.49c0.45-0.33,0.9-0.67,1.29-1.07 c1.11-1.1,2.55-1.24,3.96-1.27c0.64-0.01,1.32,0.33,1.91,0.65c1.25,0.68,2.44,1.45,3.66,2.18c0.45,0.27,0.95,0.49,1.35,0.82 c2.02,1.67,4.04,3.34,6.01,5.07c1.99,1.75,3.92,3.56,5.84,5.38c0.37,0.35,0.54,0.92,0.9,1.29c1.13,1.16,2.2,2.41,3.48,3.38 c1.87,1.42,3.95,2.54,5.84,3.94c1.43,1.05,2.68,2.34,4.04,3.5c1.36,1.16,2.78,2.25,4.1,3.46c2.15,1.97,4.23,4.01,6.37,5.99 c0.42,0.39,0.94,0.8,1.47,0.92c1.37,0.31,2.42,1,3.32,2.06c0.3,0.36,0.89,0.47,1.23,0.81c0.74,0.76,1.37,1.62,2.11,2.38 c0.57,0.58,1.17,1.17,1.87,1.56c0.67,0.38,0.9,0.76,0.52,1.41c-0.69,1.2-1.36,2.43-2.14,3.58c-1.43,2.12-2.84,4.25-4.83,5.94 c-0.52,0.44-0.59,1.38-0.95,2.04c-0.23,0.42-0.61,0.77-0.95,1.13c-0.17,0.18-0.41,0.31-0.62,0.46c0.25,0.13,0.5,0.25,0.82,0.41 c0.04,1.05-0.47,1.97-1.34,2.84c-2.49,2.46-4.87,5.02-7.37,7.46c-0.59,0.58-1.52,0.82-2.29,1.22 C189.33,597.32,189,597.32,188.67,597.32z"),n[10]=e.path("M252.68,588.92c0,0.53,0,1.07,0,1.6c-0.06,0.15-0.17,0.31-0.17,0.46c-0.09,2.07-0.56,4.03-1.55,5.86 c-0.11,0.21-0.06,0.51-0.07,0.77c-0.02,0.46,0.1,0.98-0.06,1.38c-0.63,1.5-1.39,2.94-2.02,4.44c-1.39,3.3-2.72,6.61-4.08,9.92 c-0.83,2.02-1.87,3.86-3.89,4.95c-0.1,0.05-0.11,0.27-0.17,0.42c-0.13,0-0.27,0-0.4,0c-1.14-0.34-2.26-0.89-3.42-0.99 c-3.68-0.3-7.33-0.74-10.93-1.63c-1.21-0.3-2.15-0.87-2.88-1.81c-0.52-0.68-1.06-1.41-1.33-2.21c-0.31-0.94-0.8-0.84-1.5-0.64 c-1.6,0.47-3.21,0.58-4.75-0.23c-2.31-1.21-4.98-1.64-7.11-3.27c-0.43-0.33-1.03-0.45-1.55-0.67c-1.9-0.81-3.78-1.64-5.07-3.38 c-0.35-0.47-0.8-0.98-1.31-1.2c-0.81-0.35-0.86-0.93-0.74-1.59c0.09-0.51,0.28-1.02,0.52-1.48c0.86-1.61,1.81-3.17,2.63-4.8 c0.3-0.6,0.35-1.33,0.49-2.01c0.2-0.97,0.19-2.03,0.59-2.91c0.79-1.75,1.79-3.4,2.72-5.08c1.19-2.17,2.71-4.22,2.34-6.92 c-0.06-0.45,0.07-0.93,0.16-1.39c0.11-0.54,0.32-0.84,0.99-1.02c0.97-0.26,1.84-0.9,2.75-1.37c0.13,0,0.27,0,0.4,0 c0.37,0.08,0.74,0.22,1.11,0.23c1.96,0.09,3.93,0.02,5.87,0.24c2.26,0.26,4.47,0.94,6.79,0.78c0.23-0.02,0.48-0.03,0.69,0.05 c0.27,0.1,0.69,0.24,0.73,0.43c0.49,2.07,2.82,2.21,3.82,3.72c1.45-0.02,2.52,0.87,3.72,1.49c2.35,1.22,4.79,2.25,7.17,3.4 c2.93,1.42,5.83,2.88,8.75,4.31C252.15,588.9,252.43,588.88,252.68,588.92z"),n[11]=e.path("M258.34,592.52c0-0.67,0-1.33,0-2c0.23-0.98,0.46-1.97,0.69-2.98c1-0.14,2-0.21,2.98-0.42 c1.47-0.31,3.05,0.04,4.43-0.92c0.64-0.45,1.52-0.71,2.31-0.77c2.52-0.21,5.02-0.49,7.4-1.4c0.34-0.13,0.71-0.16,1.07-0.24 c3.14-0.7,6.27-1.45,9.42-2.08c2.34-0.47,4.71-0.79,7.07-1.17c0.68-0.11,1.37-0.21,2.05-0.33c2.38-0.42,4.75-0.85,7.13-1.26 c3.03-0.53,6.19-0.21,9.11-1.42c0.61-0.25,1.26-0.45,1.9-0.58c3.42-0.69,6.84-1.34,10.26-2.01c1.39-0.27,2.77-0.55,4.16-0.83 c0.13,0,0.27,0,0.4,0c0.39,0.84,0.85,1.64,1.15,2.51c0.48,1.44,0.83,2.92,1.28,4.37c1,3.19,1.46,6.46,1.77,9.78 c0.15,1.67,0.45,3.4,2.29,4.24c0.15,0.07,0.24,0.37,0.27,0.58c0.32,1.79,0.62,3.59,0.93,5.38c0.17,0.98,0.34,1.95,0.51,2.93 c0,0.2,0,0.4,0,0.6c-0.07,0.49-0.07,1-0.24,1.45c-0.36,0.95-0.72,1.93-1.28,2.77c-0.25,0.37-0.98,0.39-1.49,0.6 c-0.86,0.35-1.69,0.8-2.57,1.07c-1.8,0.54-3.6,1.1-5.45,1.44c-1.04,0.19-2.2-0.23-3.22-0.01c-3.53,0.75-7.03,1.65-10.54,2.52 c-1.69,0.42-3.38,0.78-5.11,0.33c-1.26-0.33-2.41-0.03-3.55,0.49c-1.07,0.48-2.17,0.64-3.37,0.37c-1.22-0.27-2.57-0.64-3.72-0.36 c-2.53,0.61-4.96,1.64-7.45,2.43c-0.91,0.29-1.41,0.87-1.82,1.67c-0.13,0.26-0.49,0.56-0.77,0.58c-3.25,0.18-6.5,0.3-9.75,0.45 c-0.82,0.04-1.64,0.12-2.46,0.19c-1.8,0-3.6,0-5.4,0c-0.45-0.07-0.91-0.2-1.36-0.22c-2.1-0.09-3.64-1.58-3.83-3.69 c-0.06-0.71-0.27-1.41-0.4-2.12c-0.53-2.83-1.07-5.65-1.56-8.48c-0.26-1.5-0.22-3.07-0.64-4.51c-0.74-2.49-1.54-4.94-1.17-7.59 c0.01-0.05-0.06-0.1-0.1-0.16c-0.3,0.05-0.6,0.1-0.91,0.15C258.61,593.4,258.48,592.96,258.34,592.52z"),n[12]=e.path("M355.03,610.49c-0.4,0-0.8,0-1.2,0c-0.81-0.81-1.8-1.5-2.4-2.44c-1.36-2.12-2.49-4.39-3.8-6.55 c-0.77-1.27-1.64-2.5-2.56-3.67c-0.59-0.74-0.92-1.41-0.34-2.28c0.39-0.59,0.3-1.08-0.2-1.58c-0.6-0.61-1.24-1.22-1.67-1.95 c-1.7-2.89-3.27-5.86-4.99-8.75c-0.91-1.52-2.02-2.92-3.04-4.38c0-0.27,0-0.53,0-0.8c1.93-1.44,3.69-3.13,6.2-3.64 c0.77-0.16,1.57-0.56,2.19-1.06c1.87-1.47,3.88-2.59,6.18-3.33c4.45-1.44,8.34-4.07,12.43-6.27c2.02-1.08,3.84-2.48,6.15-3.08 c1.47-0.38,2.81-1.31,4.17-2.07c1.32-0.74,2.59-1.56,3.88-2.35c0.07,0,0.13,0,0.2,0c0.19,0.14,0.37,0.39,0.57,0.42 c1.16,0.13,2.34,0.21,3.39,0.3c0.58,0.8,1.12,1.68,1.79,2.43c1.51,1.68,3.19,3.23,4.63,4.97c1.38,1.66,2.29,3.78,3.88,5.16 c1.45,1.26,1.18,2.22,0.6,3.55c-0.31,0.71-0.03,1.27,0.7,1.49c0.76,0.23,1.54,0.44,2.33,0.5c1.68,0.13,1.74,0.08,2.08,1.8 c0.5,2.51,1.47,4.81,3.38,6.53c1.19,1.08,1.52,2.27,1.44,3.78c-0.09,1.56-0.09,1.64-1.56,2.27c-0.49,0.21-0.97,0.45-1.41,0.74 c-1.74,1.13-3.57,1.99-5.61,2.47c-0.72,0.17-1.32,0.78-2,1.14c-1.18,0.62-2.34,1.35-3.59,1.78c-2.62,0.92-5.33,1.59-7.94,2.53 c-1.29,0.47-2.38,1.5-3.68,1.95c-1.96,0.68-3.92,1.11-5.48,2.76c-1.03,1.09-2.61,1.69-4,2.39 C362.2,607.01,358.61,608.74,355.03,610.49z"),n[13]=e.path("M405.8,581.39c-0.13,0-0.27,0-0.4,0c-0.77-1.04-1.57-2.05-2.29-3.13c-0.85-1.28-2-2.41-2.18-4.05 c-0.19-1.7-1.01-2.74-2.68-3.41c-1.24-0.5-2.87-0.99-2.82-2.91c0-0.03,0-0.08-0.02-0.09c-0.71-0.48-0.25-0.93,0.02-1.41 c0.47-0.84,0.26-1.74-0.41-2.39c-1.48-1.44-2.94-2.9-4.39-4.36c-0.31-0.32-0.56-0.7-0.86-1.07c0.29-0.16,0.47-0.26,0.64-0.36 c1.29-0.75,2.82-1.27,3.81-2.3c0.96-1,2.07-1.49,3.22-2.02c1.27-0.58,2.54-1.15,3.85-1.64c0.77-0.29,1.16-0.76,1.34-1.55 c0.12-0.55,0.29-1.27,0.69-1.56c1.86-1.34,3.83-2.53,5.71-3.84c0.96-0.67,1.95-1.37,2.67-2.26c0.52-0.64,0.99-0.71,1.59-0.52 c0.49,0.16,1.01,0.4,1.39,0.75c1.22,1.12,2.42,2.27,3.55,3.48c1.65,1.77,3.24,3.6,4.86,5.41c0.6,0.67,1.26,1.29,1.8,2.01 c1.28,1.73,2.41,3.57,3.77,5.23c1.45,1.78,2.21,3.84,2.94,5.94c0.1,0.3,0.28,0.57,0.43,0.86c0,0.07,0,0.13,0,0.2 c-0.4,0.44-0.78,0.89-1.2,1.31c-2.9,2.83-5.77,5.7-8.76,8.43c-0.84,0.77-2.08,1.09-3.12,1.65c-0.98,0.53-2.16,0.9-2.87,1.69 c-1.2,1.32-2.61,1.44-4.09,1.17C409.79,580.25,407.81,580.84,405.8,581.39z"),n[14]=e.path("M443.67,558.95c-0.2,0-0.4,0-0.6,0c-1.09-0.8-2.19-1.6-3.28-2.39c-0.5-0.36-0.99-0.76-1.53-1.07 c-1.66-0.96-3.42-1.78-4.99-2.87c-1.66-1.15-3.12-2.59-4.7-3.85c-2.07-1.66-4.08-3.44-6.32-4.84c-1.95-1.21-2.66-3.2-4.01-4.77 c0.98-0.63,1.83-1.27,1.85-2.35c0.06-3.07,0.26-6.13,0.53-9.19c0.25-2.81,0.74-5.52,1.53-8.19c0.58-1.98,1.4-3.87,3.39-4.92 c0.37-0.2,0.77-0.5,0.95-0.86c0.26-0.52,0.47-1.14,0.44-1.71c-0.1-1.64,0.01-3.23,0.59-4.79c1.2-3.2,2.43-6.39,3.47-9.64 c0.34-1.06,0.78-1.92,1.58-2.65c1.13-1.03,1.77-2.36,1.9-3.85c0.28-3.14,0.47-6.29,0.63-9.44c0.12-2.39,0.12-4.79,0.23-7.18 c0.02-0.44,0.32-0.88,0.53-1.31c0.4-0.83,1.01-1.61,1.19-2.48c0.84-4.12,1.48-8.28,2.35-12.39c0.66-3.1,1.57-6.14,2.27-8.87 c2.47-0.81,4.54-1.48,6.6-2.15c0.07,0,0.13,0,0.2,0c1.45,1.02,3.09,1.05,4.68,0.66c2.01-0.5,4.04-0.53,6.04-0.33 c4.12,0.42,8.23,0.96,12.34,1.53c3.19,0.43,6.38,0.86,9.52,1.51c1.42,0.29,2.71,1.15,4.07,1.73c1.26,0.54,1.34,0.88,0.86,2.22 c-0.42,1.18-0.83,2.4-0.93,3.63c-0.19,2.45-0.17,4.92-0.24,7.38c-0.01,0.3,0.05,0.64-0.08,0.88c-0.88,1.67-0.48,3.37-0.23,5.08 c0.09,0.58,0.23,1.26,0.03,1.77c-0.61,1.62-0.36,3.13,0.2,4.45c-0.33,0.45-0.64,0.75-0.79,1.12c-0.78,1.83-1.48,3.7-2.26,5.53 c-3.55,8.23-7.17,16.43-10.67,24.68c-0.69,1.62-1.08,3.39-1.43,5.12c-0.18,0.91-0.53,1.55-1.22,2.15c-0.59,0.5-1.27,1.1-1.49,1.79 c-0.73,2.34-1.2,4.75-1.89,7.1c-0.69,2.32-1.63,4.56-2.28,6.89c-0.54,1.95-1.97,2.88-3.56,3.77c-1.39,0.78-1.69,1.91-1.04,3.38 c0.19,0.44,0.3,0.93,0.35,1.41c0.19,1.86-0.67,3.38-1.79,4.71c-1.94,2.32-4.04,4.5-5.58,7.14c-0.87,1.5-2.15,2.7-3.85,3.36 c-0.27,0.11-0.45,0.49-0.64,0.77c-0.31,0.44-0.51,1.02-0.92,1.32C445.08,558.36,444.34,558.61,443.67,558.95z"),n[15]=e.path("M474.77,425.46c0,0.2,0,0.4,0,0.6c-0.28,0.74-0.41,1.59-0.87,2.19c-1.36,1.79-2.63,3.76-4.34,5.14 c-5.01,4.04-10.5,7.21-17.05,8.08c-1.4,0.19-2.76,0.65-4.14,0.99c-0.13,0-0.27,0-0.4,0c-1.26-0.41-1.99-1.32-2.53-2.48 c-0.55-1.16-1.38-2.1-2.72-2.26c-1.3-0.16-1.99-0.91-2.48-2.02c-1.46-3.31-3.02-6.58-4.37-9.94c-1.23-3.04-2.32-6.14-3.31-9.27 c-0.34-1.07-0.54-2.07-1.4-2.94c-2.81-2.85-4.78-6.29-6.43-9.89c-1.36-2.97-2.88-5.81-4.83-8.44c-0.59-0.79-1.03-1.71-1.46-2.61 c-2.31-4.79-4.57-9.6-6.9-14.38c-0.81-1.67-1-3.29-0.12-4.96c0.52-0.99,1.1-1.96,1.65-2.94c0.55-0.97,1.09-1.94,1.62-2.9 c0.51-0.31,1.09-0.61,1.62-0.99c0.9-0.63,1.73-1.35,2.65-1.93c1.27-0.79,2.6-1.47,3.92-2.19c3.78-2.08,7.51-4.25,11.87-4.94 c1.03-0.16,2.03-0.47,3.04-0.71c0.13,0,0.27,0,0.4,0c0.11,0.07,0.21,0.19,0.32,0.2c2.37,0.21,3.95,1.7,5.5,3.42 c-0.82,1.06-0.32,1.84,0.54,2.68c0.73,0.71,1.28,1.61,1.84,2.48c1.39,2.15,2.8,4.28,4.09,6.49c2.01,3.47,3.95,6.99,5.87,10.51 c0.55,1.01,0.87,2.14,1.4,3.16c2.68,5.19,5.37,10.36,8.1,15.53c0.45,0.86,0.4,1.4-0.54,1.78c-1.04,0.42-1.68,1.01-1.69,2.34 c-0.02,1.44-0.12,1.68,1.21,2.21c1.96,0.78,3.9,1.56,4.67,3.79c0.15,0.43,0.22,0.91,0.45,1.29c1.17,2,2.44,3.93,3.53,5.97 c0.47,0.87,0.66,1.92,0.84,2.91C474.53,422.76,474.62,424.12,474.77,425.46z"),n[16]=e.path("M396.08,294.34c0.27,0,0.53,0,0.8,0c1.78,0.69,3.25,1.85,4.44,3.29c1.65,2,3.21,4.07,4.74,6.17 c0.76,1.04,1.47,2.15,2.01,3.32c1.07,2.32,2.58,4.32,4.06,6.38c1.75,2.41,3.42,4.86,5.29,7.18c0.59,0.73,0.88,1.92,0.84,2.88 c-0.09,1.92-0.5,3.82-0.77,5.66c1.37,1.18,2.67,1.65,3.93,1.44c0.21,0.39,0.45,0.78,0.64,1.2c1.77,3.86,3.56,7.72,5.3,11.59 c1.17,2.6,2.16,5.24,1.46,8.18c-0.09,0.36-0.02,0.85-0.24,1.09c-1.67,1.85-3.36,3.67-5.75,4.68c-2.35,1-4.67,2.09-6.96,3.21 c-3.02,1.48-5.85,3.36-9.39,3.62c-1.74,0.13-3.28-0.14-4.36-1.36c-2.93-3.32-5.71-6.76-8.52-10.18c-0.41-0.5-0.83-1.08-0.2-1.78 c0.11-0.12,0.02-0.52-0.09-0.73c-0.3-0.55-0.61-1.12-1.03-1.58c-1.2-1.34-2.52-2.56-3.67-3.94c-1.76-2.13-3.43-4.33-5.08-6.55 c-0.29-0.4-0.28-1.02-0.43-1.53c-0.11-0.39-0.14-0.96-0.41-1.14c-2.24-1.52-3.25-3.83-4.43-6.13c-1.46-2.85-3.3-5.51-4.98-8.25 c-0.03-0.06-0.08-0.11-0.13-0.15c-1.7-1.74-2.24-4.08-3.24-6.12c0.77-0.55,1.53-0.94,2.1-1.52c3.8-3.88,8.13-7.09,12.8-9.82 c1.02-0.6,1.84-1.33,2.72-2.06c1.92-1.59,3.92-3.09,5.85-4.66C394.33,295.96,395.19,295.13,396.08,294.34z"),n[17]=e.path("M352.03,280.1c0.13,0,0.27,0,0.4,0c0.82,1.12,1.97,2.12,2.4,3.37c1.27,3.68,2.24,7.47,3.38,11.21 c0.37,1.23,0.92,2.4,1.34,3.61c0.75,2.23,1.46,4.48,2.19,6.71c0.04,0.12,0.07,0.32,0.16,0.35c1.07,0.43,1.11,1.44,1.33,2.34 c0,2.07,0,4.13,0,6.2c-0.88,0.08-1.82-0.02-2.64,0.25c-4.69,1.56-9.32,3.29-14.02,4.81c-4.03,1.3-7.9,3.1-12.11,3.92 c-2.19,0.43-4.31,1.26-6.45,1.91c-0.73,0.22-1.46,0.44-2.18,0.67c-0.27,0.09-0.63,0.13-0.77,0.32c-0.75,1.02-1.74,1.5-2.99,1.5 c-0.43,0-0.87,0.01-1.28,0.11c-5.6,1.41-11.2,2.81-16.78,4.28c-3.07,0.81-6.11,1.74-9.17,2.62c-0.47,0-0.93,0-1.4,0 c-1.6-0.93-2.06-2.63-2.83-4.13c-0.24-0.47-0.72-0.91-1.2-1.15c-1.27-0.66-1.45-0.74-0.73-2c0.77-1.35,0.43-2.53,0-3.81 c-0.73-2.16-1.47-4.33-2.07-6.53c-0.88-3.19-2.41-6.19-2.42-9.65c-0.01-1.38-0.87-2.75-1.35-4.12c0-0.47,0-0.93,0-1.4 c0.67-0.65,1.26-1.45,2.04-1.92c1.45-0.86,3.03-1.51,4.53-2.3c0.42-0.22,0.89-0.57,1.06-0.98c0.37-0.86,0.98-1.08,1.81-1.04 c0.5,0.02,1,0.03,1.5,0.03c1.99,0,3.97,0,5.96,0c0.09-0.48,0.25-0.82,0.51-0.94c2.51-1.13,5.05-2.15,7.75-2.8 c4.41-1.06,8.79-2.28,13.18-3.44c0.8-0.21,1.57-0.68,2.37-0.72c2.84-0.12,5.35-1.82,8.28-1.57c0.56,0.05,0.98-0.06,1.26,0.48 c0.4,0.74,1.1,0.84,1.7,0.54c1.03-0.52,2.25-0.83,2.84-2.04c0.15-0.3,0.59-0.48,0.93-0.65c0.4-0.2,0.9-0.25,1.26-0.5 c1.03-0.73,2-1.54,3.01-2.31c0.2-0.16,0.43-0.36,0.67-0.39c2.16-0.23,4.32-0.42,6.48-0.62C350.67,280.27,351.35,280.18,352.03,280.1 z"),n[18]=e.path("M260.62,305.2c0.07,0,0.13,0,0.2,0c0.13,0.09,0.26,0.21,0.4,0.25c1.29,0.4,2.6,0.74,3.86,1.2 c0.77,0.29,1.43,0.78,1.68,1.68c0.26,0.93,0.56,1.84,0.92,2.73c1,2.49,2.06,4.96,3.04,7.45c0.99,2.53,1.86,5.12,2.88,7.64 c0.72,1.78,1.58,3.5,2.43,5.22c0.31,0.62,0.85,1.12,1.16,1.73c0.82,1.62,0.56,2.66-1,3.51c-1.83,1.01-3.73,1.9-5.62,2.8 c-2.99,1.41-5.93,2.97-9.01,4.14c-5.24,2-10.58,3.72-15.85,5.62c-0.87,0.31-1.62,0.97-2.45,1.42c-0.45,0.24-0.95,0.44-1.45,0.54 c-1.01,0.19-2.1,0.12-3.03,0.48c-2.12,0.81-4.45,1.12-6.25,2.77c-0.67,0.61-1.79,0.7-2.61,1.19c-3.29,1.93-6.87,3.17-10.35,4.64 c-2.31,0.98-4.5,2.25-6.77,3.33c-3.56,1.7-6.9,3.84-10.73,4.99c-1.41,0.42-2.66,1.36-4.04,1.95c-4.06,1.73-8.14,3.4-12.21,5.1 c-0.13,0-0.27,0-0.4,0c-0.25-0.64-0.37-1.38-0.76-1.91c-2.08-2.76-4.04-5.61-5.37-8.82c-1.13-2.71-3.23-5.08-3.05-8.28 c0.01-0.17-0.19-0.35-0.25-0.53c-1.27-4.03-2.13-8.06-0.24-12.15c0.12-0.26,0.17-0.61,0.09-0.87c-0.16-0.51,0-0.79,0.4-1.07 c0.32-0.23,0.61-0.52,0.88-0.81c1.26-1.36,2.81-1.97,4.66-2.18c1.42-0.16,2.9-0.59,4.13-1.3c2.01-1.15,3.91-2.49,6.2-3.11 c1.11-0.3,2.18-0.75,3.24-1.2c0.85-0.36,1.63-0.92,2.5-1.2c1.61-0.52,2.86-1.5,3.99-2.7c0.38-0.4,0.8-0.79,1.27-1.09 c4.94-3.19,10.5-4.96,16-6.85c1.05-0.36,2.28-0.34,3.42-0.29c1.22,0.05,2.43,0.35,3.65,0.52c0.32,0.04,0.78,0.15,0.97-0.01 c0.83-0.7,1.59-1.48,2.35-2.26c0.37-0.38,0.61-0.92,1.02-1.21c2-1.43,3.79-3.27,6.41-3.59c0.1-0.01,0.19-0.06,0.28-0.11 c2.62-1.24,5.17-2.71,7.89-3.66c3.09-1.08,6.34-1.68,9.52-2.5c0.38-0.1,0.77-0.21,1.11-0.4c1.05-0.58,2.09-1.2,3.13-1.8 C259.45,305.87,260.04,305.53,260.62,305.2z"),n[19]=e.path("M173.64,410.78c-0.73,0-1.47,0-2.2,0c-1.09-0.61-2.18-1.11-3.45-0.49c-0.22,0.11-0.53,0.08-0.79,0.07 c-2.42-0.13-4.86-0.18-7.26-0.44c-1.84-0.2-3.68-0.51-5.35-1.44c-0.6-0.34-1.03-0.67-0.98-1.42c0.07-1.02,0.09-2.05,0.18-3.08 c0.09-0.92,0.18-1.76-0.44-2.63c-0.64-0.89-1.02-1.97-1.51-2.96c0-0.2,0-0.4,0-0.6c0.28-1.35,0.74-2.69,0.8-4.04 c0.13-2.79-0.05-5.6,0.06-8.39c0.12-2.98,0.42-5.96,0.64-8.9c0.87,0.07,1.54,0.21,2.18,0.14c1.39-0.14,2.77-0.36,4.14-0.59 c0.34-0.06,0.65-0.27,0.97-0.42c0.07,0,0.13,0,0.2,0c0.5,0.08,1.01,0.25,1.51,0.23c2.27-0.1,4.46-0.03,6.11,1.88 c0.03,0.04,0.12,0.04,0.27,0.07c0.44-0.46,0.91-0.95,1.28-1.35c1.04,0.48,1.93,1.03,2.9,1.33c3.49,1.07,7.12,1.23,10.74,1.47 c1.72,0.11,3.22,0.74,4.51,1.78c0.53,0.43,1,1.24,1.04,1.91c0.17,2.48,0.19,4.97,0.21,7.45c0.03,5.19,0.01,10.37,0.01,15.44 c-1.13,0.77-2.2,1.5-3.27,2.22c-0.21,0.14-0.51,0.38-0.69,0.32c-1.12-0.34-2.12-0.3-2.93,0.68c-0.07,0.09-0.25,0.09-0.36,0.15 c-1.23,0.69-2.6,0.63-3.94,0.8C176.67,410.15,175.16,410.5,173.64,410.78z"),n[20]=e.path("M157.03,426.38c0-0.27,0-0.53,0-0.8c0.21-1.84,1.53-2.46,3.08-2.87c4.01-1.07,7.99-2.22,12.01-3.23 c1.04-0.26,1.49-0.86,1.83-1.67c1.43-0.13,2.82-0.24,4.2-0.4c2.23-0.25,4.47-0.51,6.7-0.79c0.67-0.09,4.57-0.03,5.24,0.14 c0.13,0.03,0.26,0.06,0.39,0.07c0.73,0.07,1.07,0.49,1.25,1.18c1.21,4.72,2.45,9.43,3.68,14.15c1.29,4.94,2.58,9.87,3.86,14.81 c0.66,2.57,1.31,5.15,1.94,7.73c0.66,2.71,1.31,5.42,1.94,8.14c0.47,2.04,0.96,4.07,1.36,6.12c0.59,3.03,1,6.1,1.7,9.11 c1.11,4.81,2.36,9.58,3.62,14.36c0.23,0.88,0.61,1.81,1.19,2.48c0.55,0.64,0.95,1.32,0.78,2.04c-0.34,1.46,0.13,2.74,0.59,4.05 c0.08,0.24,0.06,0.51,0.09,0.77c0.23,2.7,0.14,5.49,2.24,7.64c0.13,0.13,0.19,0.33,0.31,0.54c-0.28,0.2-0.51,0.41-0.77,0.53 c-1.97,0.88-3.97,1.69-5.91,2.63c-2.15,1.05-4.34,1.83-6.79,1.63c-0.38-0.03-0.78,0.12-1.16,0.22c-1.85,0.51-3.67,1.13-5.54,1.53 c-4.12,0.88-8.26,1.71-12.41,2.45c-3.61,0.64-3.68,0.56-5.43-2.85c-2.01-3.92-2.85-8.2-3.96-12.4c-0.22-0.83-0.35-1.69-0.63-2.5 c-0.55-1.59-1.27-3.13-1.76-4.74c-0.75-2.44-1.36-4.92-2.06-7.37c-0.72-2.52-1.41-5.06-2.26-7.54c-0.54-1.58-0.7-3,0.56-4.3 c0.14-0.14,0.21-0.34,0.31-0.51c0.8-1.48,0.59-2.93-0.61-4.09c-0.48-0.46-0.96-0.93-1.5-1.32c-1.48-1.06-2.03-2.59-2.24-4.29 c-0.13-1.02-0.11-2.06-0.2-3.09c-0.08-0.99-0.05-2.03-0.35-2.96c-0.64-2-0.5-3.99,0.03-5.9c0.42-1.5-0.1-2.45-1.03-3.47 c-0.43-0.47-0.79-1.15-0.88-1.78c-0.57-3.84-1.07-7.69-1.55-11.54c-0.37-3-0.64-6.01-1.04-9 C157.72,428.3,157.31,427.35,157.03,426.38z"),n[21]=e.path("M221.95,555.26c-0.07,0-0.13,0-0.2,0c-0.69-0.33-1.56-1.1-2.05-0.91c-1.73,0.66-2.92-0.11-4.22-0.97 c-4.53-2.97-9.05-5.96-13.65-8.82c-1.91-1.19-3.51-2.58-4.75-4.46c-1.06-1.6-2.29-3.09-3.4-4.66c-0.24-0.34-0.39-0.84-0.37-1.25 c0.09-2.08,1.12-3.77,2.53-5.17c2.13-2.1,4.35-4.12,6.61-6.08c2.08-1.81,4.32-3.43,6.37-5.27c1.54-1.38,2.89-2.97,4.32-4.47 c0.13-0.14,0.34-0.39,0.3-0.48c-0.57-1.05,0.43-1.54,0.82-2.21c0.13-0.22,0.61-0.35,0.91-0.32c0.99,0.07,1.97,0.28,2.96,0.35 c1.65,0.13,3.33,0.12,4.71,1.24c2.68,2.18,5.37,4.34,8,6.57c0.67,0.57,1.24,1.3,1.69,2.06c0.52,0.88,0.87,1.84,2.41,1.19 c-0.31,0.45-0.46,0.66-0.64,0.94c0.69,0.67,1.33,1.31,2.11,2.07c0,0-0.12,0.37,0.02,0.56c0.72,0.99,0.19,1.82-0.25,2.66 c-0.98,1.84-2.07,3.62-2.96,5.5c-0.68,1.43-1.04,3.01-1.7,4.46c-2.18,4.82-4.4,9.62-7.43,13.99 C223.3,552.9,222.65,554.1,221.95,555.26z"),n[22]=e.path("M297.25,503.05c-0.07,0-0.13,0-0.2,0c-0.2-0.1-0.38-0.26-0.59-0.3c-2.02-0.37-3.83-1.21-5.61-2.25 c-1.36-0.8-2.86-1.53-4.39-1.82c-1.6-0.3-2.93-0.88-4.17-1.85c-0.5-0.39-1.09-0.64-1.61-1.01c-0.98-0.69-1.99-1.34-2.88-2.12 c-1.72-1.51-3.45-2.86-5.85-3.18c-1.07-0.14-2.08-0.76-3.13-1.11c-1.66-0.55-3.33-1.05-5-1.6c-0.61-0.2-1.3-0.34-1.79-0.73 c-2.65-2.11-5.24-4.31-7.88-6.43c-0.85-0.68-1.76-1.35-2.75-1.78c-2.67-1.14-3.9-3.41-3.17-6.22c0.16-0.61,0.39-1.2,0.65-1.77 c0.42-0.94,1.01-1.82,1.33-2.79c1.43-4.33,3.65-8.25,5.88-12.19c0.66-1.16,1.02-2.51,1.35-3.81c0.18-0.7,0.35-1.24,1.09-1.49 c0.3-0.1,0.76-0.32,0.79-0.54c0.22-1.42,1.45-1.89,2.35-2.67c0.2-0.17,0.26-0.49,0.39-0.74c0.07,0,0.13,0,0.2,0 c0.28,0.15,0.55,0.33,0.84,0.44c1.98,0.77,4.06,1.36,5.93,2.33c3.92,2.04,7.73,4.27,11.58,6.44c1.39,0.79,2.68,1.75,4.11,2.45 c2.8,1.38,5.76,2.45,8.48,3.96c3.95,2.19,7.77,4.63,11.6,7.02c2.31,1.44,4.53,3.01,6.82,4.49c0.85,0.55,1.77,0.98,2.66,1.46 c-0.01,0.1-0.02,0.21-0.03,0.31c-0.5,0.11-0.99,0.27-1.49,0.3c-1.15,0.07-1.64,0.56-1.66,1.73c-0.02,1-0.07,2-0.16,2.99 c-0.02,0.25-0.19,0.6-0.39,0.69c-2.37,1.02-3.48,3.04-4.41,5.28c-0.94,2.26-2.06,4.45-3.11,6.67c-0.93,1.98-3.06,3.25-3.35,5.62 c-0.01,0.08-0.15,0.13-0.2,0.21C298.73,500.4,297.99,501.73,297.25,503.05z"),n[23]=e.path("M361.06,417.99c0,0.2,0,0.4,0,0.6c-0.6,1.62-1.73,2.76-3.15,3.73c-5.03,3.45-9.69,7.36-14.09,11.6 c-0.25,0.24-0.53,0.45-0.65,0.55c-1.08-1-2.03-1.94-3.05-2.79c-1.72-1.44-3.44-2.88-5.24-4.22c-2.06-1.55-4.35-2.83-6.28-4.52 c-3.02-2.66-5.78-5.61-8.71-8.38c-1.92-1.82-3.76-3.71-5.09-5.99c-1.6-2.75-3.9-4.58-6.7-6.01c-2.14-1.1-4.24-2.19-6.63-2.6 c-0.19-0.03-0.36-0.14-0.53-0.2c0.1-0.94,0.15-1.83,0.29-2.71c0.56-3.53,1.35-6.99,3.21-10.1c0.48-0.8,0.94-1.62,1.28-2.48 c0.75-1.87,1.88-3.41,3.48-4.65c0.64-0.5,1.2-1.17,1.64-1.86c1.58-2.52,3.57-4.6,6.22-6c0.46-0.24,0.92-0.5,1.38-0.75 c0.27,0,0.53,0,0.8,0c0.63,0.36,1.27,0.7,1.89,1.08c0.39,0.24,0.8,0.49,1.12,0.81c2.32,2.37,4.6,4.79,6.93,7.15 c4.6,4.67,9.22,9.32,13.85,13.97c1.24,1.25,2.75,2.29,3.74,3.71c1.19,1.71,2.35,2.95,4.64,2.76c0.56-0.05,1.19,0.8,1.94,1.35 c-0.55,0.24-0.81,0.35-1.21,0.52c1.04,2.11,1.81,4.33,3.11,6.16C357.4,411.7,359.27,414.81,361.06,417.99z"),n[24]=e.path("M281.15,417.89c0-0.27,0-0.53,0-0.8c0.28-0.46,0.54-0.93,0.85-1.37c1.6-2.25,3.57-4.02,6.27-4.86 c0.47-0.15,0.9-0.43,1.33-0.67c1.56-0.88,3.07-1.84,4.67-2.63c2.86-1.42,5.76-2.75,8.65-4.1c1.38-0.64,2.78-1.23,4.13-1.82 c0.24,0.48,0.37,0.81,0.55,1.11c4.14,6.95,8.29,13.89,13.05,20.44c0.29,0.4,0.58,0.83,0.73,1.29c2.83,8.29,5.96,16.47,8.17,24.96 c0.19,0.74,0.03,1.06-0.58,1.42c-1.73,1-3.41,2.08-5.13,3.08c-3.36,1.94-6.73,3.87-10.13,5.76c-1.39,0.77-2.85,1.42-4.28,2.13 c-0.21,0.1-0.41,0.28-0.62,0.3c-1.47,0.09-2.93,0.15-4.27,0.21c-0.46,0.57-0.93,1.17-1.4,1.76c-0.27,0-0.53,0-0.8,0 c-0.26-0.5-0.54-0.99-0.78-1.51c-0.12-0.27-0.1-0.6-0.24-0.86c-1.07-2.02-2.2-4.01-3.25-6.05c-1.42-2.77-2.82-5.55-4.15-8.36 c-1.72-3.63-3.31-7.32-5.07-10.93c-0.66-1.36-0.93-2.74-1.12-4.2c-0.09-0.71-0.36-1.5-0.81-2.05c-1.83-2.24-3.31-4.65-4.19-7.43 C282.24,421.09,281.69,419.49,281.15,417.89z"),n[25]=e.path("M254.1,446.66c-0.6,0-1.2,0-1.8,0c-0.32-0.07-0.65-0.13-0.97-0.21c-1.92-0.5-3.89-0.87-5.76-1.54 c-4.28-1.53-8.14-3.9-11.99-6.27c-0.14-0.08-0.3-0.17-0.38-0.3c-0.84-1.29-1.67-2.59-2.5-3.89c0-0.13,0-0.27,0-0.4 c0.53-2.65,1.07-5.31,1.59-7.96c0.7-3.59,1.77-6.98,5.1-9.08c0.65-0.41,0.96-0.98,0.85-1.66c-0.28-1.76-0.53-3.54-1.05-5.23 c-0.46-1.53-0.41-3-0.16-4.5c0.58-3.61,2.05-6.79,4.67-9.39c0.21-0.21,0.46-0.56,0.43-0.81c-0.16-1.56-0.42-3.12-0.6-4.68 c-0.03-0.26,0.08-0.62,0.26-0.81c0.82-0.91,1.2-2.01,1.66-3.13c0.92-2.28,1.99-4.49,3.05-6.71c3.14-6.56,6.28-13.13,9.46-19.67 c1.11-2.27,2.39-4.46,4.54-5.96c0.07,0,0.13,0,0.2,0c0.34,0.07,0.67,0.16,1.02,0.2c1.18,0.15,2.41,0.13,3.54,0.46 c1.92,0.57,3.84,1.25,5.66,2.09c5.14,2.39,10.23,4.92,15.35,7.34c1.33,0.63,2.31,1.52,2.83,2.9c0,0.47,0,0.93,0,1.4 c-0.64,1.7-1.22,3.42-1.92,5.1c-1.27,3.03-2.66,6.02-3.91,9.07c-1.11,2.71-2.04,5.48-3.15,8.19c-2.65,6.46-5.37,12.89-8.02,19.34 c-1.07,2.61-1.97,5.29-3.04,7.91c-1.06,2.58-2.27,5.1-3.35,7.68c-1.54,3.67-2.8,7.46-4.77,10.94c-0.49,0.87-0.87,1.79-1.31,2.69 c-0.58,1.2-1.2,2.38-1.73,3.6C257.16,445.1,255.64,445.88,254.1,446.66z"),n[26]=e.path("M340.43,434.01c0.33,0,0.67,0,1,0c0.32,0.08,0.63,0.16,0.95,0.24c1.46,0.39,2.95,0.55,3.77,2.23 c0.52,1.06,1.45,2.02,2.4,2.75c3.73,2.86,7.39,5.77,10.29,9.5c1.18,1.52,2.95,2.62,3.39,4.68c0,0.2,0,0.4,0,0.6 c-0.38,0.36-0.83,0.67-1.14,1.08c-3.4,4.4-6.69,8.88-10.18,13.19c-4.67,5.77-9.38,11.53-14.33,17.06c-2.3,2.57-4.69,5.05-6.73,7.83 c-0.25,0.34-0.52,0.66-0.77,0.99c0.05-0.1,0.1-0.21,0.15-0.31c-1.9-1.77-4.04-3.34-5.66-5.34c-3.77-4.62-7.28-9.44-10.93-14.15 c-0.45-0.58-0.62-1.14-0.54-1.82c0.19-1.75,0.36-3.51,0.59-5.25c0.04-0.33,0.29-0.73,0.57-0.91c1.71-1.15,3.51-2.18,5.19-3.38 c1.45-1.04,2.88-2.15,4.15-3.39c2.62-2.57,5.12-5.24,7.67-7.88c0.23-0.24,0.48-0.48,0.63-0.76c2.07-3.95,4.16-7.88,6.16-11.86 C337.98,437.26,338.77,435.35,340.43,434.01z"),n[27]=e.path("M395.59,514.89c0,0.07,0,0.13,0,0.2c-0.11,0.16-0.24,0.32-0.33,0.49c-1.34,2.52-2.64,5.07-4.04,7.55 c-0.7,1.24-1.73,2.29-2.37,3.56c-1.26,2.49-2.34,5.07-3.53,7.59c-0.41,0.87-0.89,1.71-1.34,2.56c-0.23,0.44-0.52,0.53-0.97,0.24 c-0.58-0.36-1.2-0.66-1.79-0.98c-1.3,2.07-2.52,4.08-3.82,6.04c-0.81,1.22-1.64,2.44-2.62,3.52c-2.03,2.24-4.21,4.35-6.23,6.61 c-0.91,1.02-2.22,1.11-3.23,1.83c-1.41,1.01-3.04,1.22-4.72,1.14c-0.25-0.01-0.55-0.05-0.75-0.19c-1.58-1.1-3.3-2.05-4.66-3.38 c-2.79-2.72-5.41-5.6-8.01-8.5c-0.89-0.99-1.72-1.56-3.05-1.05c-0.76,0.29-0.96-0.23-1.1-0.85c-0.08-0.37-0.2-0.81-0.45-1.05 c-2.66-2.56-4.57-5.55-5.39-9.17c-0.1-0.44,0.02-1.08,0.28-1.44c3.28-4.41,6.62-8.77,9.9-13.18c0.55-0.74,0.78-1.72,1.35-2.43 c0.59-0.74,1.49-1.22,2.12-1.93c1.61-1.83,3.16-3.69,4.69-5.59c2.32-2.88,4.77-5.67,6.84-8.72c1.75-2.59,4.09-4.5,6.16-6.63 c0.8,0.4,1.49,0.66,2.09,1.05c1.61,1.05,3.16,2.18,4.77,3.23c2,1.32,4.05,2.56,6.04,3.9c0.62,0.42,1.25,0.96,1.62,1.59 c0.29,0.5,0.56,0.66,1.07,0.64c0.94-0.04,1.62,0.29,2.02,1.24c0.26,0.63,0.71,1.21,1.17,1.73c2.11,2.35,4.25,4.68,6.41,7.01 c0.84,0.91,1.98,1.63,1.75,3.13C395.42,514.72,395.54,514.81,395.59,514.89z"),n[28]=e.path("M243.77,525.16c0.87,0,1.73,0,2.6,0c0.9,0.22,1.78,0.5,2.69,0.64c2.52,0.38,5.05,0.7,7.58,1.05 c3.8,0.52,7.55,1.48,11.4,1.64c0.93,0.04,1.86,0.13,2.79,0.22c2.91,0.29,5.82,0.61,8.73,0.88c2.91,0.27,5.84,0.39,8.74,0.75 c4.68,0.58,9.35,1.28,14.02,1.95c2,0.29,3.99,0.69,5.99,0.91c1.55,0.17,3.14-0.03,4.67,0.23c3.99,0.66,7.95,1.5,11.93,2.24 c2.7,0.5,5.17,2.02,8.12,1.59c1.29-0.19,2.68,0.27,4.13,0.45c-0.05,0.68-0.1,1.3-0.13,1.92c-0.12,3.03-1.07,6.03-0.35,9.09 c0.06,0.25,0.03,0.54-0.03,0.79c-0.63,2.75-1.31,5.48-1.9,8.24c-0.63,2.95-1.2,5.92-1.75,8.89c-0.04,0.23,0.29,0.53,0.6,1.05 c-1.58,1.2-3.29,2.51-5.01,3.79c-1.17,0.87-2.48,1.13-3.94,1.06c-4.22-0.2-8.44-0.29-12.67-0.45c-0.59-0.02-1.2-0.11-1.76-0.3 c-0.37-0.12-0.82-0.4-0.96-0.72c-0.46-1.01-1.22-1.07-2.13-0.89c-0.32,0.06-0.68,0.15-0.98,0.08c-2.09-0.5-4.21-0.27-6.31-0.38 c-1.4-0.07-2.89-0.24-4.16-0.79c-1.2-0.52-2.34-0.79-3.63-0.81c-3.06-0.04-6.13-0.09-9.05-1.2c-0.16-0.06-0.42,0.02-0.59,0.11 c-1.96,1.07-2.47,1.02-4.1-0.42c-0.35-0.31-0.69-0.62-1.06-0.92c-0.17-0.14-0.38-0.3-0.59-0.33c-1.44-0.23-2.87-0.44-4.32-0.62 c-1.32-0.16-2.65-0.25-3.97-0.41c-2.27-0.28-4.05-1.42-5.44-3.2c-0.71-0.92-1.38-0.89-2.06-0.18c-0.21,0.22-0.41,0.46-0.66,0.6 c-0.43,0.24-0.91,0.59-1.36,0.57c-1.96-0.09-3.91-0.26-5.86-0.48c-2.94-0.33-5.87-0.7-8.8-1.12c-3.92-0.56-7.48-1.83-9.81-5.34 c0-1.13,0-2.27,0-3.4c0.06-0.19,0.14-0.37,0.17-0.57c0.42-2.68,0.89-5.36,1.22-8.05c0.33-2.69,0.53-5.4,0.79-8.1 c0.02-0.16,0.03-0.34,0.12-0.46c1.28-1.85,1.51-4,1.72-6.15c0.18-1.85,1.58-3.2,3.42-3.25 C242.47,525.37,243.12,525.24,243.77,525.16"),n[29]=e.path("M403.33,396.27c0.07,0,0.13,0,0.2,0c0.13,0.13,0.25,0.32,0.41,0.37c1.65,0.49,3.29,0.98,4.96,1.41 c3.55,0.91,6.55,2.7,8.93,5.51c0.18,0.21,0.28,0.55,0.27,0.83c-0.05,2.39-0.17,4.78-0.18,7.16c-0.01,0.85,0.37,1.71,0.32,2.55 c-0.17,2.84-0.59,5.63-2.21,8.08c-1.02,1.55-1.02,3.15-0.14,4.78c0.27,0.5,0.56,1.01,0.66,1.55c0.18,0.92,0.34,1.87,0.28,2.8 c-0.18,2.62-0.55,5.22-0.7,7.84c-0.05,0.99,0.22,2.03,0.5,3.01c0.31,1.11,0.48,2.13,0.03,3.27c-0.41,1.03-0.55,2.18-0.77,3.28 c-0.42,2.15-0.44,4.47-1.31,6.42c-1.34,2.99-1.61,6.08-1.88,9.22c-0.19,2.25-0.12,4.54-0.46,6.76c-0.66,4.43-1.51,8.84-2.32,13.25 c-0.29,1.6-0.35,3.16,0.17,4.72c0.05,0.15,0.06,0.36,0,0.51c-0.17,0.46-0.44,0.89-0.57,1.36c-0.49,1.79-0.91,3.6-1.42,5.39 c-0.08,0.27-0.42,0.6-0.68,0.65c-0.54,0.1-1.11,0.06-1.66,0.01c-1.91-0.18-3.83-0.37-5.73-0.61c-1.76-0.22-3.62-0.2-5.24-0.82 c-2.19-0.83-4.42-1.35-6.68-1.9c-3.35-0.82-6.62-1.96-9.94-2.92c-1.11-0.32-2.26-0.5-3.38-0.75c-0.21-0.05-0.55-0.06-0.61-0.19 c-0.44-1.01-1.37-1.81-1.23-3.08c0.29-2.77,0.34-5.58,0.82-8.32c0.79-4.52,1.83-8.99,2.78-13.48c0.95-4.51,1.59-9.04,1.07-13.67 c-0.13-1.18-0.12-2.41,0.02-3.59c0.39-3.06,0.93-6.11,1.34-9.17c0.57-4.28,1.14-8.55,1.57-12.85c0.31-3.1,0.41-6.23,0.58-9.35 c0.05-0.96-0.06-1.94,0.05-2.89c0.08-0.62,0.37-1.24,0.69-1.79c0.32-0.57,0.6-1.04,0.55-1.79c-0.17-2.46-0.14-4.92,1.21-7.16 c0.36-0.6,0.48-1.35,0.81-2.31c1.57-0.68,3.39-1.77,5.36-2.26c3.7-0.92,7.49-1.49,11.34-1.43 C401.86,396.69,402.6,396.41,403.33,396.27z"),n[30]=e.path("M289.1,348.59c0-1.67,0-3.33,0-5c0.26-1.35,0.52-2.7,0.8-4.13c1.33-0.14,2.75-0.29,4.16-0.43 c3.67-0.37,7.35-0.73,11.02-1.09c4-0.39,8-0.88,12.02-1.11c4.65-0.28,9.32-0.26,13.98-0.5c2.94-0.16,5.85-0.02,8.75,0.43 c0.65,0.1,1.34,0.24,1.97,0.13c1.57-0.27,3.09-0.12,4.42,0.69c1.57,0.95,3.08,1.93,4.9,2.33c0.97,0.21,1.91,0.56,2.85,0.87 c0.2,0.06,0.39,0.19,0.57,0.31c0.55,0.36,1.04,0.89,1.64,1.08c2.12,0.69,3.98,1.79,5.67,3.23c0.49,0.42,1.17,0.59,1.27,1.38 c0.1,0.77,0.65,1.05,1.35,1.24c4.35,1.19,8.69,2.44,13.04,3.63c3.07,0.84,5.97,1.94,8.47,4.01c1.46,1.21,3.08,2.21,4.64,3.3 c0.77,0.53,1.5,1.16,2.35,1.5c1.01,0.4,1.87,0.84,2.43,1.84c0.22,0.4,0.7,0.73,1.14,0.94c1.63,0.81,2.83,2.07,3.91,3.49 c0.33,0.43,0.39,0.75,0.17,1.24c-0.46,1.05-0.28,2.01,0.56,2.83c0.57,0.56,1.19,1.08,1.69,1.7c0.6,0.76,1.24,1.56,1.61,2.45 c0.57,1.37,0.2,2.8-0.55,3.98c-0.72,1.14-1.74,2.09-2.64,3.11c-0.28,0.32-0.59,0.79-0.94,0.85c-0.86,0.14-1.18,0.76-1.57,1.37 c-0.22,0.34-0.45,0.67-0.72,0.96c-4.41,4.73-8.68,9.62-14.44,12.83c-0.06,0.03-0.09,0.09-0.14,0.14c-0.07,0-0.13,0-0.2,0 c-0.25-0.19-0.49-0.4-0.76-0.56c-2.21-1.28-4.42-2.55-6.65-3.8c-1.47-0.83-2.98-1.59-4.45-2.42c-0.95-0.54-1.81-1.26-2.79-1.75 c-2.24-1.11-4.56-2.07-6.8-3.19c-3.21-1.61-6.4-3.25-9.55-4.97c-2.1-1.15-4.14-2.41-6.15-3.7c-1.29-0.82-2.14-2.35-4.01-2.2 c-0.46,0.04-1.02-0.45-1.45-0.79c-0.71-0.55-1.35-1.19-2.02-1.79c-0.17-0.15-0.35-0.32-0.55-0.4c-0.9-0.37-1.84-0.65-2.7-1.08 c-1.23-0.62-2.45-0.79-3.84-0.7c-2.2,0.15-4.41,0.41-6.61-0.29c-0.98-0.31-2.13-0.4-3.13-0.21c-3.93,0.76-7.88,0.71-11.84,0.52 c-3.95-0.2-7.9-0.46-11.85-0.7c-1.38-0.09-2.78-0.09-4.13-0.36c-0.84-0.17-1.62-0.52-2.48-0.18c-0.6,0.24-0.91-0.02-1.14-0.56 c-0.49-1.16-0.94-2.29-0.83-3.61c0.19-2.35,0.37-4.71,0.36-7.07c-0.01-2.62-0.2-5.25-0.36-7.87 C289.48,349.85,289.24,349.22,289.1,348.59z"),0),o=e.group();a<30;)n[++a].fill("#EF7000"),o.add(n[a]);var s=e.path("M177.16,173.36c0-0.13,0-0.27,0-0.4c0.22-0.39,0.41-0.81,0.68-1.17c0.18-0.24,0.45-0.55,0.7-0.58 c1.69-0.17,3.38-0.42,5.07-0.38c4.92,0.13,9.84,0.43,14.77,0.58c3.89,0.12,7.79,0.1,11.68,0.17c6.89,0.13,13.79,0.29,20.68,0.41 c1.19,0.02,2.38-0.22,3.56-0.17c1.79,0.08,3.57,0.43,5.36,0.47c4.62,0.09,9.25,0.08,13.88,0.11c0.37,0,0.73,0.04,1.1,0.05 c3.55,0.17,7.07,0.83,10.65,0.45c0.86-0.09,1.74-0.13,2.59-0.05c2.78,0.27,5.53,0.54,8.35,0.43c2.81-0.12,5.64,0.37,8.46,0.51 c4.65,0.23,9.31,0.38,13.96,0.6c7.01,0.33,14.03,0.73,21.04,1c4.66,0.18,9.33,0.16,13.99,0.22c1.59,0.02,3.18,0,4.91,0 c0.03,0.35,0.09,0.83,0.11,1.31c0.09,2.13,0.16,4.26,0.26,6.39c0.02,0.42,0.15,0.83,0.27,1.24c0.08,0.3,0.33,0.58,0.32,0.86 c-0.13,3.93-0.32,7.85-0.43,11.77c-0.07,2.53,0.03,5.07-0.08,7.6c-0.19,4.35-0.52,8.7-0.72,13.05c-0.2,4.42-0.3,8.85-0.46,13.28 c-0.03,0.77-0.1,1.53-0.16,2.29c-0.05,0.66-0.17,1.26-1.07,1.18c0.23,0.71,0.54,1.33,0.61,1.97c0.26,2.31,0.56,4.63,0.61,6.94 c0.1,4.63,0.1,9.26,0.03,13.9c-0.08,5.62-0.27,11.25-0.42,16.87c-0.01,0.27-0.05,0.53-0.07,0.8c-0.23,4.09-0.52,8.17-0.68,12.26 c-0.1,2.62,0.2,5.23,0.47,7.85c0.35,3.39,0.09,6.85,0.07,10.27c-0.02,2.65-0.12,5.31-0.14,7.96c-0.03,4.43,0.45,8.84-0.43,13.3 c-0.62,3.16-0.37,6.51-0.46,9.75c-0.16,6.17-0.42,12.35,0.24,18.55c0.38,3.52,0.42,7.15-0.26,10.78c-0.46,2.41,0.01,4.98,0.24,7.49 c0.35,3.93,0.12,7.92,0.14,11.89c0,0.75-0.31,1.62,0.66,2.08c0.1,0.05,0.12,0.3,0.13,0.46c0.16,2.48,0.07,4.94-0.8,7.29 c-0.27,0.73-0.18,1.25,0.24,1.83c0.22,0.3,0.46,0.69,0.46,1.04c-0.01,1.31-0.11,2.63-0.18,3.94c-0.35,6.56-0.27,13.11,0.24,19.66 c0.07,0.86,0.36,1.8,0.12,2.56c-0.55,1.74-0.1,3.43-0.12,5.14c-0.01,1.23,0.05,2.46-0.01,3.69c-0.1,2.27-0.31,4.55-0.4,6.82 c-0.08,1.86-0.09,3.73-0.09,5.59c0.01,3.56,0.11,7.13,0.06,10.69c-0.03,2.79-0.27,5.58-0.33,8.37c-0.04,1.86,0.08,3.73,0.08,5.59 c0,1.43-0.13,2.85-0.1,4.28c0.07,3.95,0.2,7.91,0.3,11.75c-0.87,0.51-1.5,1.07-2.23,1.25c-1.6,0.4-3.18,1.45-4.93,0.45 c-0.16-0.09-0.39-0.07-0.59-0.07c-4.7,0.02-9.4,0.05-14.09,0.07c-0.33,0-0.81-0.1-0.97,0.08c-0.82,0.92-1.83,0.54-2.79,0.54 c-0.23,0-0.49-0.03-0.68,0.06c-2.05,1.04-4.26,1.17-6.5,1.11c-1.66-0.04-3.32-0.14-4.98-0.21c-3.06-0.13-6.12-0.33-9.18-0.35 c-2.03-0.01-4.05,0.32-6.08,0.35c-4.23,0.06-8.45,0.01-12.68,0.03c-0.66,0-1.33,0.11-1.99,0.11c-2.22,0-4.44-0.02-6.66-0.05 c-3.06-0.03-6.11-0.08-9.17-0.09c-2.49-0.01-4.99,0.05-7.48,0.05c-2.09,0-4.18-0.06-6.27-0.03c-2.62,0.04-5.23,0.16-7.85,0.22 c-2.93,0.07-5.86,0.11-8.79,0.18c-2.15,0.05-4.31,0.13-6.46,0.2c-0.47,0.01-0.93,0.03-1.4,0.05c-3.31,0.15-6.56,0.83-9.91,0.63 c-2.97-0.17-5.98,0.19-8.97,0.36c-1.01,0.06-2.02,0.26-3.03,0.4c-2.6,0-5.2,0-7.8,0c-0.39-0.7-1.01-1.36-1.1-2.1 c-0.13-0.96,0.23-1.97,0.26-2.97c0.06-2.25,0.09-4.51,0.05-6.76c-0.02-0.88-0.38-1.76-0.38-2.65c0-1.79,0.2-3.58,0.21-5.38 c0.03-4.86,0-9.73,0.01-14.59c0.01-5.8,0.09-11.59,0.03-17.39c-0.03-3.36-0.4-6.72-0.38-10.08c0.02-5.22,0.33-10.44,0.32-15.66 c0-6.62-0.21-13.24-0.31-19.86c-0.05-3.75-0.07-7.51-0.09-11.26c-0.02-3.86-0.01-7.72-0.06-11.58c-0.01-0.78-0.24-1.57-0.41-2.35 c-0.15-0.68-0.53-1.33-0.54-2.01c-0.05-2.53,0.05-5.05,0.01-7.58c-0.03-1.96-0.17-3.92-0.29-5.87c-0.26-4.28-0.89-8.55-0.54-12.86 c0.19-2.29,0.47-4.58,0.42-6.87c-0.06-3.19-0.34-6.38-0.61-9.56c-0.53-6.24-0.87-12.49-0.74-18.76c0.04-2,0.06-4,0.19-5.99 c0.14-2.11,0.64-4.2,0.07-6.34c-0.23-0.87,0.42-1.28,1.41-1.27c-0.63-4.36-1.36-8.63-1.84-12.93c-0.47-4.23-0.82-8.48-0.98-12.73 c-0.17-4.33-0.01-8.66-0.08-12.99c-0.03-1.76,0.04-3.49,0.17-5.24c0.31-4.4,0.69-8.8-0.25-13.23c-0.63-2.97-0.76-6.08-0.86-9.13 c-0.18-5.67-0.19-11.36-0.22-17.03c-0.01-2.6,0.12-5.19,0.19-7.79c0.01-0.55,0.09-1.11,0.01-1.65c-0.24-1.57-0.54-3.14-0.82-4.71 c-0.59-3.31,0.19-6.65-0.34-9.99c-0.41-2.58-0.17-5.25-0.28-7.88C177.52,175.31,177.3,174.34,177.16,173.36z"),r=e.path("M443.73,716.1c0,0.13,0,0.27,0,0.4c-1.41,0.95-3.01,1.17-4.66,1.17c-1.73,0-3.46,0-5.19,0.06 c-2.36,0.08-4.72,0.23-7.08,0.32c-1.86,0.07-3.73,0.13-5.59,0.17c-2.09,0.03-4.2,0.15-6.28,0.01c-1.7-0.12-3.38-0.67-5.08-0.83 c-2.24-0.21-4.56-0.71-6.73,0.15c-1.94,0.76-3.91,0.62-5.88,0.7c-1.59,0.06-3.19,0.1-4.78,0.18c-0.93,0.04-1.86,0.23-2.78,0.18 c-1.78-0.09-3.54-0.41-5.32-0.42c-4.43-0.04-8.86,0.04-13.29,0.08c-2.5,0.02-4.99,0.09-7.49,0.06c-1.35-0.02-2.69-0.27-4.03-0.28 c-0.88,0-1.77,0.33-2.65,0.35c-3.09,0.08-6.19,0.13-9.28,0.09c-1.41-0.02-2.81-0.42-4.22-0.42c-4.68,0.02-9.34,0.64-14.04,0.41 c-4.22-0.21-8.44-0.15-12.66-0.25c-4.23-0.1-8.45-0.27-12.68-0.35c-0.7-0.01-1.05-0.24-1.18-0.88c-0.24-1.23-0.46-2.47-0.69-3.7 c0-1.47,0-2.93,0-4.4c0.1-0.92,0.25-1.84,0.3-2.77c0.21-3.79,0.39-7.57,0.57-11.36c0.04-0.82-0.03-1.65,0.03-2.46 c0.08-1.02,0.31-2.03,0.37-3.05c0.12-1.89,0.17-3.79,0.23-5.68c0.03-0.83,0.06-1.66,0.03-2.49c-0.09-2.12-0.23-4.23-0.33-6.35 c-0.22-4.49-0.4-8.98-0.66-13.46c-0.04-0.73-0.36-1.45-0.54-2.17c0-0.8,0-1.6,0-2.4c0.07-0.39,0.2-0.78,0.21-1.17 c0.09-2.96,0.15-5.92,0.22-8.88c0.03-1.36,0.07-2.72,0.11-4.09c0.01-0.59-0.02-1.19,0.05-1.78c0.17-1.42,0.53-2.82,0.56-4.24 c0.24-11.42,0.4-22.85,0.64-34.28c0.19-9.11,0.46-18.22,0.71-27.33c0.08-2.76,0.28-5.52,0.3-8.28c0.01-1.39-0.37-2.77-0.35-4.16 c0.09-7.39,0.23-14.78,0.4-22.17c0.08-3.32,0.27-6.65,0.39-9.97c0.03-0.79-0.01-1.59-0.05-2.38c-0.06-1.38-0.21-2.76-0.21-4.14 c-0.02-2.92,0.06-5.85,0.05-8.77c-0.01-2.3-0.12-4.59-0.11-6.89c0.02-3.4,0.14-6.79,0.15-10.19c0.01-2.83-0.07-5.66-0.11-8.49 c-0.01-0.75,0.53-1.63-0.5-2.16c-0.08-0.04-0.04-0.31-0.04-0.48c0.03-4.5,0.03-8.99,0.09-13.49c0.09-6.75,0.28-13.5,0.3-20.24 c0.01-3.52-0.26-7.04-0.42-10.56c-0.11-2.49-0.25-4.99-0.37-7.48c-0.08-1.82-0.09-3.65-0.24-5.46c-0.27-3.19-0.63-6.37-0.07-9.57 c0.12-0.67,0.31-0.97,1.07-0.94c2.43,0.12,4.86,0.23,7.29,0.22c5.16-0.02,10.32-0.19,15.49-0.16c4.49,0.02,8.98,0.27,13.48,0.34 c1.31,0.02,2.63-0.26,3.95-0.38c0.79-0.08,1.59-0.17,2.38-0.17c2.43,0,4.86,0.01,7.28,0.07c0.69,0.02,1.37,0.23,1.78,0.31 c1.02-0.06,1.82-0.12,2.62-0.14c4.55-0.11,9.11-0.18,13.66-0.38c1.85-0.08,3.71-0.21,5.59-0.14c5.05,0.18,10.12-0.06,15.18-0.11 c1.06-0.01,2.13,0.11,3.19,0.08c2.33-0.07,4.66-0.17,6.98-0.32c0.71-0.04,1.41-0.27,2.12-0.41c0.13,0,0.27,0,0.4,0 c0.51,0.52,1,1.07,1.54,1.55c0.25,0.22,0.62,0.42,0.93,0.4c0.91-0.04,1.82-0.25,2.74-0.27c3.51-0.07,7.01-0.05,10.5-0.56 c0.77-0.11,1.58,0.13,2.37,0.09c1.84-0.08,3.79,0.72,5.48-0.66c0.11-0.09,0.31-0.11,0.47-0.11c2.07-0.01,4.13-0.07,6.2,0.01 c1.57,0.07,2.32,1,2.35,2.54c0.02,0.86,0.18,1.72,0.2,2.58c0.17,5.82,0.32,11.64,0.44,17.45c0,0.19-0.3,0.44-0.52,0.58 c-0.2,0.13-0.46,0.16-0.5,0.17c0.12,0.58,0.3,1.02,0.3,1.46c-0.01,2.16-0.1,4.32-0.1,6.49c-0.01,5.29,0.01,10.58,0.03,15.88 c0,0.6-0.23,0.95-0.72,1.3c-0.3,0.21-0.56,0.73-0.55,1.11c0.02,1.96,0.14,3.92,0.22,5.88c0.21,5.63,0.42,11.25,0.63,16.88 c0.02,0.66,0.01,1.31,0.76,1.27c0,4.87,0.16,9.67-0.09,14.45c-0.08,1.55-0.35,3.13-0.35,4.7c0.05,11.36,0.11,22.72,0.18,34.08 c0.01,1.65,0.28,3.3,0.18,4.94c-0.15,2.51-0.22,4.98,0.54,7.42c0.32,1.04,0.18,2.03-0.37,2.98c-0.11,0.19-0.23,0.4-0.24,0.6 c-0.03,1.52-0.03,3.05-0.05,4.57c-0.09,6.42-0.16,12.83,0.89,19.22c0.44,2.66,0.27,5.43,0.35,8.15c0.07,2.21-0.48,4.5,0.65,6.57 c0.62,1.14,0.3,2.01-0.35,2.93c-0.16,0.23-0.34,0.52-0.34,0.78c0.02,1.93,0.1,3.85,0.12,5.78c0.01,1.26,0.1,2.54-0.1,3.78 c-0.62,3.74-0.54,7.5-0.3,11.25c0.22,3.38,0.65,6.74,0.84,10.11c0.1,1.75-0.18,3.52-0.19,5.27c-0.04,5.14-0.09,10.28,0.19,15.43 c0.35,6.61,0.47,13.24,0.57,19.87c0.05,3.16-0.34,6.33-0.25,9.48c0.1,3.78,0.5,7.55,0.77,11.33c0.12,1.72-0.01,3.51,0.41,5.15 c0.63,2.49,0.76,4.98,0.72,7.51c-0.02,1.3-0.09,2.61,0.05,3.9C443.09,713.53,443.46,714.81,443.73,716.1z"),l=e.path("M264.16,553.72c-0.07,0-0.13,0-0.2,0c-0.23-0.3-0.54-0.56-0.69-0.89c-3.11-6.5-6.03-13.09-9.35-19.49 c-3.42-6.59-6.4-13.37-9.33-20.18c-1.85-4.31-3.67-8.63-6.33-12.53c-0.69-1.01-1.28-2.11-1.79-3.22 c-3.48-7.51-6.81-15.08-10.81-22.34c-3.94-7.13-7.68-14.37-11.46-21.58c-2.15-4.09-4.24-8.22-6.29-12.36 c-2.81-5.68-5.55-11.39-8.35-17.08c-1.01-2.06-2.16-4.05-3.17-6.11c-1.2-2.45-2.27-4.96-3.46-7.41c-1.16-2.41-2.97-4.48-3.72-7.11 c-0.05-0.19-0.19-0.35-0.29-0.53c-1.6-2.95-3.21-5.89-4.78-8.86c-1.03-1.94-2.02-3.9-3.01-5.85c-1.04-2.05-2.13-4.07-3.09-6.15 c-2.56-5.55-4.6-11.31-7.74-16.62c-3.23-5.46-6.01-11.19-8.96-16.81c-2.29-4.36-4.54-8.73-6.8-13.1c-1.76-3.39-3.46-6.82-5.3-10.17 c-2.29-4.17-4.72-8.25-7.03-12.41c-0.61-1.09-0.88-2.37-1.46-3.48c-2-3.87-4.06-7.7-6.1-11.55c-0.31-0.59-0.66-1.16-0.98-1.74 c-1.5-2.71-3.23-5.31-4.45-8.14c-2.28-5.32-5.19-10.27-8.17-15.19c-1.03-1.7-2.18-3.32-3.28-4.97c0.66,0.1,1.31,0.28,1.97,0.28 c0.72,0,1.22,0.27,1.76,0.74c0.44,0.38,1.11,0.67,1.7,0.7c2.68,0.13,5.37,0.16,8.06,0.23c5.09,0.13,10.19,0.28,15.28,0.37 c1.56,0.03,3.14-0.21,4.68-0.09c3.17,0.25,6.32,0.64,9.52,0.53c3.36-0.12,6.72,0,10.08-0.05c2.16-0.03,4.31-0.29,6.46-0.26 c2.33,0.04,4.65,0.4,6.98,0.43c5.29,0.06,10.59,0.03,15.88-0.02c3.16-0.03,6.31-0.24,9.47-0.29c1.93-0.03,3.86,0.11,5.79,0.16 c0.33,0.01,0.65-0.06,0.98-0.1c1.37-0.19,2.75-0.58,4.12-0.56c15.32,0.25,30.64,0.57,45.97,0.86c3.6,0.07,7.21-0.01,10.79,0.25 c3.51,0.25,7.09-0.52,10.53,0.76c0.69,0.26,1.52,0.13,2.28,0.17c7.35,0.39,14.7,0.78,22.06,1.14c1.14,0.06,2.28,0.01,3.46,0.01 c-0.1-0.45-0.2-0.86-0.3-1.27c0.94,0,1.84-0.06,2.72,0.02c1,0.09,2,0.52,2.96,0.41c2.43-0.27,4.84-0.24,7.27,0.01 c1.65,0.17,3.32,0.28,4.98,0.27c1.18-0.01,2.36-0.37,3.54-0.4c2.23-0.05,4.46-0.06,6.68,0.09c3.04,0.22,6.08,0.47,9.14,0.33 c2.33-0.11,4.66-0.01,6.99-0.07c2.32-0.06,4.65-0.3,6.97-0.28c3.92,0.04,7.83,0.34,11.75,0.32c4.73-0.02,9.45-0.25,14.18-0.42 c1.92-0.07,3.84-0.19,5.8-0.29c0.22,0.68,0.46,1.4,0.69,2.12c0,0.33,0,0.67,0,1c-0.25,0.41-0.59,0.8-0.74,1.25 c-1.57,4.84-4.48,9.08-6.18,13.88c-1.3,3.68-3.21,7.15-4.86,10.71c-0.29,0.63-0.6,1.25-0.93,1.95c-0.23-0.31-0.41-0.54-0.63-0.84 c-0.26,0.54-0.48,0.99-0.7,1.44c-5.04,10.54-10.08,21.07-15.13,31.6c-0.33,0.7-0.82,1.32-1.16,2.02c-0.27,0.56-0.38,1.2-0.65,1.77 c-1.32,2.8-2.63,5.6-4,8.37c-2.64,5.36-5.34,10.69-7.98,16.05c-1.25,2.53-2.48,5.07-3.61,7.65c-0.71,1.6-1.21,3.29-1.86,4.93 c-0.12,0.29-0.44,0.69-0.7,0.71c-1.03,0.09-1.19,0.75-1.27,1.57c-0.1,0.99-0.29,1.97-0.44,2.95c-0.12,0.83-0.59,1.22-1.44,1.33 c-0.39,0.05-0.94,0.33-1.09,0.65c-1.33,2.93-2.61,5.89-3.87,8.86c-1.85,4.37-3.65,8.77-5.54,13.12c-0.4,0.93-1.12,1.72-1.67,2.58 c-0.2,0.3-0.38,0.62-0.53,0.94c-0.42,0.9-0.79,1.82-1.22,2.72c-0.66,1.38-1.35,2.74-2.02,4.11c-0.47,0.95-0.91,1.92-1.42,2.85 c-0.48,0.89-1.13,1.71-1.53,2.63c-0.7,1.64-1.13,3.41-1.93,5c-1.58,3.14-3.35,6.18-5.02,9.28c-0.47,0.88-0.79,1.84-1.25,2.72 c-1.65,3.15-3.33,6.28-4.99,9.43c-0.17,0.32-0.32,0.65-0.5,1.02c-0.18-0.27-0.32-0.48-0.56-0.83c-0.47,1.33-0.83,2.54-1.32,3.68 c-1.2,2.82-2.47,5.62-3.71,8.42c-5.35,12.13-10.7,24.26-16.02,36.4c-0.34,0.77-0.28,1.71-0.66,2.45c-1.62,3.14-3.13,6.3-3.98,9.75 c-0.19,0.79-0.63,1.54-1.04,2.25c-0.67,1.19-1.5,2.29-2.11,3.5c-3.25,6.45-6.5,12.89-9.65,19.39c-2.05,4.23-4.06,8.45-6.9,12.23 c-0.59,0.79-1.01,1.78-1.27,2.74C266.34,550.25,265.33,552.02,264.16,553.72z"),c=e.path("M373.58,621.93c0.37-1.69,0.37-3.37-0.44-5.01c-0.22-0.44-0.15-1.04-0.18-1.56 c-0.26-5.51-0.56-11.02-0.73-16.53c-0.04-1.48,0.34-2.98,0.52-4.47c0.08-0.72,0.16-1.45,0.17-2.17c0.05-3.19-0.01-6.39,0.18-9.57 c0.05-0.9,0.68-1.87,1.28-2.62c0.87-1.09,1.18-2.17,0.79-3.51c-0.48-1.65-0.2-3.32,0.37-4.87c0.99-2.68,2.16-5.28,3.24-7.93 c2.15-5.27,5.38-9.93,8.31-14.77c2.83-4.67,6.78-8.34,10.49-12.25c5.68-5.98,12.35-10.71,18.96-15.54c3.28-2.4,6.54-4.83,10.13-6.73 c2.94-1.55,6.02-2.84,9.03-4.26c1.26-0.59,2.49-1.28,3.78-1.8c1.46-0.6,2.97-1.11,4.48-1.57c2.99-0.91,5.99-1.78,9-2.63 c2.62-0.75,5.3-1.33,7.88-2.21c2.9-0.98,5.29-2.78,6.99-5.37c0.27-0.41,0.39-0.99,0.37-1.49c-0.08-2.66-0.23-5.32-0.35-7.67 c-0.85-0.77-1.53-1.28-2.06-1.91c-0.77-0.92-1.46-1.9-2.12-2.91c-1.25-1.92-2.86-2.78-5.24-2.38c-2.26,0.38-4.43,0.93-6.37,2.15 c-2.75,1.73-5.46,3.53-8.19,5.29c-0.56,0.36-1.11,0.86-1.72,0.98c-1.86,0.36-3.22,1.54-4.69,2.55c-2.41,1.66-4.88,3.24-7.16,5.06 c-4.01,3.19-8.5,5.66-12.65,8.63c-1.03,0.73-2.09,1.42-3.15,2.1c-1.87,1.19-3.43,2.68-4.84,4.39c-0.65,0.78-1.46,1.57-2.73,1.32 c-0.27-0.05-0.63,0.18-0.9,0.36c-1.84,1.3-3.67,2.63-5.51,3.95c-0.43,0.31-0.85,0.71-1.34,0.84c-1.64,0.43-2.81,1.47-3.83,2.73 c-0.54,0.66-1.06,1.11-2.03,0.88c-0.45-0.11-1.04,0.14-1.5,0.37c-0.71,0.35-1.38,0.81-2.04,1.26c-2.3,1.58-4.65,3.03-7.24,4.18 c-2.59,1.16-4.9,2.94-7.36,4.39c-2.92,1.72-5.88,3.37-8.81,5.07c-1.15,0.67-2.24,1.45-3.41,2.08c-3.81,2.04-7.66,4.02-11.47,6.06 c-2.28,1.22-4.49,2.55-6.78,3.75c-0.67,0.35-1.49,0.52-2.25,0.56c-0.43,0.02-1.03-0.28-1.29-0.63c-1.31-1.75-2.72-3.46-3.74-5.38 c-2.06-3.87-3.87-7.87-5.84-11.79c-0.92-1.84-1.83-3.7-2.98-5.39c-1.51-2.24-2.16-4.83-3.26-7.22c-1.41-3.08-3.14-6.01-4.74-9 c-1.89-0.91-1.63-2.84-2.21-4.41c-1.12-3.05-2.53-6-3.81-9c-1.01-2.38-1.95-4.79-3.05-7.13c-0.33-0.7-1.08-1.2-1.76-1.93 c0.06-0.28,0.4-0.9,0.24-1.36c-0.57-1.62-1.31-3.19-1.98-4.78c-1.72-4.03-4.01-7.82-4.87-12.2c-0.18-0.89-0.69-1.73-1.16-2.53 c-1.09-1.85-1.84-3.8-2.34-5.9c-0.49-2.06-1.34-4.03-2.04-6.04c-0.28-0.82-0.64-1.61-0.85-2.45c-0.73-2.96-1.4-5.93-2.11-8.9 c-0.18-0.77-0.42-1.53-0.62-2.3c-0.25-0.96-0.58-1.92-0.73-2.9c-0.48-3.09-0.94-6.17-1.3-9.27c-0.3-2.57-0.64-5.17-0.58-7.75 c0.06-2.63,0.58-5.25,0.9-7.87c0.03-0.26,0.17-0.53,0.14-0.78c-0.36-3.16,1.01-5.95,2.03-8.77c1.35-3.74,2.55-7.61,4.97-10.85 c2.66-3.55,4.92-7.44,8.7-10.08c1.45-1.01,2.58-2.47,3.91-3.67c0.63-0.58,1.36-1.06,2.06-1.55c1.25-0.88,2.54-1.7,3.75-2.61 c3.52-2.64,7.22-4.9,11.32-6.59c3.49-1.43,6.8-3.31,10.2-4.95c4.31-2.08,8.65-4.11,12.97-6.17c1.49-0.71,2.97-1.47,4.45-2.2 c0.18-0.09,0.36-0.23,0.54-0.24c3.46-0.28,6.17-2.33,9.11-3.86c0.87-0.46,1.84-0.73,2.75-1.12c2.02-0.85,4.04-1.7,6.06-2.56 c0.37-0.16,0.71-0.37,1.09-0.5c2.61-0.89,4.42-2.75,6.32-4.66c1.99-2,2.61-4.45,3.12-6.95c0.84-4.16-1.27-8.64-5.26-10.98 c-0.86-0.5-1.71-1.02-2.6-1.47c-1.32-0.66-2.7-1.16-4.22-1.01c-0.33,0.03-0.68,0.08-1,0.02c-4.04-0.76-6.51,1.67-8.57,4.49 c-1.75,2.4-3.08,5.1-4.64,7.65c-0.45,0.74-1.05,1.38-1.52,2.1c-0.97,1.5-2.06,2.96-2.81,4.57c-1.15,2.47-2.93,4.28-5.19,5.64 c-2.45,1.47-4.9,3.01-7.5,4.16c-5.17,2.29-10.59,3.86-16.21,4.67c-2.24,0.33-4.43,0.96-6.67,1.22c-2.84,0.32-5.7,0.48-8.56,0.56 c-5.05,0.14-10.1,0.22-15.16,0.24c-3.52,0.01-7.05-0.13-10.57-0.2c-0.26-0.01-0.53-0.05-0.79-0.02c-4.64,0.41-9.25-0.38-13.88-0.4 c-1.93-0.01-3.87-0.35-5.77-0.19c-4.76,0.38-9.42-0.41-14.25-0.87c-0.17-0.59-0.42-1.14-0.47-1.7c-0.26-2.69-0.34-5.35,0.16-8.07 c0.51-2.8,0.67-5.69,0.63-8.54c-0.03-3.15,0.46-6.23,0.77-9.34c0.3-2.98,0.53-5.96,0.86-8.93c0.33-2.95,0.74-5.9,1.1-8.84 c0.39-3.17,0.75-6.33,1.15-9.5c0.19-1.5,0.06-3.03,0.79-4.48c0.59-1.18-0.11-2.18-1.23-2.89c2.55-2.36,2.39-5.54,2.69-8.38 c0.27-2.62,1.17-5.04,1.6-7.59c0.5-2.92,1.51-5.74,2.19-8.63c1.17-4.99,2.52-9.9,4.68-14.59c1.44-3.13,2.33-6.5,3.5-9.76 c0.65-1.82,1.29-3.64,2.04-5.42c1.41-3.37,3.02-6.66,4.31-10.07c1.83-4.83,4.86-8.99,7.29-13.48c1.33-2.45,2.77-4.83,4.17-7.24 c0.19-0.33,0.4-0.83,0.68-0.89c1.14-0.27,1.46-1.21,2.01-2.04c0.64-0.97,1.61-1.72,2.26-2.68c3.99-5.95,9.25-10.77,14.26-15.78 c3.08-3.08,6.81-5.5,10.23-8.22c0.75-0.6,1.46-1.25,2.02-2.18c0.52-0.03,1.04-0.08,1.56-0.08c4.87,0,9.73,0.03,14.6,0.02 c3.85,0,5.7,1.59,6.4,5.64c-0.26,0.24-0.52,0.63-0.86,0.74c-2.26,0.75-3.82,2.57-5.79,3.75c-3.43,2.06-6.29,4.86-9.18,7.61 c-2.94,2.8-5.96,5.51-8.48,8.74c-2.16,2.78-4.56,5.38-6.72,8.16c-2.76,3.56-5.41,7.21-8.07,10.85c-2.3,3.16-4.78,6.22-6.75,9.57 c-2.04,3.47-4.81,6.56-5.9,10.58c-0.28,1.01-0.86,1.94-1.36,2.88c-3.33,6.34-5.3,13.17-7.34,19.98c-0.78,2.61-1.49,5.25-2.16,7.89 c-1.31,5.08-2.6,10.17-3.84,15.27c-0.49,2-1.14,4.03-1.15,6.05c-0.01,2.61-0.66,4.98-1.59,7.33c-0.07,0.18-0.13,0.39-0.11,0.58 c0.31,2.92-0.89,5.63-1.17,8.47c-0.61,6.14-1.21,12.28-1.75,18.43c-0.28,3.18-0.42,6.37-0.61,9.56c-0.02,0.39,0,0.79,0,1.27 c0.65,0.12,1.22,0.32,1.79,0.33c2.57,0.05,5.15,0,7.72,0.08c0.87,0.03,1.73,0.44,2.59,0.45c4.53,0.04,9.06-0.05,13.59,0.02 c3.32,0.05,6.64,0.44,9.95,0.35c4.83-0.13,9.65-0.54,14.47-0.88c1.71-0.12,3.41-0.37,5.11-0.61c3.23-0.46,6.44-1.11,9.38-2.53 c4.7-2.27,8.8-5.32,11.21-10.17c0.74-1.48,1.47-2.97,2.24-4.44c0.21-0.4,0.55-0.74,0.85-1.09c0.3-0.35,0.73-0.64,0.92-1.04 c1.63-3.33,4.22-5.87,6.65-8.6c2.39-2.69,5.13-4.63,8.41-5.83c1.85-0.68,3.84-1.06,5.8-1.37c5.12-0.81,10.16-0.53,15.04,1.43 c1.83,0.74,3.7,1.38,5.53,2.13c2.98,1.22,5.3,3.32,7.26,5.79c1.56,1.97,3.08,4.02,4.33,6.19c0.85,1.47,1.3,3.2,1.77,4.86 c1.41,4.99,1.81,10.13,1.36,15.25c-0.51,5.79-3.38,10.47-8.11,13.82c-5.58,3.96-11.38,7.62-17.68,10.37 c-2.55,1.11-5.19,2.04-7.74,3.16c-2.81,1.23-5.55,2.58-8.34,3.85c-3.57,1.63-7.15,3.24-10.72,4.85c-1.63,0.74-3.28,1.45-4.91,2.21 c-4.4,2.06-8.83,4.05-13.16,6.24c-2.72,1.37-5.37,2.92-7.88,4.63c-1.91,1.29-3.99,2.43-5.44,4.32c-0.72,0.94-1.4,1.91-2.13,2.83 c-0.45,0.57-0.88,1.25-1.48,1.6c-1.74,1.01-2.51,2.69-3.31,4.38c-0.4,0.84-0.76,1.71-1.25,2.5c-2.44,3.96-3.17,8.43-3.94,12.9 c-0.29,1.69-0.74,3.35-0.91,5.05c-0.12,1.17,0.09,2.38,0.19,3.57c0.53,6.18,1.82,12.19,3.33,18.23c2.19,8.76,5.52,17.07,8.97,25.34 c1.53,3.67,3.5,7.16,5.28,10.73c0.15,0.3,0.33,0.58,0.47,0.88c2.61,5.89,5.6,11.6,8.47,17.36c1.42,2.85,3.1,5.58,4.63,8.37 c0.7,1.28,1.3,2.62,2,3.9c1.09,1.98,2.24,3.92,3.34,5.89c1.51,2.73,2.96,5.49,4.5,8.21c0.45,0.8,1.02,1.56,1.67,2.2 c0.89,0.86,1.88,0.37,2.75-0.15c1.08-0.65,2.09-1.43,3.18-2.07c3.56-2.09,7.14-4.14,10.7-6.22c2.34-1.37,4.66-2.79,7.02-4.13 c1.96-1.11,4.01-2.09,5.95-3.24c0.76-0.45,1.35-1.2,1.91-1.72c1.11-0.59,2.16-1.09,3.15-1.69c5.8-3.53,11.61-7.05,17.37-10.66 c2.01-1.26,3.88-2.75,5.81-4.14c1.83-1.32,3.65-2.68,5.5-3.98c1.9-1.34,3.85-2.61,5.75-3.95c1.29-0.91,2.34-2.09,4-2.51 c0.81-0.2,1.43-1.13,2.14-1.72c1.17-0.97,2.32-1.96,3.54-2.87c2.07-1.55,4.16-3.07,6.27-4.56c1.03-0.73,2.13-1.34,3.17-2.05 c0.7-0.48,1.42-0.97,2-1.58c0.92-0.97,1.72-2.01,3.25-2.05c0.41-0.01,0.82-0.4,1.21-0.65c2.39-1.57,4.64-3.41,7.18-4.66 c3.56-1.74,7.36-2.6,11.41-1.62c3.83,0.92,6.95,2.95,9.73,5.62c0.96,0.92,2,1.76,2.94,2.71c0.65,0.66,1.29,1.37,1.73,2.17 c1.6,2.92,3.11,5.88,4.65,8.83c0.15,0.29,0.46,0.64,0.4,0.88c-0.51,1.96,0.87,3.28,1.7,4.69c0.57,0.97,0.9,1.83,0.88,2.93 c-0.04,3.73-0.17,7.47,0.05,11.19c0.13,2.14-0.42,4.13-1.13,5.93c-1.8,4.61-4.88,8.17-9.94,9.55c-0.89,0.24-1.71,0.77-2.6,1.03 c-4.07,1.2-8.14,2.39-12.23,3.51c-5.39,1.48-10.79,2.94-15.93,5.22c-1.19,0.53-2.45,0.92-3.69,1.34c-5.99,2.03-11.3,5.32-16.45,8.89 c-2.84,1.97-5.62,4.05-8.37,6.15c-0.71,0.55-1.23,1.36-1.82,2.06c-0.21,0.25-0.32,0.6-0.56,0.8c-5.01,4.13-9.28,8.94-12.86,14.33 c-1.8,2.71-3.45,5.55-4.85,8.48c-1.01,2.13-1.49,4.51-2.21,6.78c-0.22,0.69-0.48,1.37-0.65,2.07c-0.55,2.33-1.15,4.65-1.56,7 c-0.38,2.22-0.54,4.49-0.8,6.73c-0.02,0.13-0.04,0.26-0.04,0.4c-0.25,4.3-0.6,8.6-0.72,12.9c-0.08,2.72,0.18,5.45,0.3,8.17 c0.09,1.99,0.07,3.99,0.31,5.96c0.36,2.88,0.94,5.72,1.36,8.59c0.87,5.96,2.94,11.6,4.5,17.37c0.31,1.15,0.41,2.39,0.9,3.46 c0.85,1.84,1.57,3.75,2.86,5.41c0.91,1.17,1.47,2.68,1.91,4.13c1.36,4.46,3.22,8.75,5.41,12.81c2.69,4.99,4.89,10.18,7.36,15.26 c1.42,2.92,2.98,5.78,4.48,8.66c0.21,0.41,0.46,0.82,0.61,1.26c0.7,2.17,1.98,3.89,3.87,5.14c0.9,0.59,1.21,1.39,1.46,2.44 c0.57,2.46,1.47,4.83,3.52,6.53c0.41,0.34,0.83,0.68,1.17,1.08c0.69,0.82,0.73,1.56-0.05,2.3c-1.24,1.19-2.57,2.28-3.88,3.39 c-0.56,0.47-1.24,0.81-1.76,1.31c-2.21,2.09-4.55,1.61-7.03,0.55c-0.94-0.4-2.06-0.57-3.09-0.53c-1.91,0.06-3.05-0.74-3.88-2.44 c-0.72-1.48-1.78-2.79-2.66-4.19c-0.35-0.56-0.76-1.14-0.88-1.76c-0.41-2.22-1.54-4.09-2.7-5.96c-0.25-0.39-0.48-0.8-0.69-1.21 c-1.3-2.69-2.62-5.38-3.89-8.09c-0.9-1.92-1.69-3.89-2.57-5.82c-1.07-2.36-2.26-4.67-3.27-7.05c-0.91-2.13-1.66-4.33-2.49-6.5 c-1.2-3.17-2.38-6.35-3.61-9.51c-0.62-1.59-1.32-3.14-1.98-4.71c-0.08-0.18-0.22-0.38-0.19-0.55c0.32-2.35-1.08-4.13-1.94-6.11 c-1.12-2.62-2.07-5.33-2.96-8.04c-0.6-1.83-1.01-3.72-1.45-5.6c-0.86-3.69-1.74-7.38-2.48-11.1c-0.27-1.34-1.13-2.53-0.91-4.03 C374.62,622.99,373.95,622.46,373.58,621.93"),d=e.path("M206.62,636.83c-0.47,0-0.93,0-1.4,0c-2.44-0.32-4.84-1.1-7.35-0.66c-1.93,0.34-3.72-0.31-5.58-0.7 c-3.83-0.81-7.71-1.48-11.58-2.06c-6.61-0.99-13.22-1.94-19.85-2.78c-2.63-0.33-5.3-0.46-7.95-0.41c-1.49,0.03-2.97,0.68-4.47,0.94 c-2.15,0.37-4.35,0.52-6.48,0.99c-3.37,0.74-6.69,1.75-10.06,2.5c-1.78,0.39-3.63,0.4-5.43,0.72c-2.48,0.44-4.9,1.33-7.47,0.45 c-0.52-0.18-1.12-0.16-1.68-0.17c-3.34-0.09-6.65-0.35-9.86-1.33c-1.29-0.4-2.55-0.91-3.85-1.3c-1.2-0.36-1.78-1.26-1.58-2.51 c0.08-0.48,0.08-1,0.03-1.49c-0.09-0.96-0.34-1.91-0.34-2.86c-0.05-6.19-0.1-12.39-0.03-18.58c0.02-1.82,0.38-3.63,0.65-5.44 c0.05-0.32,0.41-0.82,0.68-0.85c2.63-0.36,5.26-0.75,7.91-0.89c2.25-0.12,4.52,0.06,6.78,0.12c1.76,0.04,3.52,0.1,5.27,0.13 c0.29,0,0.57-0.13,0.86-0.17c1.6-0.22,3.2-0.61,4.8-0.61c2.96,0,5.92,0.31,8.88,0.34c2.12,0.02,4.25-0.27,6.37-0.34 c3.36-0.11,6.73-0.16,10.09-0.24c1.33-0.03,2.66-0.14,3.99-0.13c2.36,0.01,4.72,0.18,7.08,0.12c5.86-0.14,11.72-0.39,17.58-0.53 c3.13-0.07,6.26,0.05,9.39,0.01c3.97-0.05,7.94,0.08,11.89-0.37c0.13-0.01,0.27,0,0.4,0.01c1.53,0.07,3.01,0.33,4.59,0.23 c4.31-0.28,8.65-0.18,12.98-0.23c1.66-0.02,3.33-0.04,4.99-0.07c5.32-0.07,10.64-0.19,15.96-0.2c3.46-0.01,6.92,0.21,10.38,0.2 c3.12-0.01,6.24-0.25,9.37-0.3c1.75-0.03,3.51,0.13,5.27,0.21c1.11,0.06,2.22,0.2,3.33,0.19c0.99,0,1.99-0.23,2.98-0.22 c2.56,0.02,5.12,0.18,7.68,0.17c1.92-0.01,3.83-0.22,5.74-0.29c5.42-0.2,10.84-0.39,16.26-0.54c3.92-0.11,7.84-0.16,11.77-0.21 c2.73-0.03,5.46,0,8.19-0.03c4-0.04,7.99-0.12,11.99-0.17c4.8-0.06,9.59-0.11,14.39-0.16c0.85-0.01,1.69,0,2.62,0 c-0.08,0.49-0.13,0.76-0.19,1.09c0.6-0.23,1.13-0.61,1.65-0.6c2.09,0.04,4.15-0.04,6.25-0.25c2.93-0.31,5.93-0.01,9.01,0.02 c0.12-0.25,0.32-0.7,0.45-0.98c0.65-0.06,1.18-0.13,1.71-0.16c2.66-0.14,5.32-0.3,7.98-0.38c2.56-0.08,5.12-0.1,7.68-0.08 c1.77,0.01,3.63,0.46,4.93-1.28c0.03-0.04,0.12-0.02,0.08-0.02c1.39,0.62,2.09,1.59,1.93,3.08c-0.02,0.22,0.08,0.45,0.12,0.68 c0,0.13,0,0.27,0,0.4c0,2.13,0,4.27,0,6.4c0,3.47,0,6.93,0,10.4c-0.61,2.77-1.13,5.55-0.53,8.38c0.15,0.72-0.06,1.16-0.56,1.65 c-2.3,2.24-5.22,3.43-8.07,4.68c-1.36,0.6-2.82,0.97-4.24,1.41c-0.85,0.26-1.73,0.4-2.57,0.69c-2.44,0.84-4.68,2.38-7.43,2.17 c-0.03,0-0.07,0.01-0.1,0.01c-2.44,0.28-4.89,0.68-7.22-0.28c-0.57,0.34-1.18,0.72-1.76,0.69c-1.63-0.08-3.24-0.35-4.86-0.51 c-0.56-0.06-1.13-0.07-1.69-0.01c-1.3,0.13-2.59,0.32-3.85,0.48c-0.17-0.57-0.26-0.88-0.38-1.26c-4.04,0.41-7.89-0.4-11.75-1.37 c-2.96-0.75-5.97-1.34-8.99-1.81c-1.86-0.29-3.82-0.48-5.67-0.24c-3.85,0.51-7.66,1.37-11.5,2.01c-5.44,0.91-10.72,2.68-16.3,2.79 c-2.59,0.05-5.18,0.41-7.77,0.45c-1.17,0.02-2.34-0.44-3.53-0.55c-3.91-0.37-7.81-0.78-11.73-1c-5.28-0.3-10.39-1.45-15.49-2.75 c-3.82-0.97-7.56-2.3-11.53-2.62c-1.78-0.14-3.54-0.57-5.34-0.19c-3.73,0.78-7.47,1.49-11.18,2.35c-7.06,1.63-14.11,3.33-21.15,5.04 C208.32,636.08,207.48,636.5,206.62,636.83z M360.2,623.96c-0.1,0.05-0.19,0.1-0.29,0.15c0.42,1.12,0.84,2.24,1.26,3.37 c0.13-0.05,0.25-0.1,0.38-0.15C361.1,626.2,360.65,625.08,360.2,623.96z M371.19,607.59c-0.07,0.02-0.14,0.04-0.21,0.06 c0.24,1.05,0.48,2.11,0.73,3.16c0.1-0.02,0.19-0.05,0.29-0.07C371.72,609.69,371.45,608.64,371.19,607.59z"),p=e.path("M115.09,581.47c-3.27,0-6.53,0-9.8,0c-0.93-0.2-1.88-0.34-2.78-0.62c-0.29-0.09-0.67-0.52-0.68-0.81 c-0.1-2.65-0.13-5.29-0.18-7.94c-0.03-1.94-0.09-3.89-0.07-5.83c0.02-1.12,0.11-2.25,0.3-3.36c0.17-1,0.96-1.42,1.94-1.39 c1.79,0.06,3.59,0.04,5.38,0.06c2.48,0.04,4.97-0.57,7.45,0.12c0.86,0.24,1.71,0.53,2.58,0.74c0.43,0.1,0.97,0.24,1.34,0.08 c3.4-1.48,6.96-0.71,10.45-0.83c2.72-0.09,5.45-0.04,8.16-0.21c2.66-0.16,5.29-0.26,7.96-0.05c2.13,0.17,4.3-0.02,6.45-0.12 c1.34-0.06,2.67-0.34,4.01-0.39c1.92-0.07,3.85,0.02,5.78-0.04c1.09-0.04,2.17-0.35,3.25-0.37c2.85-0.06,5.71,0.01,8.57-0.03 c3.12-0.04,6.25-0.11,9.37-0.2c1.62-0.05,3.17,0.58,4.87,0.11c1.4-0.39,2.97-0.25,4.46-0.26c3.59-0.03,7.19-0.01,10.78-0.03 c1.3-0.01,2.59-0.14,3.88-0.13c2.52,0.02,5.04,0.15,7.57,0.15c1.56,0,3.12-0.21,4.68-0.22c3.36-0.03,6.72,0.05,10.07,0.01 c1.93-0.03,3.85-0.29,5.78-0.3c2.59,0,5.18,0.22,7.78,0.21c2.89-0.01,5.78-0.23,8.67-0.26c3.46-0.03,6.92,0.12,10.39,0.08 c3.65-0.05,7.3-0.22,10.95-0.38c4.89-0.21,9.78-0.23,14.67-0.69c4.16-0.39,8.36-0.36,12.55-0.38c2.99-0.02,5.98,0.27,8.97,0.26 c2.39,0,4.78-0.23,7.18-0.36c1.39-0.08,2.79-0.2,4.18-0.22c1.79-0.03,3.58,0.06,5.37,0.03c2.89-0.04,5.79-0.17,8.68-0.21 c3.39-0.05,6.79-0.09,10.18-0.04c1.79,0.03,3.57,0.27,5.35,0.42c0.92,0.08,1.85,0.24,2.77,0.24c4.29,0.01,8.58-0.05,12.87-0.04 c0.64,0,1.28,0.22,1.92,0.34c0.67,0.08,1.46-0.01,1.95,0.33c0.64,0.44,0.97,0.16,1.5-0.06c0.96-0.39,1.98-0.92,2.98-0.93 c2.72-0.03,5.45,0.26,8.17,0.29c2.66,0.03,5.32-0.14,7.99-0.18c1.71-0.03,1.87,0.11,1.9,1.85c0.03,1.83,0.23,3.61,0.81,5.35 c0,0.13,0,0.27,0,0.4c-0.24,0.99-0.75,1.99-0.67,2.95c0.23,2.76-0.03,5.49-0.63,8.13c-0.5,2.22-0.9,2.44-3.07,2.53 c-0.93,0.04-1.87-0.08-2.79-0.04c-2.62,0.12-5.24,0.38-7.87,0.42c-2.72,0.05-5.45-0.08-8.18-0.17c-0.52-0.02-1.04-0.17-1.56-0.27 c-0.56-0.11-1.12-0.32-1.68-0.33c-2.21-0.04-4.43,0.02-6.64-0.03c-4.38-0.1-8.77-0.39-13.15-0.35c-6.12,0.06-12.23,0.35-18.34,0.55 c-1.19,0.04-2.39,0.13-3.58,0.2c-2.12,0.13-4.24,0.26-6.36,0.38c-2.29,0.13-4.58,0.21-6.79-0.64c-0.09-0.03-0.2-0.02-0.3-0.02 c-2.66-0.05-5.33-0.12-7.99-0.13c-5.63-0.02-11.26-0.02-16.88-0.02c-1.33,0-2.66-0.02-3.99,0.02c-2.59,0.08-5.2,0.45-7.76,0.22 c-4.9-0.44-9.77-0.19-14.66-0.1c-3.66,0.07-7.32,0.03-10.99,0.07c-2.8,0.03-5.59,0.18-8.39,0.15c-2.39-0.03-4.82,0.41-7.18-0.33 c-0.11-0.04-0.29-0.02-0.38,0.04c-1.43,1.15-3.1,0.93-4.75,0.83c-0.93-0.06-1.86-0.04-2.79-0.05c-3.12-0.02-6.24-0.02-9.36-0.06 c-1.63-0.02-3.26-0.13-4.89-0.14c-1.43,0-2.86,0.1-4.29,0.14c-2.83,0.07-5.66,0.14-8.49,0.16c-1.53,0.01-3.06-0.08-4.59-0.1 c-1.33-0.02-2.66,0-3.99,0.01c-1.86,0.02-3.72,0.05-5.58,0.05c-1.95,0.01-3.9-0.01-5.85,0c-0.92,0-1.85,0.03-2.77,0.08 c-0.68,0.04-1.37,0.22-2.05,0.21c-2.62-0.04-5.24-0.25-7.85-0.18c-6.02,0.17-12.04,0.46-18.06,0.71c-2.92,0.12-5.85,0.29-8.77,0.4 c-1.13,0.04-2.26-0.03-3.38-0.08c-2.11-0.11-4.22-0.24-6.33-0.36c-0.06,0-0.12,0.05-0.19,0.06c-1.06,0.22-2.12,0.61-3.19,0.63 c-3.53,0.07-7.06,0-10.59,0.01C116.27,581.28,115.68,581.4,115.09,581.47z"),u=d.x(),g=c.cy(),h=t/417,m=(d.fill("#0003edAA"),p.fill("#0003edAA"),c.fill("#F2E6E0"),l.fill("#c03b1cAA"),s.fill("#0077f7AA"),r.fill("#008661AA"),r.x()),v=r.y(),y=(r.move(m,i+r.height()/h),s.x()),f=s.y(),b=(s.move(y,-s.height()/h),d.x()),w=d.y(),S=(d.move(-d.width(),w),p.x()),A=p.y(),E=(p.move(-p.width(),A),c.x(),c.y(),c.width(),c.height()),E=(l.scale(.01),e.rect(t,i).move(0,E+i).fill("#F2E6E0")),V=e.mask(),V=(V.add(c),E.maskWith(V),o.scale(.01),o.animate(500).rotate(20).scale(1),o.animate(6e4).rotate(340),d.animate(1e3,"<>",500).move(b,w),p.animate(1e3,"<>",1e3).move(S,A),r.animate(1e3,"<>",1500).move(m,v),s.animate(1e3,"<>",2e3).move(y,f),E.animate(1e3,"<>",2500).move(0,0),l.animate(1e3,"<>",3e3).scale(1),e.rect(t,i).move(0,0).fill(VIVID).back()),b=(V.opacity(1),V.animate(3e3,"<>",500).opacity(.3),e.group()),w=(b.add(o),b.add(r),b.add(s),b.add(l),b.add(d),b.add(p),b.scale(h),c.scale(h),-u/h),S=(i/2-g)/h;b.dmove(w,S),c.dmove(w-5/h,S+5/h),E.front()}destroy(){VMain.modalHide()}}class VService{constructor(){return VService.instance||(this._data=[],VService.instance=this),VService.instance}autoresize(e){e.style.height="",e.style.height=e.scrollHeight+4+"px"}textToClipboard(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t),_release_toast("text copied: "+e)}getArrayDepth(e){return function e(t){return Array.isArray(t)?1+Math.max(...t.map(e)):0}(e)}searchArray(e,t,i=!1){if(null==e||""===e||e.length<3)return[];var n,a,o=[],e=e.replace(/\s\s+/g," "),s=new RegExp(e.removeDiacritics(),"ig");for(n of t)-1<n.name.removeDiacritics().search(s)&&o.push(n),i&&void 0!==n.children&&(a=this.searchArray(e,n.children,i),o=o.concat(a));return o}searchArrayExact(e,t){if(null==e||""===e)return null;var i,n=[];e=e.replace(/\s\s+/g," ").removeDiacritics();for(i of t){var a=new RegExp("^"+i.name.removeDiacritics()+"$","i");-1<e.search(a)&&n.push(i)}return n}time_str(e){var t=("0"+(e.getSeconds()+1)).slice(-2),i=("0"+e.getMinutes()).slice(-2);return("0"+e.getHours()).slice(-2)+"-"+i+"-"+t}date_str(e){var t=("0"+(e.getMonth()+1)).slice(-2),i=("0"+e.getDate()).slice(-2);return e.getFullYear()+"-"+t+"-"+i}uniq(e){var t={};return e.filter(function(e){return!t.hasOwnProperty(e)&&(t[e]=!0)})}componentToHex(e){e=e.toString(16);return 1==e.length?"0"+e:e}hexToRgb(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),e=e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:255,g:255,b:255};return this.saturateRgb(e)}saturateRgb(e){return{r:e.r<0?0:255<e.r?255:e.r,g:e.g<0?0:255<e.g?255:e.g,b:e.b<0?0:255<e.b?255:e.b}}rgbToHex(e,t,i){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)}getRandomPolar(e){var t=2*Math.PI*Math.random(),e=e*Math.sqrt(Math.random());return{x:e*Math.cos(t),y:e*Math.sin(t)}}getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}flashControl(e){"on"==e.getAttribute("flash")?e.setAttribute("flash","off"):e.setAttribute("flash","on");var t="on"==e.getAttribute("flash")?"":"-off";e.innerHTML='<ons-icon icon="md-flash'+t+'"></ons-icon>',ABCamera.switchFlash(e.getAttribute("flash"))}dataURItoBlob(e){for(var t=(0<=e.split(",")[0].indexOf("base64")?atob:unescape)(e.split(",")[1]),e=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return new Blob([i],{type:e})}dataURItoBlob1(e){for(var t=atob(e.split(",")[1]),e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0;n<t.length;n++)i[n]=t.charCodeAt(n);return new Blob([e],{type:"image/jpeg"})}byteLength(e){for(var t=e.length,i=e.length-1;0<=i;i--){var n=e.charCodeAt(i);127<n&&n<=2047?t++:2047<n&&n<=65535&&(t+=2),56320<=n&&n<=57343&&i--}return t}changeVisualItemBackround(e){var t=document.getElementById("edit-wine-carousel-item-visual");null!==t&&("none"==e?(t.style="background-image: none",t.style="background-color: transparent",ABCamera.hide()):"camera"==e?(t.style="background-image: none",t.style="background-color: transparent",ABCamera.show()):"image"==e&&(t.style='background-image: url("css/splash.png");',t.style="background-color: "+OPAQUE,ABCamera.hide()))}selectCurrency(e){vWineSingleton.currentWine.currency=e.value}shareUrl(e){console.log("shareUrl");var t="",i=jDrupal.settings.sitePath;"wine"==e.type&&(t=e.getName(),i+="/node/"+e.getId());try{var n={subject:t,url:i};socialsharing.shareWithOptions(n,function(e){},function(e){})}catch(e){_debug_toast(e,"ERROR")}try{navigator.share({title:t,text:t,url:i}).then(function(){console.log("Successful share")}).catch(function(e){console.log("Error sharing:",e)})}catch(e){_debug_toast(e,"ERROR")}}getTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone.toString()}getWordsDifference(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var i,n=[],a=0;a<=t.length;a++)n[a]=[a];for(i=0;i<=e.length;i++)n[0][i]=i;for(a=1;a<=t.length;a++)for(i=1;i<=e.length;i++)t.charAt(a-1)==e.charAt(i-1)?n[a][i]=n[a-1][i-1]:n[a][i]=Math.min(n[a-1][i-1]+1,Math.min(n[a][i-1]+1,n[a-1][i]+1));return n[t.length][e.length]}}const vServiceSingleton=new VService;Object.freeze(vServiceSingleton);class VUser{constructor(){return VUser.instance||(this.wines=[],this._data=[],(VUser.instance=this).reset()),VUser.instance}reset(){this.settings={langcode:_deviceLangcode,is_showHints:!0,timezone:vServiceSingleton.getTimezone(),mail:"",location:{city:"",address:"",postcode:"",lat:0,lng:0},uid:0,name:"visitor",organic:"",vegan:!1,image:"css/splash.png",csrfToken:null,file:{url:"",width:0,height:0}},this.updateDebugging()}setCallback(e){this.callback=e}getId(){return this.settings.uid}isAuthenticated(){return jDrupal.currentUser().isAuthenticated()}getTimezone(){return this.settings.timezone}setCity(e){this.settings.location.city=e,this.saveUserCache()}getCity(){return this.settings.location.city}setCountryCode(e){this.settings.location.country=e,this.saveUserCache()}getCountryCode(){return this.settings.location.country}setAddress(e){this.settings.location.address=e,this.saveUserCache()}setPostalCode(e){this.settings.location.postcode=e,this.saveUserCache()}setLocation(e){this.settings.location.lat=parseFloat(e[0]),this.settings.location.lng=parseFloat(e[1]),this.saveUserCache()}getLocation(){return[this.settings.location.lat,this.settings.location.lng]}signin(i="",n=""){return new Promise((e,t)=>{_isOnline()||(_release_toast(VLocal.YouAreOffline),t()),jDrupal.currentUser().isAuthenticated()?(_release_toast(i+" is already signed in"),this.updateUser().then(e)):""===i||""===n?(t(),_release_toast(" :<br>"+VLocal.UserNotFound)):jDrupal.userLogin(i,n).then(()=>{this.updateUser().then(e)},e=>{null==e.response?_release_toast(e):e.response.includes("unrecognized")?_release_toast(i+" "+VLocal.UserNotFound):_release_toast(e.response),t()})})}updateUser(e){return new Promise((t,e)=>{let i=this.getUserLangcode();try{this.settings.uid=jDrupal.currentUser().id(),this.settings.name=jDrupal.currentUser().getAccountName();var n=jDrupal.currentUser().get("timezone",0),a=(null!=n&&(this.settings.timezone=n.value),jDrupal.currentUser().get("mail",0)),o=(null!=a&&(this.settings.mail=mail.value),jDrupal.currentUser().get("langcode",0)),s=(null!=o&&(i=o.value),jDrupal.currentUser().get("field_user_picture",0));null!=s&&(this.settings.file.url=this.settings.image=s.url)}catch(e){_debug_toast_err("signin1: "+e)}vDrupalSingleton.getSessionToken().then(e=>{try{this.settings.csrfToken=e,this.saveUserCache(),i!=this.getUserLangcode()&&(this.setUserLangcode(i),location.reload()),VMain.createLeftSideMenu(),VMain.toggleLeftMenu(),VMain.showFabs(),this.getWines()}catch(e){_debug_toast_err("signin2: "+e)}t()})})}signup(i,n,a){return new Promise((e,t)=>{_isOnline()||(_release_toast(VLocal.YouAreOffline),t()),jDrupal.userRegister(i,n,a,this.settings.langcode,this.settings.timezone).then(()=>{this.updateUser().then(e)},e=>{null!=e.response&&e.response.includes("is already taken")?e.response.includes("username")?_release_toast(i+" "+VLocal.UserTaken):e.response.includes("username")&&_release_toast(a+" "+VLocal.MailTaken):_release_toast(VLocal.UnableToConnect),t()})})}signout(){return new Promise((e,t)=>{_isOnline()||(_release_toast(VLocal.YouAreOffline),t()),jDrupal.userLogout().then(()=>{vDrupalSingleton.getSessionToken().then(()=>{this.reset(),this.settings.uid=jDrupal.currentUser().id(),this.saveUserCache(),VMain.createLeftSideMenu(),VMain.toggleLeftMenu(),VMain.showFabs(),e()})},e=>{null!=e.response?_release_toast(e.response):_release_toast(VLocal.UnableToConnect),t()})})}getWines(){var e=JSON.parse(localStorage.getItem("myWines_cached"));null!==e&&(this.wines=e),0===this.wines.length&&this.getWinesOnline().then(()=>{localStorage.setItem("myWines_cached",JSON.stringify(this.wines)),_debug_toast("Loaded "+this.wines.length+" wines for user "+this.settings.name,"DEBUG")})}getWinesOnline(){return new Promise((t,e)=>{jDrupal.viewsLoad("mywinesapp?_format=json").then(e=>{this.wines=e.getResults(),t()})})}updateDebugging(){try{0==this.settings.uid&&(this.settings.name=null==device.uuid?"browser":device.uuid)}catch(e){_is_app?(this.settings.uid=-1,this.settings.name="error"):(this.settings.name="browser",this.settings.uid=0)}_debug_toast("uuid:"+String(device.uuid)+" name:"+String(this.settings.name),"DEBUG"),window._isDebugUser=()=>{try{return!_is_app||null!=_localInterface.debug_users&&(_localInterface.debug_users.includes(String(device.uuid))&&0==this.settings.uid||_localInterface.debug_users.includes(String(this.settings.uid)))}catch(e){return _debug_toast_err(e),_is_app||console.log(e),!1}},"apple"==_deviceType()?window.DEBUG_MODE=_isDebugUser()?_localInterface.DEBUG_MODE_iOS:"":window.DEBUG_MODE=_isDebugUser()?_localInterface.DEBUG_MODE_Android:""}saveUserCache(){localStorage.setItem("user_settings_cached",JSON.stringify(this.settings))}getUserLangcode(){return this.settings.langcode}setUserLangcode(e){this.settings.langcode=e,this.saveUserCache()}switchVegan(e){e.checked?this.settings.vegan=!0:this.settings.vegan=!1,this.saveUserCache()}switchNatural(e){e.checked?this.settings.organic="natural":this.settings.organic="bio",this.saveUserCache()}switchBio(e){var t=document.getElementById("natural-switch");e.checked?(this.settings.organic="bio",t.disabled=!1):(this.settings.organic="",t.checked=!1,t.disabled=!0),this.saveUserCache()}updateMail(e,t){t=new jDrupal.User({preferred_langcode:[{value:this.settings.langcode}],uid:[{value:jDrupal.currentUser().id()}],timezone:[{value:this.settings.timezone}],pass:{existing:t},mail:{value:e}});this.save(t)}updatePassword(e,t){t=new jDrupal.User({preferred_langcode:[{value:this.settings.langcode}],uid:[{value:jDrupal.currentUser().id()}],timezone:[{value:this.settings.timezone}],pass:{value:t,existing:e}});this.save(t)}updatePicture(e){e=new jDrupal.User({preferred_langcode:[{value:this.settings.langcode}],uid:[{value:jDrupal.currentUser().id()}],timezone:[{value:this.settings.timezone}],field_user_picture:[{target_id:e.attributes.drupal_internal__fid,alt:"",title:e.attributes.filename,width:this.settings.file.width,height:this.settings.file.height,target_type:"file",target_uuid:e.id,url:jDrupal.restPath()+e.attributes.uri.url}]});this.save(e)}save(e){e.save().then(()=>{_release_toast(VLocal.UserSettingsSaved);try{null!=e.entity.field_user_picture&&(this.settings.file.url=this.settings.image=e.entity.field_user_picture[0].url),null!=e.entity.mail&&(this.settings.mail=e.entity.mail.value),this.saveUserCache()}catch(e){_debug_toast_err(e)}},e=>{null!=e.response&&_release_toast(e.response),_release_toast(VLocal.UserSettingsNotSaved)})}}const vUserSingleton=new VUser;class VPageFactory{constructor(){return null}static createPage(e,t){var i;null===document.getElementById(e+".html")&&((i=document.createElement("template")).id=e+".html",i.innerHTML=t,$("#app-body")[0].appendChild(i))}static buildCameraPage(e){var t='<ons-page id= "camera-'+e+'-page" class="page__transparent"><ons-fab modifier ="mini" position="top left" class="fab-text" style="width:100px!important; margin-left:-30px;" id="edit-wine-back-div" ontouchend="VMain.pushMainPage({\'id\': \'selected-wines.html\', prev: \'camera-'+e+"-page.html'});\">"+VLocal.Cancel+"</ons-fab>";return _isDebugUser()&&(t+='<ons-fab id="'+e+'-camera-skip-fab" modifier ="mini" position="top right" class="fab-text" style="width:100px!important; margin-right:-30px;"">'+VLocal.Skip+' <ons-icon icon="md-chevron-right"></ons-icon></ons-fab>'),"wine"==e&&(t+='<div class="wine-bottle" id="wine-bottle"></div>'),"map"==e&&(t+='<div class="zoomist-container" style="z-index: inherit;"><div class="zoomist-wrapper"><div class="zoomist-image"><img id="map-image" /></div></div></div><div id="google-map-canvas" style="filter: opacity(0.5);  position:absolute; top:0px; bottom: 0px; width:100%; height:90%; background-color:transparent"></div><div id="drawing-canvas" style="display:none; position:absolute; top:0; bottom: 0px; width:100%; height:900%; background-color:transparent"></div><div class="zoomist-slider" style="left:50%"></div>'),t+='<ons-fab id="flash-fab" modifier="mini" flash="off" style="position:absolute; left: 20px; bottom:20px; transform:none!important" ><ons-icon icon="md-flash-off"></ons-icon></ons-fab><ons-fab style="position:absolute; margin-left: auto; margin-right: auto; left:0; right:0; display:block; bottom:20px; transform:none!important" id="'+e+'-camera-fab" ><ons-icon icon="md-camera-alt"></ons-icon></ons-fab><ons-fab id="'+e+'-browse-fab" modifier="mini" style="position:absolute; right: 20px; bottom:20px; transform:none!important" ><ons-icon icon="md-image"></ons-icon></ons-fab></ons-page>'}static buildPriceListItem(){return'<ons-list-item tappable ><div class="left left-30" id="wine-price-title">'+VLocal.Price+'</div><div class="center"><ons-input id="wine-price" placeholder="'+VLocal.Price+'"></ons-input></div><div class="right" style="width:100px"><div style="width:100px"><ons-select id="choose-currency"><option value="EUR">€</option><option value="USD">$</option><option value="JPY">¥</option><option value="KRW">₩</option><option value="CNE">¥</option><option value="GBP">£</option><option value="RUB">₽</option></ons-select></div><div ><ons-checkbox modifier="noborder" id="wine-price-checked"></ons-checkbox></div></div></ons-list-item>'}static buildStockListItem(){return'<ons-list-item tappable modifier="nodivider"><div class="left left-30" id="wine-stock-title">'+VLocal.Stock+'</div><div class="center"><ons-input id="wine-stock" type="number" min="0" value="1"></ons-input></div><div class="right" style="width:100px"><ons-checkbox modifier="noborder" id="wine-stock-checked"></ons-checkbox></div></ons-list-item>'}static buildBottomListItem(){return'<ons-list-item class="bottom-item" modifier ="nodivider" style="display:none; height:'+.8*window.innerHeight+'px"></ons-list-item>'}static buildGeneralListItems(e){return VPageFactory.buildPhotoFab()+'<ons-list-item id="wine-name-element"><div class="left left-30" id="wine-name-title">'+VLocal.Name+'</div><div class="center"><ons-input id="wine-name" placeholder="'+VLocal.Name+'"></ons-input></div><div class="right"><ons-checkbox modifier="noborder" id="wine-name-checked"></ons-checkbox></div></ons-list-item><ons-list-item><div class="left left-30 "><span id="wine-boutique-title">'+VLocal.Boutique+'</span></div><div class="center" ><select id="wine-boutique" multiple="multiple" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.Boutique+'"></select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-boutique-checked"></ons-checkbox></div></ons-list-item><ons-list-item  id="wine-tasting-date-element"><div class="left left-30 "><span id="wine-tasting-date-title">'+VLocal.TastingDate+'</span></div><div class="center"><ons-input id="wine-tasting-date" type="date" placeholder="'+VLocal.TastingDate+'" value="'+vServiceSingleton.date_str(new Date)+'"></ons-input></div><div class="right"><ons-checkbox modifier="noborder" checked id="wine-tasting-date-checked"></ons-checkbox></div></ons-list-item><ons-list-item><div class="left left-30 "><span id="wine-vintage-title">'+VLocal.Vintage+'</span></div><div class="center"><ons-input id="wine-vintage" type="number" placeholder="'+VLocal.Vintage+'" value="2020"></ons-input></div><div class="right"><ons-checkbox modifier="noborder" id="wine-vintage-checked"></ons-checkbox></div></ons-list-item><ons-list-item><div class="left left-30 "><span id="wine-alcohol-title">'+VLocal.Alcohol+'</span></div><div class="center"><ons-input id="wine-alcohol" type="number"  placeholder="'+VLocal.Alcohol+'" value="13.5"></ons-input></div><div class="right"><ons-checkbox modifier="noborder" checked id="wine-alcohol-checked"></ons-checkbox></div></ons-list-item><ons-list-item><div class="left left-30 "><span id="wine-bio-title">'+VLocal.Organic+'</span></div><div class="center" ><ons-select id="wine-bio" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.Organic+'"><option value="0">'+VLocal.wineBioRangeNames[0]+'</option><option value="1">'+VLocal.wineBioRangeNames[1]+'</option><option value="2">'+VLocal.wineBioRangeNames[2]+'</option></ons-select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-bio-checked"></ons-checkbox></div></ons-list-item><ons-list-item ><div class="left left-30 "><span id="wine-sulfites-title">'+VLocal.Sulfites+'</span></div><div class="center" ><ons-select id="wine-sulfites" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.Sulfites+'"><option value="0">'+VLocal.wineSulfitesRangeNames[0]+'</option><option value="1">'+VLocal.wineSulfitesRangeNames[1]+'</option></ons-select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-sulfites-checked"></ons-checkbox></div></ons-list-item><ons-list-item ><div class="left left-30 "><span id="wine-vegan-title">'+VLocal.Vegan+'</span></div><div class="center" ><ons-select id="wine-vegan" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.Vegan+'"><option value="0">'+VLocal.wineVeganRangeNames[0]+'</option><option value="1">'+VLocal.wineVeganRangeNames[1]+'</option></ons-select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-vegan-checked"></ons-checkbox></div></ons-list-item><ons-list-item ><div class="left left-30 "><span id="wine-appellation-title">'+VLocal.Appellation+'</span></div><div class="center" ><select id="wine-appellation" multiple="multiple" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.Appellation+'"></select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-appellation-checked"></ons-checkbox></div></ons-list-item><ons-list-item><div class="left left-30 "><span id="wine-producer-title">'+VLocal.Producer+'</span></div><div class="center" ><select id="wine-producer" multiple="multiple" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.Producer+'"></select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-producer-checked"></ons-checkbox></div></ons-list-item><ons-list-item><div class="left left-30 "><span id="wine-varieties-title">'+VLocal.Varieties+'</span></div><div class="center" ><select id="wine-varieties" multiple="multiple" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.Varieties+'"></select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-varieties-checked"></ons-checkbox></div></ons-list-item>'}static buildPhotoFab(){return'<ons-fab modifier ="mini quiet" position="bottom right" id="camera-fab" ontouchend="vCameraSingleton.hide(); VMain.popPage(); "><ons-icon icon="md-camera"></ons-icon></ons-fab>'}static buildCancelFab(e,t=0){return'<ons-fab modifier ="mini" position="top left" class="fab-text" style="width:120px!important; margin-top:'+t+"px; margin-left:-30px;\" id=\"edit-wine-back-div\" ontouchend=\"VMain.pushMainPage({'id': 'selected-wines.html', prev: '"+e+'-page.html\'});"><ons-icon icon="fa-chevron-left"></ons-icon>&nbsp;'+VLocal.Cancel+"</ons-fab>"}static buildSaveFab(e=0){return'<ons-fab modifier ="mini quiet" position="top right" class="fab-text save-wine-button" style="width:120px!important; margin-top:'+e+'px;  margin-right:-30px">'+VLocal.Save+'&nbsp;<ons-icon icon="fa-send"></ons-icon></ons-fab>'}static buildWinePageTabbar(){return'<ons-tabbar modifier="autogrow" id="edit-wine-tabbar" swipeable position="top"><ons-tab page="edit-wine-page-general.html" label="'+VLocal.Description+'"  active></ons-tab><ons-tab page="edit-wine-page-visual.html" label="'+VLocal.Visual+'" ></ons-tab><ons-tab page="edit-wine-page-olfaction.html" label="'+VLocal.Olfaction+'" ></ons-tab><ons-tab page="edit-wine-page-taste.html" label="'+VLocal.Taste+'" ></ons-tab><ons-tab page="edit-wine-page-conclusion.html" label="'+VLocal.Conclusion+'" ></ons-tab></ons-tabbar>'}static buildWineGeneralPage(e){return'<ons-page id="'+e+'"  ><ons-list modifier="noborder" style="padding: 0; margin-top: 40px; width: 100%; background-color:'+TRANSPARENT+'">'+VPageFactory.buildGeneralListItems()+VPageFactory.buildStockListItem()+VPageFactory.buildBottomListItem()+"</ons-list></ons-page>"}static buildWineVisualPage(e){return'<ons-page id="'+e+'"><ons-speed-dial direction="up" style="position: absolute; left: 20px; bottom:20px; transform:scale(0.8)" id="red-palette"><ons-fab style="background:#ff0000;"><ons-icon style="transform: scale(1.5);" icon="md-palette"></ons-icon></ons-fab></ons-speed-dial><ons-speed-dial direction="up" style="position: absolute; left: 60px; bottom:20px; transform:scale(0.8)" id="white-palette"><ons-fab style="background:#ffff00;"><ons-icon style="transform: scale(1.5);" icon="md-palette"></ons-icon></ons-fab></ons-speed-dial><ons-speed-dial  direction="up" style="position: absolute; left: 100px; bottom:20px; transform:scale(0.8)" id="rose-palette"><ons-fab style="background:#ff00a0;"><ons-icon style="transform: scale(1.5);" icon="md-palette"></ons-icon></ons-fab></ons-speed-dial><ons-speed-dial direction="up" style="position: absolute; right: 0px; bottom:20px; transform:scale(0.8)" id="color-transparency"><ons-fab><ons-icon style="transform: scale(1.5);" icon="fa-adjust"></ons-icon></ons-fab><ons-speed-dial-item style="border-radius:10px; height:200px; background:'+VIVID20+';"><ons-range id="color-transparency-range" value="220" min="128" max="255" style="transform: rotate(270deg);  margin-left: -70px;  margin-top: 85px;  width: 180px;"></ons-range></ons-speed-dial-item></ons-speed-dial><ons-speed-dial direction="up" style="position: absolute; bottom: 20px; right: 50px; transform:scale(0.8)" id="color-particles"><ons-fab><ons-icon style="transform: scale(1.5);" icon="md-grain"></ons-icon></ons-fab><ons-speed-dial-item style="border-radius:10px; height:200px; background:'+VIVID20+';"><ons-range id="color-particles-range" value="0" min="1" max="99" style="transform: rotate(270deg);  margin-left: -70px;  margin-top: 85px;  width: 180px;"></ons-range></ons-speed-dial-item></ons-speed-dial><ons-speed-dial direction="up" style="position: absolute; bottom: 20px; right: 100px; transform:scale(0.8)" id="color-background"><ons-fab><ons-icon style="transform: scale(1.5);" icon="md-crop-free"></ons-icon></ons-fab><ons-speed-dial-item><ons-fab modifier="mini" id="color-background-none" ontouchend="VMain.setBackground(\''+OPAQUE+'\');"><ons-icon icon="fa-file-o"></ons-icon></ons-fab></ons-speed-dial-item><ons-speed-dial-item><ons-fab modifier="mini" id="color-background-camera" ontouchend="VMain.setBackground(\''+TRANSPARENT+'\');"><ons-icon icon="fa-camera"></ons-icon></ons-fab></ons-speed-dial-item></ons-speed-dial></ons-page>'}static buildWineOlfactionPage(e){return'<ons-page id="'+e+'" style="background:'+MIDTONE+'!important"><ons-list modifier="noborder" style="margin-top: 40px; background-color:'+TRANSPARENT+'"><ons-list-item class="range-item" modifier="nodivider"><div class="left left-30 "><span id="wine-intensity-title">'+VLocal.Intensity+'</span></div><div class="center"><ons-row><ons-range id="olfaction-intensity-range" value="0" min="0" max="100" style=" width:100%;"></ons-range></ons-row><ons-row class="range-item-value"><i style="font-size:14px" id="intensity-range-link"></i></ons-row></div><div class="right"><ons-checkbox modifier="noborder" id="intensity-checked"></ons-checkbox></div></ons-list-item></ons-list><div id="sunburstchart" class="ons-swiper-target" style="bottom:0px; width: 100%; height:'+window.innerWidth+"px; background-color:"+TRANSPARENT+'"></div></ons-page>'}static buildWineTastePage(e){return'<ons-page id="'+e+'" style = "background:'+MIDTONE+'!important;"><div id="taste-radar"  style = "background: inherit; position: fixed; margin-top:40px; height:350px; width:100%"; ></div></ons-page>'}static buildWineConclusionPage(e){return'<ons-page id="'+e+'" style="width:overflow-y: auto;" >'+VPageFactory.buildSaveFab(-20)+'<ons-list modifier="noborder" style="width: 100%; margin-top: 40px; background-color:'+TRANSPARENT+'">'+VPageFactory.buildPriceListItem()+'<ons-list-item ><div class="left left-30" id="wine-conclusion-title">'+VLocal.Conclusion+'</div><div class="center"><textarea class="textarea" style="-webkit-box-sizing: border-box;" rows="10"  id="wine-conclusion" placeholder="'+VLocal.Conclusion+'"></textarea></div><div class="right"><ons-checkbox modifier="noborder" id="wine-conclusion-checked"></ons-checkbox></div></ons-list-item><ons-list-item><div class="left left-30 "><span id="wine-food-title">'+VLocal.FoodPairing+'</span></div><div class="center" ><select id="wine-food" multiple="multiple" style="width: 100%;" class="demo-default selectized" placeholder="'+VLocal.FoodPairing+'"></select></div><div class="right"><ons-checkbox modifier="noborder" id="wine-food-checked"></ons-checkbox></div></ons-list-item>'+VPageFactory.buildBottomListItem()+"</ons-list></ons-page>"}static buildSaveWineErrorUls(s){var e="<ul style='list-style-type:none; color:red'>",t=e.length,i="<ul style='list-style-type: none; color:orange'>",n=i.length,a=$(document.getElementById("wine-appellation"))[0].selectize.items,o=$(document.getElementById("wine-producer"))[0].selectize.items,r=$(document.getElementById("wine-boutique"))[0].selectize.items,l=$(document.getElementById("wine-varieties"))[0].selectize.items,c=(e,i,n)=>{var a,o=[];s[i]=[];for(let t of e)isNaN(parseInt(t))?(a=n.find(e=>e.tid==t),o.push(null!=a?a:{name:t})):s[i].push({tid:parseInt(t)});return o},d=c(a,"appellations",vDataSingleton.allAppellations),p=c(o,"producer",vDataSingleton.allProducers),u=c(r,"boutique",vDataSingleton.allBoutiques),c=c(l,"varieties",vDataSingleton.allVarieties),a=(""===s.name&&(e+="<li>"+VLocal.EmptyWineName+"</li>"),null!=s.image&&""!==s.image.url||(i+="<li>"+VLocal.EmptyWineLabel+"</li>"),""===s.vintage&&(i+="<li>"+VLocal.EmptyVintage+"</li>"),""===s.tastingDate&&(i+="<li>"+VLocal.EmptyTastingDate+"</li>"),""===s.alcohol&&(i+="<li>"+VLocal.EmptyAlcohol+"</li>"),null==s.appellations||0==s.appellations.lenth||0==a.length?i+="<li>"+VLocal.EmptyAppellation+"</li>":0<a.length&&0<d.length&&(i+="<li>"+d[0].name+" "+VLocal.AppellationWillBeCreated+"</li>"),null==s.producer||0==o.length?i+="<li>"+VLocal.EmptyProducer+"</li>":0<o.length&&0<p.length&&(i+="<li>"+p[0].name+" "+VLocal.ProducerWillBeCreated+"</li>"),null==s.boutique||0==r.length?i+="<li>"+VLocal.EmptyBoutique+"</li>":0<r.length&&0<u.length&&(i+="<li>"+u[0].name+" "+VLocal.BoutiqueWillBeCreated+"</li>"),null==s.varieties||0==s.varieties.lenth||0==l.length?i+="<li>"+VLocal.EmptyVarieties+"</li>":0<l.length&&0<c.length&&(i+="<li>"+c[0].name+" "+VLocal.VarietyWillBeCreated+"</li>"),s.isOpen()&&(0===s.aromas.length&&(e+="<li>"+VLocal.EmptyAromas+"</li>"),null==s.intensity&&(e+="<li>"+VLocal.EmptyIntensity+"</li>"),null==s.color.code)&&(e+="<li>"+VLocal.EmptyColor+"</li>"),[]);return 0<e.length-t&&(a.errors=e+"</ul>"),0<i.length-n&&(a.warnings=i+"</ul>"),a.producer=p,a.boutique=u,a.appellations=d,a.varieties=c,a}static buildSaveFoodErrorUls(e){var t="<ul style='list-style-type:none; color:red'>",i=t.length,n="<ul style='list-style-type: none; color:orange'>",a=n.length,e=(""===e.name&&(t+="<li>"+VLocal.EmptyWineName+"</li>"),null!=e.label&&""!==e.label||(n+="<li>"+VLocal.EmptyWineLabel+"</li>"),0===e.tags.length&&(n+="<li>"+VLocal.EmptyTags+"</li>"),0===e.wines.length&&(n+="<li>"+VLocal.EmptyWines+"</li>"),null==e.color&&(t+="<li>"+VLocal.EmptyColor+"</li>"),[]);return 0<t.length-i&&(e.errors=t+"</ul>"),0<n.length-a&&(e.warnings=n+"</ul>"),e}}class VCamera{constructor(){return VCamera.instance||(this._data=[],(VCamera.instance=this).maxWidth=window.outerWidth,this.maxHeight=window.outerHeight,this.active=!0,this.side="back",this.initialized=!1),VCamera.instance}init(e){this.initialized?this.show(e):(this.initialized=!0,this.side=e,this.startCameraBelow(e).then(()=>{this.showSupportedPictureSizes().then(()=>{try{CameraPreview.setFlashMode(CameraPreview.FLASH_MODE.OFF)}catch(e){}window.addEventListener("touchstart",function(e){if(this.active){var t=e.touches[0].clientX,e=e.touches[0].clientY;try{CameraPreview.tapToFocus(t,e)}catch(e){_debug_toast(e,"ERROR")}}},!1)})}))}startCameraAbove(){return new Promise((e,t)=>{try{CameraPreview.startCamera({x:50,y:50,width:300,height:300,toBack:!1,previewDrag:!0,tapPhoto:!0},e,t)}catch(e){_debug_toast(e,"ERROR"),t()}})}startCameraBelow(i){return new Promise((e,t)=>{try{CameraPreview.startCamera({camera:i,tapPhoto:!1,tapFocus:!0,previewDrag:!1,toBack:!0},()=>{CameraPreview.show(),e()},t)}catch(e){_debug_toast(e,"ERROR"),t()}})}stopCamera(){CameraPreview.stopCamera()}toDataURL(n){return new Promise((i,e)=>{var t=new Image;t.crossOrigin="Anonymous",t.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,t.drawImage(this,0,0),i({data:e.toDataURL("image/jpeg",.9),width:e.width,height:e.height})},t.src=n,!t.complete&&void 0!==t.complete||(t.src="data:image/jpeg;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",t.src=n)})}browsePicture(){return new Promise((i,e)=>{try{navigator.camera.getPicture(e=>{StatusBar.hide(),this.toDataURL("data:image/jpg;base64,"+e).then(e=>{var t=new Date;StatusBar.show(),i({data:e.data,url:"gallery-"+vServiceSingleton.date_str(t)+"-"+vServiceSingleton.time_str(t)+".jpg",width:e.width,height:e.height,info:null})})},()=>{StatusBar.show(),e()},{quality:70,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!1,destinationType:Camera.DestinationType.DATA_URL})}catch(e){StatusBar.show(),_debug_toast(e,"ERROR"),i("css/splash.png")}})}takePicture(){return new Promise(i=>{try{CameraPreview.takePicture({width:this.maxWidth,height:this.maxHeight,quality:90},e=>{var t=new Date;i({data:"data:image/jpg;base64,"+e,url:"camera-"+vServiceSingleton.date_str(t)+"-"+vServiceSingleton.time_str(t)+".jpg",width:this.maxWidth,height:this.maxHeight,info:null})})}catch(e){_release_toast(e),i("css/splash.png")}})}takeSnapshot(){return new Promise(i=>{try{CameraPreview.takeSnapshot(function(e){var t=new Date;i({data:"data:image/jpg;base64,"+e,url:"snapshot-"+vServiceSingleton.date_str(t)+"-"+vServiceSingleton.time_str(t)+".jpg",width:window.innerWidth,height:window.innerHeight,info:null})})}catch(e){_release_toast(e),i("css/splash.png")}})}switchFlash(e){try{"on"==e?CameraPreview.setFlashMode(CameraPreview.FLASH_MODE.ON):CameraPreview.setFlashMode(CameraPreview.FLASH_MODE.OFF)}catch(e){_debug_toast(e,"ERROR")}}switchCamera(){CameraPreview.switchCamera()}show(e="back"){this.active=!0;try{e!=this.side&&CameraPreview.switchCamera(),this.side=e,CameraPreview.show()}catch(e){_debug_toast(e,"ERROR")}}hide(){this.active=!1;try{CameraPreview.hide()}catch(e){_debug_toast(e,"ERROR")}}changeFlashMode(){var e=document.getElementById("selectFlashMode").value;CameraPreview.setFlashMode(e)}changePreviewSize(){window.smallPreview=!window.smallPreview,window.smallPreview?CameraPreview.setPreviewSize({width:100,height:100}):CameraPreview.setPreviewSize({width:window.innerWidth,height:window.innerHeight})}showSupportedPictureSizes(){return new Promise((l,e)=>{try{CameraPreview.getSupportedPictureSizes(e=>{var t,i;let n=[];for(t of e){var a=t.height/t.width,o=t.width*t.height,s=921600;if("0.5625"==String(a)&&o==s){this.maxWidth=t.width,this.maxHeight=t.height,n=[];break}691200<o&&o<1152e3&&n.push(t)}for(i of n){var r=i.height/i.width;if("0.5625"==String(r)){this.maxWidth=i.width,this.maxHeight=d.height,n=[];break}}0<n.length&&(this.maxWidth=c[0].width,this.maxHeight=c[0].height),l()},l)}catch(e){this.maxWidth=window.outerWidth,this.maxHeight=window.outerHeight,l(),_debug_toast(e,"ERROR")}})}}const vCameraSingleton=new VCamera;class VRadar{constructor(){}generateChart(o,e=0,t=o.nid,s="chart-target-"+t){return new Promise(function(t,e){try{var i,n=echarts.init(document.getElementById(s)),a=o.aromas.length;for(i of o.aromas)a<10&&void 0!==o.aromas&&void 0===o.aromas.children&&(a+=1);10<a&&(a=10),n.setOption({tooltip:null,radar:{shape:"circle",startAngle:68,name:{color:"#fff",backgroundColor:VIVID67,borderRadius:3,padding:[3,5]},indicator:[{name:VLocal.Acidity,min:0,max:5},{name:VLocal.Salt,min:0,max:3},{name:VLocal.Bitterness,min:0,max:3},{name:VLocal.Body,min:0,max:5},{name:VLocal.Persistence,min:0,max:5},{name:VLocal.Complexity,min:0,max:10},{name:VLocal.Astringency,min:0,max:5},{name:VLocal.Tannins,min:0,max:5}],center:["50%","50%"],radius:60,splitArea:{areaStyle:{color:["#ffffffe0","#FCF6E8e0"],shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:10}},axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.5)"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.5)"}}},series:[{axisName:"Wine qualities",type:"radar",symbol:"none",data:[{value:[o.acid,o.salt,o.bitter,o.body,o.persistence,a,o.astr,o.tannins],name:o.name}],areaStyle:{opacity:.9,color:new echarts.graphic.RadialGradient(.5,.5,1,[{color:VIVID10,offset:0},{color:VIVID67,offset:1}])},itemStyle:{color:VIVID}}]}),t()}catch(e){console.log(e),t()}})}generateEditableChart(r,n,l="Taste"){return new Promise(function(t,e){var o=r.getTasteArray(),s=r.getTasteKeys();try{setTimeout(()=>{var e="wine"==r.getType()?[{name:VLocal.Acidity,min:0,max:5},{name:VLocal.Bitterness,min:0,max:3},{name:VLocal.Salt,min:0,max:3},{name:VLocal.Sugar,min:0,max:5},{name:VLocal.Body,min:0,max:5},{name:VLocal.Persistence,min:0,max:5},{name:VLocal.Gas,min:0,max:3},{name:VLocal.Tannins,min:0,max:5},{name:VLocal.Astringency,min:0,max:5}]:[{name:VLocal.Acidity,min:0,max:5},{name:VLocal.Bitterness,min:0,max:3},{name:VLocal.Salt,min:0,max:3},{name:VLocal.Sugar,min:0,max:4},{name:VLocal.Fat,min:0,max:4},{name:VLocal.Spiciness,min:0,max:4}],a=echarts.init(document.getElementById(n));function i(e,t,i){var n=a._coordSysMgr._coordinateSystems[0].pointToData([this.x,this.y]),n=(n[1]==o[e]||n[1]<a._coordSysMgr._coordinateSystems[0]._indicatorAxes[e].model.option.min||n[1]>a._coordSysMgr._coordinateSystems[0]._indicatorAxes[e].model.option.max||(o[e]=n[1],n=Math.ceil(o[e]),r.setTaste(s[e],n)),a._coordSysMgr._coordinateSystems[0].dataToPoint(o[e],e));this.x=n[0],this.y=n[1],a.setOption({series:[{id:"taste-radar",data:[{value:o,name:l}]}]})}a.setOption({tooltip:null,radar:{shape:"circle",startAngle:9==o.length?90:60,axisNameGap:-40,name:{color:"#fff",backgroundColor:VIVID67,borderRadius:3,padding:[5,5]},indicator:e,center:["50%","50%"],radius:"95%",splitArea:{},axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.5)"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.5)"}}},series:[{id:"taste-radar",name:l,type:"radar",data:[{value:o,name:l}],symbolSize:10,areaStyle:{opacity:.9,color:new echarts.graphic.RadialGradient(.5,.5,1,[{color:VIVID10,offset:0},{color:VIVID67,offset:1}])},itemStyle:{color:VIVID}}]}),setTimeout(()=>{a.setOption({graphic:echarts.util.map(o,function(e,t){return{type:"circle",x:a._coordSysMgr._coordinateSystems[0].dataToPoint(e,t)[0],y:a._coordSysMgr._coordinateSystems[0].dataToPoint(e,t)[1],color:"yellow",shape:{cx:0,cy:0,r:20},invisible:!0,draggable:!0,ondrag:echarts.util.curry(i,t),onmousedown:()=>{document.getElementById("edit-"+r.getType()+"-tabbar").swipeable=!1},onmouseup:()=>{document.getElementById("edit-"+r.getType()+"-tabbar").swipeable=!0},z:100}})})},100),t()},0)}catch(e){console.log(e),t()}})}}class VData{constructor(){return VData.instance||(this._data=[],VData.instance=this),VData.instance}selectedWines=[];wineColors={red:[],white:[],rose:[]};allVarieties=[];allProducers=[];allAppellations=[];allHierarchies=[];aromasSeries=[];foodSeries=[];selectedAromasIds=[];selectedFoodIds=[];allFood=[];allAromas=[];allUsers=[];allBoutiques=[];remoteDataIndex=0;remoteDataNumber=8;flattern(e,t){for(var i of e){var n;i.children?this.flattern(i.children,t):(n={},void 0===i.label.rich.image.backgroundColor.image.src?n.img=i.label.rich.image.backgroundColor.image:n.img=i.label.rich.image.backgroundColor.image.src,n.tid=i.tid,n.name=i.name,t.push(n))}}setColors(e){var t,i=["red","white","rose"],n="",a="",o=0;this.wineColors={red:[],white:[],rose:[]};for(t of e)parseInt(t.tid)<4?(n=i[parseInt(t.tid)-1],o=0):(""==t.code&&(t.code=a),"red"==n?this.wineColors.red.push(t):"white"==n?this.wineColors.white.push(t):"rose"==n&&this.wineColors.rose.push(t),0==o&&(a=t.code),o++);this.setCache("wineColors",this.wineColors)}setHierarchies(e){for(var t of e)""===t.pid&&(t.children=[],this.allHierarchies.push(t));var i,n;for(i of this.allHierarchies)for(n of e)i.tid==n.pid&&(n.children=[],i.children.push(n));this.setCache("allHierarchies",this.allHierarchies)}getFullHierarchy(e,n){let a=[e];return function e(t){var i=n.find(e=>parseInt(e.tid)==parseInt(t));void 0!==i&&(a.push(i),e(i.pid))}(a[0].pid),a.reverse()}setSeries(s,r){var e,t,i=Math.round(vServiceSingleton.byteLength(JSON.stringify(s))/1024)/1e3,n=(_debug_toast(r+" results size is "+i+"Mb","DEBUG"),vBench.begin(r+" flattern"),[]);for(e of s)e.name=e.name.replace(/&amp;/g,"&"),""===e.pid&&(t={name:e.name,img:e.img,tid:e.tid,pid:0,label:{position:"inside"},children:[]},n.push(t)),0;!function e(t){for(var i of t){var n,a,o=0;for(n of s)i.tid==n.pid&&(a={name:n.name,img:n.img,tid:n.tid,pid:n.pid,children:[],label:{position:"inside",align:"center",formatter:null,rich:null}},"foodapp"==r&&void 0!==n.salt&&(a.salt=parseInt(n.salt)-1,a.bitterness=parseInt(n.bitterness)-1,a.sugar=parseInt(n.sugar)-1,a.acidity=parseInt(n.acidity)-1,a.spiciness=parseInt(n.spiciness)-1,a.aromas=n.aromas,a.fat=parseInt(n.fat)-1,a.description=n.description),i.children.push(a),o++);0<o?e(i.children):(i.value=1,i.label.align="center",i.label.rotate=0,i.label.rich={title:{align:"center",fontStyle:"normal",fontWeight:"100"},image:{height:40,align:"right",backgroundColor:{image:i.img}}},delete i.img,delete i.children)}}(n),vBench.end(r+" flattern"),"aromasapp"==r?(this.aromasSeries=n,this.setCache("aromasSeries",this.aromasSeries),this.flattern(this.aromasSeries,this.allAromas)):"foodapp"==r&&(this.foodSeries=n,this.setCache("foodSeries",this.foodSeries),this.flattern(this.foodSeries,this.allFood))}clearCache(){this.allVarieties=[],this.allProducers=[],this.allBoutiques=[],this.allAppellations=[],this.aromasSeries=[],this.foodSeries=[],this.wineColors={red:[],white:[],rose:[]},this.removeCache("foodSeries"),this.removeCache("aromasSeries"),this.removeCache("wineColors"),this.removeCache("allVarieties"),this.removeCache("allAppellations"),this.removeCache("allHierarchies"),this.removeCache("allProducers"),this.removeCache("allBoutiques"),this.remoteDataIndex=0,this.removeCache("allUsers")}removeCache(e){localStorage.removeItem(e+"_cached");var t=Math.round(JSON.stringify(localStorage)/1024)/1e3;_debug_toast(e+" is removed from storage, total size is "+t+"Mb","debug")}setCache(e,t){try{localStorage.setItem(e+"_cached",JSON.stringify(t));var i=Math.round(vServiceSingleton.byteLength(JSON.stringify(t))/1024)/1e3,n=Math.round(vServiceSingleton.byteLength(JSON.stringify(localStorage))/1024)/1e3;_debug_toast(e+" storage size is "+i+"Mb of total "+n,"debug")}catch(e){_debug_toast(e,"error")}}getCache(e){try{var t=JSON.parse(localStorage.getItem(e+"_cached")),i=Math.round(vServiceSingleton.byteLength(localStorage.getItem(e+"_cached"))/1024)/1e3,n=Math.round(vServiceSingleton.byteLength(JSON.stringify(localStorage))/1024)/1e3;return _debug_toast(e+" storage size is "+i+"Mb of total "+n,"debug"),t}catch(e){return _debug_toast(e,"error"),null}}loadCache(){var e=this.getCache("foodSeries"),e=(null!==e&&(this.foodSeries=e,this.remoteDataIndex++,this.flattern(this.foodSeries,this.allFood)),this.getCache("aromasSeries")),e=(null!==e&&(this.aromasSeries=e,this.remoteDataIndex++,this.flattern(this.aromasSeries,this.allAromas)),this.getCache("wineColors")),e=(null!==e&&(this.wineColors=e,this.remoteDataIndex++),this.getCache("allVarieties")),e=(null!==e&&(this.allVarieties=e,this.remoteDataIndex++),this.getCache("allAppellations")),e=(null!==e&&(this.allAppellations=e,this.remoteDataIndex++),this.getCache("allHierarchies")),e=(null!==e&&(this.allHierarchies=e,this.remoteDataIndex++),this.getCache("allProducers")),e=(null!==e&&(this.allProducers=e),this.getCache("allBoutiques"));null!==e&&(this.allBoutiques=e)}checkIfLoaded(){return this.remoteDataIndex>=this.remoteDataNumber&&(this.remoteDataIndex!=this.remoteDataNumber&&_debug_toast("this.remoteDataIndex="+this.remoteDataIndex,"error"),!0)}searchSeriesById(t,e){var i=e.find(e=>parseInt(e.tid)==parseInt(t));if(void 0===i)for(var n of e)if(void 0!==(i=void 0!==n.children?this.searchSeriesById(t,n.children):i))break;return i}findColorById(e){for(var t of this.wineColors.red)if(t.tid==e)return t;for(var i of this.wineColors.white)if(i.tid==e)return i;for(var n of this.wineColors.rose)if(n.tid==e)return n;return null}setSelectedWines(e){vDataSingleton.selectedWines=e;for(var i of vDataSingleton.selectedWines){var t,n=i.aromas.split(",");i.aromas=[];for(t of n){var a=vDataSingleton.searchSeriesById(t,vDataSingleton.aromasSeries);a&&void 0!==a&&i.aromas.push(a)}n=i.appellations.split(",");i.appellations=[];for(let t of n){var o=vDataSingleton.allAppellations.find(e=>parseInt(e.tid)===parseInt(t));o&&void 0!==o&&i.appellations.push(o)}i.color=vDataSingleton.findColorById(i.color);n=i.varieties.split(",");i.varieties=[];for(let t of n){var s=vDataSingleton.allVarieties.find(e=>parseInt(e.tid)===parseInt(t));s&&void 0!==s&&i.varieties.push(s)}}}getWineById(t){return vDataSingleton.selectedWines.find(e=>parseInt(e.nid)===parseInt(t))}}const vDataSingleton=new VData;class VDrupal{constructor(){return VDrupal.instance||(this._data=[],VDrupal.instance=this),VDrupal.instance}getGoogleMapKey(){return new Promise((t,e)=>{jDrupal.viewsLoad("klutchkkarte/"+_localInterface.access_token+"?_format=json").then(e=>{e=e.getResults()[0].keys.split(",")[0];t(e)})})}getWines(i){return new Promise((t,e)=>{jDrupal.viewsLoad("winesapp/"+i+"?_format=json").then(e=>{vDataSingleton.setSelectedWines(e.getResults()),t()})})}getColorsOnline(){return new Promise((t,e)=>{jDrupal.viewsLoad("colorsapp/"+vUserSingleton.settings.langcode+"?_format=json").then(function(e){e=e.getResults();vDataSingleton.setColors(e),t()})})}getVarietesOnline(){return new Promise((t,e)=>{jDrupal.viewsLoad("varietiesapp/?_format=json").then(function(e){vDataSingleton.allVarieties=e.getResults(),vDataSingleton.setCache("allVarieties",vDataSingleton.allVarieties),t()})})}getProducersOnline(){return new Promise((t,e)=>{jDrupal.viewsLoad("producersapp/?_format=json").then(function(e){vDataSingleton.allProducers=e.getResults(),vDataSingleton.setCache("allProducers",vDataSingleton.allProducers),t()})})}getBoutiquesOnline(){return new Promise((t,e)=>{jDrupal.viewsLoad("boutiquesapp/?_format=json").then(function(e){vDataSingleton.allBoutiques=e.getResults(),vDataSingleton.setCache("allBoutiques",vDataSingleton.allBoutiques),t()})})}getAppellationsOnline(){return new Promise((t,e)=>{jDrupal.viewsLoad("appellationsapp/?_format=json").then(function(e){vDataSingleton.allAppellations=e.getResults(),vDataSingleton.setCache("allAppellations",vDataSingleton.allAppellations),t()})})}getHierarchiesOnline(){return new Promise((t,e)=>{jDrupal.viewsLoad("hierarchiesapp/"+vUserSingleton.settings.langcode+"?_format=json").then(function(e){e=e.getResults();vDataSingleton.setHierarchies(e),t()})})}getSeriesOnline(i){return new Promise((t,e)=>{jDrupal.viewsLoad(i+"/"+vUserSingleton.settings.langcode+"?_format=json").then(function(e){e=e.getResults();vDataSingleton.setSeries(e,i),t()})})}getSessionToken(){return new Promise((t,i)=>{$.ajax({url:jDrupal.restPath()+"session/token?_format=json",type:"GET",success:function(e){t(e)},error:function(e,t){DEBUG_MODE&&console.log(t),_release_toast(VLocal.ServerGetResultsError),i()}})})}userLogin(e,n){return new Promise((t,i)=>{$.ajax({url:jDrupal.restPath()+"user/login?_format=json",type:"POST",data:JSON.stringify({name:e,pass:n}),success:function(e){jDrupal.userLoad(e.current_user.uid).then(e=>{t(e)})},error:function(e,t){DEBUG_MODE&&console.log(t),_release_toast(VLocal.ServerGetResultsError),i()}})})}getUsersOnline(){return new Promise(function(t,e){jDrupal.viewsLoad("allusersapp?_format=json").then(function(e){vDataSingleton.allUsers=e.getResults(),vDataSingleton.setCache("allUsers",vDataSingleton.allUsers),t()})})}getServerData(){return new Promise((e,t)=>{0===vDataSingleton.aromasSeries.length&&this.getSeriesOnline("aromasapp").then(()=>{vDataSingleton.remoteDataIndex++}),this.getBoutiquesOnline().then(()=>{vDataSingleton.remoteDataIndex++,vDataSingleton.checkIfLoaded()&&e()}),this.getProducersOnline().then(()=>{vDataSingleton.remoteDataIndex++,vDataSingleton.checkIfLoaded()&&e()}),0===vDataSingleton.wineColors.red.length&&this.getColorsOnline().then(()=>{vDataSingleton.remoteDataIndex++,vDataSingleton.checkIfLoaded()&&e()}),0===vDataSingleton.allVarieties.length&&this.getVarietesOnline().then(()=>{vDataSingleton.remoteDataIndex++,vDataSingleton.checkIfLoaded()&&e()}),0===vDataSingleton.allAppellations.length&&this.getAppellationsOnline().then(()=>{vDataSingleton.remoteDataIndex++,vDataSingleton.checkIfLoaded()&&e()}),0===vDataSingleton.allHierarchies.length&&this.getHierarchiesOnline().then(()=>{vDataSingleton.remoteDataIndex++,vDataSingleton.checkIfLoaded()&&e()}),0===vDataSingleton.foodSeries.length&&this.getSeriesOnline("foodapp").then(()=>{vDataSingleton.remoteDataIndex++,vDataSingleton.checkIfLoaded()&&e()}),this.getUsersOnline(),vDataSingleton.checkIfLoaded()&&e()})}deleteNode(i,n){return new Promise(function(e,t){i.delete(n).then(()=>{_release_toast(VLocal.WineDeleted),VMain.modalHide(),-1==n?VMain.popPage().then(()=>{VMain.popPage().then(e)}):e(n)},()=>{_release_toast(VLocal.ServerGetResultsError),VMain.modalHide(),t()})})}postComment(i,n){return new Promise(function(e,t){new jDrupal.Comment({entity_id:[{target_id:n}],entity_type:[{value:"node"}],comment_type:[{target_id:"wine_comments"}],subject:[{value:i}],comment_body:[{value:i,format:"plain_text"}],field_name:[{value:"comment"}]}).save().then(()=>{e(),_release_toast("comment saved")},e=>{_release_toast(JSON.stringify(e)),t()})})}uploadImage(n,a){return new Promise((t,i)=>{n.data==n.url?t(null):VMain.modalShow("modal-save-wine").then(()=>{let e=()=>{document.getElementById("wine-save-progress-status").style="display:block",$.ajax({url:a,type:"POST",data:vServiceSingleton.dataURItoBlob(n.data),processData:!1,crossDomain:!1,timeout:3e4,cache:!1,headers:{"X-CSRF-Token":vUserSingleton.settings.csrfToken,"Content-Type":"application/octet-stream",Accept:"application/vnd.api+json","Content-Disposition":'form-data; filename="'+n.url+'"'},success:e=>{VMain.modalHide(),t(e.data)},xhr:()=>{var e=Math.round(vServiceSingleton.byteLength(n.data)/1024)/1e3;_debug_toast("image data size : "+e+"Mb");try{var t=new XMLHttpRequest;return t.upload.onprogress=function(e){},t}catch(e){_debug_toast_err(e)}},error:(e,t)=>{VMain.modalHide(),DEBUG_MODE&&console.log(t),"timeout"===t?_release_toast(VLocal.UploadTimeout):_release_toast(VLocal.ServerGetResultsError),i()}})};null==vUserSingleton.settings.csrfToken||""==vUserSingleton.settings.csrfToken?this.getSessionToken().then(()=>{vUserSingleton.settings.csrfToken=csrfToken,e()}):e()})})}uploadImageCordova(a,o){return new Promise((t,i)=>{try{var e=FileTransferManager.init({},function(e){console.log(e),"UPLOADED"==e.state?(console.log("upload: "+e.id+" has been completed successfully"),console.log(e.statusCode,e.serverResponse),t(e)):"FAILED"==e.state?(e.id?console.log("upload: "+e.id+" has failed"):console.error("uploader caught an error: "+e.error),i()):"UPLOADING"==e.state&&(progressValue=e.loaded/e.total,WaveProgress.setProgress(100*e),console.log("uploading: "+e.id+" progress: "+e.progress+"%"))}),n={id:a.url,filePath:"file://"+vServiceSingleton.dataURItoBlob(a.data),fileKey:"file",serverUrl:o,notificationTitle:"Uploading images",headers:{"X-CSRF-Token":vUserSingleton.settings.csrfToken,"Content-Type":"application/octet-stream",Accept:"application/vnd.api+json","Content-Disposition":'form-data; filename="'+a.url+'"'}};e.startUpload(n)}catch(e){_release_toast("FileTransferManager plugin failed:<br>"+e),i()}})}uploadImageCordovaX(s,l,c){return new Promise((t,i)=>{var e=encodeURI(c),n=new FileUploadOptions,a=(n.fileName=l.url,n.mimeType="application/octet-stream",n.httpMethod="POST",{"X-CSRF-Token":vUserSingleton.settings.csrfToken,"Content-Type":"application/octet-stream",Accept:"application/vnd.api+json","Content-Disposition":'form-data; filename="'+l.url+'"'}),o=(n.headers=a,0),a=(s.onprogress=function(e){e.lengthComputable?o=e.loaded/e.total:o++,WaveProgress.setProgress(100*o)},vServiceSingleton.dataURItoBlob(l.data));s.upload(a,e,function(e){_release_toast("Code = "+e.responseCode+"<br>Response = "+e.response+"<br>Sent = "+e.bytesSent),t(e.response)},function(e){_release_toast("An error has occurred: Code = "+e.code+"<br>upload error source "+e.source+"<br>upload error target "+e.target+r.bytesSent),i()},n)})}saveTag(e){return new Promise((t,i)=>{$.ajax({url:jDrupal.restPath()+"taxonomy/term",type:"POST",data:JSON.stringify(e),processData:!0,crossDomain:!1,timeout:1e4,cache:!1,headers:{"X-CSRF-Token":vUserSingleton.settings.csrfToken,"Content-Type":"application/json",Accept:"application/vnd.api+json"},success:e=>{t(e)},error:(e,t)=>{DEBUG_MODE&&console.log(t),"timeout"===t?_release_toast(VLocal.UploadTimeout):_release_toast(VLocal.ServerGetResultsError),i()}})})}hook_rest_pre_process(e,t){console.log(e),console.log(t)}}const vDrupalSingleton=new VDrupal;Object.freeze(vDrupalSingleton);class VAbstractProduct{constructor(e){this.type=e}setCallback(e){this.callback=e}getType(){return this.type}getId(){return this.nid}setName(e){this.name=e}getName(){return""===this.name?"":this.name}getAuthor(){return this.author}getPrice(){return this.price}setPrice(e){this.price=e}getAuthorPic(){return""==this.getAuthor().pic?"css/logo.png":this.getAuthor().pic}getAuthorName(){return this.getAuthor().name}isEditable(){return this.editable}getDate(){return this.publishDate}getImage(){return this.image}getConclusion(){return null==this.conclusion?"":this.conclusion}setConclusion(e){this.conclusion=e}getTaste(){return this.taste}getTasteByKey(e){return this.taste[e]}getTasteKeys(){}getTasteArray(){var e,t=[];for(e of this.getTasteKeys())t.push(this.getTasteByKey(e));return t}setTaste(e,t){this.taste[e]=t}setImage(e){this.image=e}getBoutique(){return this.boutique}getBoutiqueId(){return null!=this.boutique&&0<this.boutique.length?this.boutique.map(e=>e?e.tid:null)[0]:null}getBoutiqueLocation(){return null!=this.boutique&&0<this.boutique.length?this.boutique.map(e=>e?e.location:null)[0]:null}getBoutiqueName(){return null!=this.boutique&&0<this.boutique.length?this.boutique.map(e=>e?e.name:"").join(", "):""}getProducer(){return this.producer}getProducerId(){return null!=this.producer&&0<this.producer.length?this.producer.map(e=>e?e.tid:null)[0]:null}getProducerLocation(){return null!=this.producer&&0<this.producer.length?this.producer.map(e=>e?e.location:null)[0]:null}getProducerText(){return null!=this.producer&&0<this.producer.length?this.producer.map(e=>e?e.name:"").join(", "):""}getAppellations(){return this.appellations}getAppellationsText(){return null!=this.appellations&&0<this.appellations.length?this.appellations.map(e=>e?e.name:"").join(", "):""}getAppellationsIds(){return null!=this.appellations&&0<this.appellations.length?this.appellations.map(e=>e?e.tid:null):[]}updateSelectedAromas(e){if(this.aromas=[],0!=e.length)for(var t of e){var i=vDataSingleton.searchSeriesById(t,vDataSingleton.aromasSeries);this.aromas.push({name:i.name,tid:t})}}getAromas(){return this.aromas}getAromasIds(){return this.aromas.map(e=>e.tid)}validate(t){var e="",i=[];null==t.errors&&null==t.warnings?this.save():(void 0!==t.errors?(i.push(VLocal.Ok),e=t.errors+t.warnings):(e=t.warnings,i.push(VLocal.Cancel),i.push(VLocal.Save)),ons.notification.confirm({title:VLocal.IncompleteInformation,messageHTML:e,buttonLabels:i,cancelable:!1,primaryButtonIndex:1}).then(e=>{1==e&&this.save(t)}))}delete(t=-1){ons.notification.confirm({title:"",messageHTML:this.name+" "+VLocal.WillBeDeleted,buttonLabels:[VLocal.Cancel,VLocal.Delete],cancelable:!0,primaryButtonIndex:1}).then(e=>{console.log(e),1==e&&(VMain.modalShow("modal-custom"),-1==t?vDrupalSingleton.deleteNode(this.node,this.nid).then(()=>{this.callback&&this.callback()}):jDrupal.entityLoad("node",t).then(e=>{vDrupalSingleton.deleteNode(e,t).then(()=>{this.callback&&this.callback()})}))})}createTag(r,l){return new Promise((i,n)=>{if(""===l.name)i();else{var a=l.name.replace(/\s\s+/g," ");let e={};"producer"==r||"boutique"==r?e={vid:[{target_id:r}],name:[{value:a}],field_latlng:[{lat:l.location.lat,lng:l.location.lng}],field_google_place_id:[{value:l.tid}],field_address:[{organization:a,postal_code:l.postcode,country_code:l.country,locality:l.city,address_line1:l.address}]}:"appellation"==r?e={vid:[{target_id:"geography"}],name:[{value:a}]}:"variety"==r&&(e={vid:[{target_id:"wine_varieties"}],name:[{value:a}]});var o=null;"producer"==r?o=vServiceSingleton.searchArrayExact(a,vDataSingleton.allProducers):"boutique"==r?o=vServiceSingleton.searchArrayExact(a,vDataSingleton.allBoutiques):"appellation"==r?o=vServiceSingleton.searchArrayExact(a,vDataSingleton.allAppellations):"variety"==r&&(o=vServiceSingleton.searchArrayExact(a,vDataSingleton.allVarieties));let t=!0;if(0<o.length)for(var s of o)o[0].gid&&(t=!1);t?vDrupalSingleton.saveTag(e).then(e=>{console.log(e);e={tid:e.tid[0].value,name:a};"producer"==r?(vDataSingleton.allProducers.push(e),vDataSingleton.setCache("allProducers",vDataSingleton.allProducers)):"boutique"==r?vDataSingleton.allBoutiques.push(e):"appellation"==r?(vDataSingleton.allAppellations.push(e),vDataSingleton.setCache("allAppellations",vDataSingleton.allAppellations)):"variety"==r&&(vDataSingleton.allVarieties.push(e),vDataSingleton.setCache("allVarieties",vDataSingleton.allVarieties)),i(e)},()=>{VMain.modalHide(),_release_toast(VLocal.WineNotSaved),n()}):i(searchResults[0].tid)}})}}class VSearch{constructor(){return VSearch.instance||(this._data=[],VSearch.instance=this),VSearch.instance}createPerfectWineFilter(){var e,t="0/0";switch(vUserSingleton.settings.organic){case"bio":t="1+2/0+1";break;case"natural":t="1+2/1";break;default:t="0:2/0:1"}if(vUserSingleton.settings.vegan?t+="/1":t+="/0+1",0==vDataSingleton.selectedAromasIds.length?t+="/all":t+="/"+vDataSingleton.selectedAromasIds.join("+"),0==vDataSingleton.selectedFoodIds.length)return t;for(e of vDataSingleton.selectedFoodIds){var i=vDataSingleton.searchSeriesById(e,vDataSingleton.foodSeries),n=Math.ceil(i.acidity+i.fat+i.sugar+i.salt)+1,a=Math.floor(6/(i.bitterness+i.spiciness+1)),n=(t+="/"+(n=5<n?5:n)+":"+(a=5<(a=a<n?n:a)?5:a),i.bitterness+1),a=Math.floor(8/(i.acidity+i.spiciness+1)),n=(t+="/"+n+":"+(a=3<(a=a<n?n:a)?3:a),Math.ceil(i.bitterness+i.fat+i.sugar+i.spiciness)+1),a=Math.floor(7/(i.acidity+i.salt+1)),n=(t+="/"+(n=5<n?5:n)+":"+(a=5<(a=a<n?n:a)?5:a),Math.ceil(i.fat+i.sugar+i.salt+i.bitterness)+1),a=Math.floor(8/(i.acidity+i.spiciness+1)),n=(t+="/"+(n=5<n?5:n)+":"+(a=5<(a=a<n?n:a)?5:a),Math.ceil(i.fat+i.sugar+i.salt+i.bitterness)+1),a=Math.floor(8/(i.acidity+i.spiciness+1)),n=(t+="/"+(n=5<n?5:n)+":"+(a=5<(a=a<n?n:a)?5:a),i.salt+1),a=(t+="/"+n+":3",Math.ceil(i.sugar+i.spiciness)+1),n=5,a=(t+="/"+(a=5<a?5:a)+":"+(n=n<a?a:n),Math.ceil(i.fat/4+i.sugar/4+i.bitterness/2+i.spiciness/3)+1),n=Math.floor(7/(i.acidity+i.salt+1));return t+="/"+(a=5<a?5:a)+":"+(n=5<(n=n<a?a:n)?5:n)}}createWineElement(i,e,t){var n,a=document.createElement("ons-card"),o=(a.style="padding:0px",a.id="wine_"+i.nid,a.setAttribute("modifier","tappable"),document.createElement("div")),s=(o.setAttribute("id","chart-target-"+i.nid),document.createElement("ons-list-item")),r=(s.setAttribute("modifier","nodivider"),s.style="font-size: smaller;",document.createElement("div")),l=(r.classList.add("center"),[]);for(n of i.aromas)n&&n.label&&n.label.rich&&l.push('<img height="32px" src="'+n.label.rich.image.backgroundColor.image+'"/>&nbsp&nbsp');r.innerHTML=l.join(" ");var c,d=document.createElement("div"),p=(d.classList.add("left"),[]);for(c of i.appellations)p.push(c.name);d.innerHTML=p.join(", ");var u=document.createElement("ons-list-header"),g=(u.style="text-transform:none;",u.innerHTML="<strong>"+i.name+" "+i.year+"</strong>",""!==i.producer&&(u.innerHTML+=" "+i.producer),u.setAttribute("modifier","nodivider"),document.createElement("ons-list-item")),h=(g.setAttribute("modifier","nodivider"),g.style="background-color: white!important",g.addEventListener("click",()=>{vCardSingleton.open(i.nid,i.name)}),d.addEventListener("click",()=>{this.openAppellationMap(i)}),r.addEventListener("click",()=>{this.openAromasSankey(i)}),document.createElement("div")),m=(h.classList.add("center"),h.style="padding: 0px 6px 0px 0; background-color: white!important",document.createElement("div")),v=(m.style="margin-left:-14px; position: absolute; height:"+t+"px;-webkit-mask-image: linear-gradient(to right, transparent 0%, black 25%,  black 75%, transparent 100%);",m.innerHTML='<img src="'+jDrupal.settings.sitePath+i.image+'"/>',i.color.code+(parseInt(i.transparency)/5*255).toString(16));o.style="margin-left:auto; margin-right: -6px; height:"+t+"px; width:"+.8*window.innerWidth+"px; background: linear-gradient(to right, transparent,  "+v+")",h.appendChild(m),h.appendChild(o),g.appendChild(h),s.appendChild(d),s.appendChild(r),a.appendChild(u),a.appendChild(g),a.appendChild(s);return setTimeout(()=>{(new VRadar).generateChart(i).then(()=>{var e=document.createElement("div"),t=(e.style="right: 10px;  top: 20px;  position: absolute;",2<parseInt(i.gas)?0:2),t=parseInt(i.sugar)-1+t;e.innerHTML=VLocal.wineSugarRangeNames[5<t?5:t],g.appendChild(e),setTimeout(()=>{VAlcohol.setGauge(i.nid,i.alcohol)},300)})},e<3?100:1e3),a}showWines(){var e=document.getElementById("wines-infinite-list");""!==e.innerHTML?e.refresh():e.delegate={configureItemScope:function(e,t){console.log(e+": "+vDataSingleton.selectedWines[e].nid+" itemScope:"+t)},createItemContent:e=>{var t=vDataSingleton.selectedWines[e];return this.createWineElement(t,e,220)},countItems:()=>(this.showBoutiques(),vDataSingleton.selectedWines.length),calculateItemHeight:function(e){return 220}}}isScrolledIntoView(e){var e=e.getBoundingClientRect(),t=e.top,e=e.bottom;return 0<=t&&e<=window.innerHeight}showBoutiques(){var e=document.getElementById("toast-map"),t=document.getElementById("wines-infinite-list");if(e.visible&&vMapSingleton.boutiquesGoogleMap&&t.parentNode.hasChildNodes()){var n=t.parentNode.childNodes;let e=1,i=n[e];for(;i;){let t=vDataSingleton.selectedWines[e-1];var a,o,s=this.isScrolledIntoView(i),r=vMapSingleton.boutiqueMarkers.map(e=>e.id).indexOf(e);t.boutique&&""!=t.boutique&&s&&r<0&&(a=vDataSingleton.allBoutiques.find(e=>parseInt(e.tid)==parseInt(t.boutique)))&&a.geo&&(o=a.geo.split(";"),vMapSingleton.boutiqueMarkers.push({id:e,marker:new google.maps.Marker({position:{lat:parseFloat(o[0]),lng:parseFloat(o[1])},map:vMapSingleton.boutiquesGoogleMap,icon:BOUTIQUE_ICON})}),(o=document.createElement("div")).style="color:black",o.addEventListener("click",()=>{vCardSingleton.open(t.nid,t.name)}),o.innerHTML="<strong>"+t.name+"</strong><i>"+t.price+"</i><br><b> "+a.name+"</b>",new google.maps.InfoWindow({content:o}).open({anchor:vMapSingleton.boutiqueMarkers[vMapSingleton.boutiqueMarkers.length-1].marker,map:vMapSingleton.boutiquesGoogleMap,shouldFocus:!0})),!s&&-1<r&&vMapSingleton.boutiqueMarkers.splice(r,1)[0].marker.setMap(null),e++,i=n[e]}}}openAppellationMap(e){var t=document.getElementById("map-card");function i(){(t=t||document.getElementById("map-card")).querySelector(".alert-dialog").style.background="transparent",t.querySelector(".alert-dialog").style.width=.9*window.innerWidth+"px",t.querySelector(".alert-dialog").style.width=.9*window.innerWidth+"px",t.querySelector("#appellation-map-canvas").style.filter=VMain.isDarkMode()?"brightness(0.6)":"",vMapSingleton.setGoogleMap("appellation-map-canvas").then(()=>{vMapSingleton.loadAppellation(e,"map-legend")}),t.style.borderRadius="10px"}t?(i(),t.show()):ons.createElement("wine-details-map.html",{append:!0}).then(e=>{e.show().then(i)})}openAromasSankey(e){var t=document.getElementById("sankey-card");function i(){(t=t||document.getElementById("sankey-card")).querySelector(".alert-dialog").style.background="transparent",t.querySelector(".alert-dialog").style.width=.9*window.innerWidth+"px",new VSankey(e),t.querySelector("canvas").style.borderRadius="10px"}t?(i(),t.show()):ons.createElement("wine-details-sankey.html",{append:!0}).then(e=>{e.show().then(i)})}searchWineByTitle(e){console.log(document.getElementById(e).value)}}const vSearchSingleton=new VSearch;Object.freeze(vSearchSingleton);class VBench{constructor(){VBench.instance||(this._data=[],VBench.instance=this);try{this.uid=null==device.uuid?"browser":device.uuid}catch(e){this.uid="browser"}return this.benchMap=new Map,VBench.instance}begin(e){var t=this.benchMap.get(e);void 0===t||null===t.e?this.benchMap.set(e,{b:new Date,e:null}):this.benchMap.set(e,{b:t+new Date,e:null})}end(e){var t=this.benchMap.get(e);return null==t?(this.error(e+" not found"),null):(t.e=new Date,this.log(e,t),this.benchMap.delete(e),t.e-t.b)}log(e,t){console.log("BENCH for "+this.uid+": "+e+" took "+(t.e-t.b)+"ms")}error(e){console.log("BENCH ERROR for "+this.uid+": "+e)}}const vBench=new VBench;Object.freeze(vBench);class VAlcohol{constructor(){}static setGauge(e,t,i=40,n="chart-target-"+e){var a;null===document.getElementById(e)&&((a=document.createElement("div")).style="position:absolute; right: 7px; bottom:15px; ",a.id="gauge-"+e,document.getElementById(n).appendChild(a),n=SVG(a.id).size(i,i),(a=liquidFillGaugeDefaultSettings()).circleThickness=.1,a.circleColor=VIVID,a.textColor=VIVID,a.waveTextColor=VIVID,a.waveColor=VIVID67,a.textVertPosition=.52,a.waveAnimateTime=5e3,a.waveHeight=.1,a.waveAnimate=!0,a.waveCount=2,a.waveOffset=.25,a.textSize=1.1,a.minValue=5,a.maxValue=55,a.displayPercent=!0,loadLiquidFillGauge(n.id(),t,a),document.getElementById(n.id()).style="background-color: white ; border-radius:50%;")}}class VPrompt{constructor(){this.createPrompt(),this.promptTarget=null,this.targetListerner=null,this.fabListerner=null,this.clickCounter=0,VPrompt.instance=this}static destroy(){VPrompt.instance=null,VPrompt.fabListerner=null,VPrompt.promptTarget=null,VPrompt.targetListerner=null,delete VPrompt.instance}createPrompt(){var e;null===document.getElementById("prompt.html")&&((e=document.createElement("template")).id="prompt.html",e.innerHTML='<ons-row id="prompt-content" style="z-index: -1; position:fixed; bottom:0;"><textarea  class="prompt" id="prompt-textarea" rows="1"></textarea></ons-row>',$("#app-body")[0].appendChild(e),ons.createElement(e.id,{append:!0}).then(()=>{var e=document.getElementById("prompt-textarea");e.style.display="none;",e.addEventListener("blur",()=>{document.getElementById("prompt-dialog").hide(),this.blurPrompt("textarea")}),e.addEventListener("input",e=>{e.currentTarget.style.height="",e.currentTarget.style.height=e.currentTarget.scrollHeight+4+"px"})}),(e=document.createElement("template")).id="prompt-dialog.html",e.innerHTML='<ons-dialog cancelable mask-color="rgba(195, 133, 48, 0.0)" id="prompt-dialog" visible="false" animation="none" ><div class="dialog" style="z-index: 20001; position:fixed; top: unset;  bottom: 0px; min-width: unset; transform: unset; min-height: unset; left: unset; right: 0px; height: 44px; width: 44px;" ><div class="dialog-container" style="left:0; right:0; top:0; bottom:0; background-color:'+TRANSPARENT+'" ><ons-fab class="fab-micro" id="prompt-post-fab"><ons-icon icon="fa-send"></ons-icon></ons-fab></div></div></ons-dialog>',$("#app-body")[0].appendChild(e),ons.createElement(e.id,{append:!0}).then(e=>{e.addEventListener("prehide",()=>{this.blurPrompt()}),e.addEventListener("preshow",()=>{this.focusPrompt()})}))}clearPrompt(){document.getElementById("prompt-textarea").value="",document.getElementById("prompt-textarea").style.height="initial",document.getElementById("prompt-content").style.zIndex="-1",document.getElementById("prompt-content").style.display="none",this.promptTarget&&(this.promptTarget.style.display=""),document.getElementById("prompt-dialog").hide(),null!=this.promptTarget&&this.promptTarget.removeEventListener("click",this.targetListerner),document.getElementById("prompt-post-fab").removeEventListener("touchend",this.fabListerner)}blurPrompt(){document.getElementById("prompt-content").style.zIndex="-1",this.promptTarget&&(this.promptTarget.style.display=""),this.clickCounter=0}prompt(){document.getElementById("prompt-dialog").show()}focusPrompt(){document.getElementById("prompt-content").style.zIndex="10000",document.getElementById("prompt-content").style.display="",document.getElementById("prompt-textarea").focus()}bindPrompt(e,t,i){this.targetListerner=document.getElementById(e).addEventListener("click",e=>{this.promptTarget=e.currentTarget;e=null;(e=document.getElementById("prompt-textarea")).style.display="block",e.setAttribute("placeholder",t),this.promptTarget.style.display="none",this.prompt()}),this.fabListerner=document.getElementById("prompt-post-fab").addEventListener("touchend",()=>{this.promptTarget&&(this.promptTarget.style.display="",0==this.clickCounter)&&(this.clickCounter++,i(document.getElementById("prompt-textarea").value))})}}class VCard extends VPrompt{constructor(){return VCard.instance||(super(),(VCard.instance=this).locales={fr:"fr-FR",en:"en-US",es:"es-ES",ru:"ru-RU"},this.pageId="wine-card-page"),VCard.instance}open(e,t){this.createPage(),this.comments=[],this.vWine=new VWine(OPEN),this.vWine.setCallback(()=>{this.clearPrompt(),VMain.pushMainPage({id:"selected-wines.html",prev:"wine-card-page.html"})});VPageFactory.createPage("generate-image-page",'<ons-page id="generate-image-page"><ons-toolbar><div class="left"><ons-back-button></ons-back-button></div><div class="center" id="generate-image-page-title"></div></ons-toolbar></ons-page>'),VMain.pushPage({id:"wine-card.html",title:'" + '+t+' + "'},"fade").then(()=>{this.vWine.load(e).then(()=>{this.showWineCard(),document.getElementById("toggle-footer-1").addEventListener("click",()=>{this.toggleFoooter()}),document.getElementById("toggle-footer-2").addEventListener("click",()=>{this.toggleFoooter()}),vUserSingleton.isAuthenticated()&&_isDebugUser()?(document.getElementById("wine-comments-fake-input").removeAttribute("disabled"),this.bindPrompt("wine-comments-fake",VLocal.PostAComment,e=>{this.postComment(e)})):document.getElementById("wine-comments-fake-input").setAttribute("disabled","true"),document.getElementById("action-sheet-dialog-edit").addEventListener("click",()=>{VMain.popPage().then(()=>{VMain.editWine(this.vWine)})}),document.getElementById("action-sheet-dialog-generate").addEventListener("click",()=>{this.vWine.generateImage()}),document.getElementById("action-sheet-dialog-delete").addEventListener("click",()=>{this.vWine.delete()}),document.getElementById("action-sheet-dialog-share").addEventListener("click",()=>{vUserSingleton.shareUrl()})})})}static showActionSheetDialog(){document.getElementById("action-sheet-dialog").show()}static hideActionSheetDialog(){document.getElementById("action-sheet-dialog").hide()}static destroy(){VCard.instance.clearPrompt(),VCard.instance=null,VCard.comments=null,VCard.vWine=null,delete VCard.instance}createPage(){var e,t,i;null===document.getElementById("wine-card.html")&&((e=document.createElement("template")).id="wine-card.html",i=(new Date).toDateString(),t=_isInReview()?"display:none":"",i='<ons-page id="wine-card-page"><ons-toolbar><div class="left"><ons-back-button></ons-back-button></div><div class="center" style="max-width:90%;" id="wine-card-toolbar-title" ></div><div class="right" style="right: 5px; position: fixed;"><ons-toolbar-button  id="wine-card-edit-button" id="info-button" onclick="VCard.showActionSheetDialog()"><ons-icon icon="md-more-vert" class="list-item__icon"></ons-icon></ons-toolbar-button></div></ons-toolbar><ons-progress-bar style="z-index:10; width:100%; top:0px; position:absolute;" id="wine-card-progressbar" secondary-value="100" class="progressStyle" indeterminate></ons-progress-bar><div id="wine-card-label-div" style="transition: height 0.6s; overflow:hidden; height:100%; width:100%; position:absolute;"><img class="reflect" id="wine-card-label" style="width:100%;" /></div><div id="wine-card-thumbnail-div" style="overflow:hidden; height:100%; width:100%; top:0px; position:absolute;"><img class="reflect" id="wine-card-thumbnail" style="width:100%; filter:blur(20px);" /></div><ons-card modifier="mini" id="footer-card"  style="height:100px; margin-top:-30px; overflow-y: hidden; margin:0; transition: height 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0s; position: absolute; bottom:0px; left:0px; width:100%; border-radius: 10px 10px 0px 0px; background-color:fffffff1" ><ons-list modifier="noborder" style="margin-top:-15px; overflow-y: hidden; height: 100%;"><ons-list-item  id="toggle-footer-1" modifier="nodivider" style="min-height: 10px; height: 0; padding:0; background-color: '+TRANSPARENT+';" ripple><ons-icon icon="md-unfold-more" style="margin-left: 50%;"></ons-icon></ons-list-item><ons-list-item  id="toggle-footer-2"  modifier="nodivider" ripple style="width:100%; border-radius: 10px; padding:0" ><div class="left"><img id="wine-author-avatar" style="border-radius:50%; height:40px; border: 2px solid '+VIVID+"; background-color: "+OPAQUE+';"   src="css/splash.png"></div><div class="center"><p id="wine-author-name"></p></div><div class="right"><p id="wine-author-date">'+i+'</p></div></ons-list-item><ons-list-item  modifier="nodivider" style="width:100%; margin-top:-15px; padding:0"><div id="wine-card-name" style="font-weight: bold;" ></div></ons-list-item><ons-list-item modifier="nodivider" style="width:100%; margin-top:-20px; padding:0; "><div id="wine-card-properties" style="text-aling:justify; overflow-y:auto; width:100%; "></div></ons-list-item><ons-list-item style="'+t+'" modifier="nodivider" id="wine-comments-fake" style="width:100%; margin-top:-20px; padding:0; "><ons-button  modifier="quiet"  id="wine-comments-fake-input"  style="font-size: small; color:grey; padding: 0 10px 0 10px; text-aling:justify; width:98%; margin-left:1%; border: 1px solid '+VIVID+'; border-radius: 5px; ">'+VLocal.PostAComment+'</ons-button></ons-list-item><ons-list-item modifier="nodivider" style="width:100%; margin-top:-20px; padding:0; "><div id="comments-container" style="text-aling:justify; overflow-y:auto; width:100%;"><ons-progress-bar id="wine-comments-progressbar" style="width:100%; height:5px;" secondary-value="100" class="progressStyle" indeterminate></ons-progress-bar><ons-list modifier="noborder" style="margin-top: -5px;"><ons-lazy-repeat id="comments-infinite-list" style="background-color: transparent;"></ons-lazy-repeat></ons-list></div></ons-list-item></ons-list></ons-card><ons-action-sheet id="action-sheet-dialog" cancelable><ons-action-sheet-button id="action-sheet-dialog-share" ontouchend="VCard.hideActionSheetDialog(); " icon="md-square-o">'+VLocal.Share+'</ons-action-sheet-button><ons-action-sheet-button id="action-sheet-dialog-edit" ontouchend="VCard.hideActionSheetDialog(); " icon="md-square-o">'+VLocal.Edit+'</ons-action-sheet-button><ons-action-sheet-button id="action-sheet-dialog-generate" ontouchend="VCard.hideActionSheetDialog(); " icon="md-square-o">'+VLocal.Generate+'</ons-action-sheet-button><ons-action-sheet-button id="action-sheet-dialog-delete" ontouchend="VCard.hideActionSheetDialog(); " modifier="destructive"  icon="md-square-o">'+VLocal.Delete+'</ons-action-sheet-button><ons-action-sheet-button ontouchend="VCard.hideActionSheetDialog();" icon="md-square-o">'+VLocal.Cancel+'</ons-action-sheet-button></ons-action-sheet><ons-popover id="popover-dialog" cancelable direction="down"><ons-list id="popover-list"><ons-list-item class="more-options" tappable ontouchend="VMain.hideDialog(\'popover-dialog\')"><div class="center">'+VLocal.Edit+'</div></ons-list-item><ons-list-item class="more-options" tappable ontouchend="VMain.hideDialog(\'popover-dialog\')"><div class="center">'+VLocal.Delete+'</div></ons-list-item><ons-list-item class="more-options" tappable ontouchend="VMain.hideDialog(\'popover-dialog\')"><div class="center">'+VLocal.Share+"</div></ons-list-item></ons-list></ons-popover></ons-page>",e.innerHTML=i,$("#app-body")[0].appendChild(e))}toggleFoooter(){var e=window.innerHeight-100,t=document.getElementById("footer-card");"100px"==t.style.height?(t.style.height=e+"px",t.firstChild.style.overflowY="auto"):(t.style.height="100px",t.firstChild.style.overflowY="hidden",this.clearPrompt())}loadComments(i){return new Promise((t,e)=>{jDrupal.viewsLoad("commentsapp/"+i+"?_format=json").then(e=>{document.getElementById("wine-comments-progressbar").style.display="none";e=e.getResults();t(e)})})}sortComments(e){return this.comments=e,this.comments}showComments(r){var e=document.getElementById("comments-infinite-list");const l={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};e.delegate={createItemContent:e=>{var t=document.createElement("ons-card"),i=(t.style="padding:0px; margin-left: "+20*r[e].thread+"px;",t.setAttribute("modifier","nodivider tappable"),document.createElement("ons-row")),n=(i.setAttribute("modifier","nodivider"),document.createElement("ons-col")),a=(n.setAttribute("width","50px"),n.innerHTML='<img height="30px" style="border-radius:50%; margin: 8px;" src="'+r[e].picture+'" />',document.createElement("ons-col")),o=(a.innerHTML='<p style = "font-size: smaller"><strong color='+VIVID+">"+r[e].author+"</strong><br>"+r[e].body+"</p>",document.createElement("ons-col")),e=(o.setAttribute("width","50px"),new Date(r[e].date)),e=(o.innerHTML='<p style = "font-size: x-small">'+e.toLocaleString(this.locales[vUserSingleton.settings.langcode],l)+"</p>",document.createElement("ons-row")),s=(e.setAttribute("modifier","nodivider"),document.createElement("ons-button"));return s.setAttribute("style","font-size: small;"),s.setAttribute("modifier","quiet"),s.innerHTML='<ons-icon icon="fa-reply"></ons-icon>',s.addEventListener("click",()=>{this.postComment()}),i.appendChild(n),i.appendChild(a),i.appendChild(o),t.appendChild(i),t.appendChild(e),t},countItems:function(){return r.length},calculateItemHeight:function(e){return 36}},e.refresh()}postComment(t){VMain.modalShow().then(()=>{vTensorFlowSingleton.toxicity([t]).then(()=>{vDrupalSingleton.postComment(t,this.vWine.getId()).then(()=>{var e=new Date;this.comments=[{body:t,picture:vUserSingleton.settings.image,author:vUserSingleton.settings.name,date:e.toLocaleString(this.locales[vUserSingleton.settings.langcode],{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},...this.comments],this.clearPrompt(),this.showComments(this.comments),VMain.modalHide()},()=>{_release_toast(VLocal.UnableToPostMessages),VMain.modalHide()})},e=>{"error"==e?_release_toast(VLocal.UnableToPostMessages):_release_toast(VLocal.CommentViolation),VMain.modalHide()})})}showWineCard(){document.getElementById("wine-card-toolbar-title").innerText=this.vWine.getName();document.getElementById("wine-card-general-page");document.getElementById("wine-author-avatar").src=this.vWine.getAuthorPic(),document.getElementById("wine-card-edit-button").style.display=this.vWine.isEditable()?"":"none";try{document.getElementById("wine-author-name").innerText=this.vWine.getAuthorName()}catch(e){_debug_toast_err(e),_release_toast(VLocal.ServerGetResultsError)}document.getElementById("wine-author-date").innerText=this.vWine.getDate();var t,e=document.getElementById("wine-card-label"),i=(e.src=this.vWine.getImage().url,document.getElementById("wine-card-thumbnail-div"),document.getElementById("wine-card-thumbnail-div")),n=document.getElementById("wine-card-thumbnail");n.src=jDrupal.settings.sitePath+vDataSingleton.getWineById(this.vWine.getId()).image,n.onload=function(){$("#wine-card-thumbnail").reflect({opacity:.7,height:1}),this.style.width="100%",VMain.modalHide()},e.style.display="none",t=e,new Promise(e=>{t.onload=e}).then(()=>{VMain.removeElement(i),document.getElementById("wine-card-progressbar").style="display:none",$("#wine-card-label").reflect({opacity:.7,height:1}),e.nextSibling.style="display:block; width:100%",e.style="display:block; width:100%; margin-bottom:-10px",e.parentNode.style="display:block; width:100%;"}),document.getElementById("wine-card-properties").innerHTML=this.vWine.getConclusion(),this.loadComments(this.vWine.getId()).then(e=>{this.showComments(this.sortComments(e))})}}const vCardSingleton=new VCard;class VAbstractEditor{constructor(){return this.pageId="",null}init(e,t,i){VPageFactory.createPage("camera-"+e+"-page",VPageFactory.buildCameraPage(e)),VMain.setBackground(TRANSPARENT),document.getElementById("splitter-content").load("camera-"+e+"-page.html").then(()=>{document.getElementById("camera-"+e+"-page").firstChild.style="background-color:transparent",vCameraSingleton.init("user"==e?"front":"back"),document.getElementById(e+"-camera-fab").addEventListener("touchend",()=>{vCameraSingleton.takePicture().then(e=>{i(e)})}),document.getElementById(e+"-browse-fab").addEventListener("touchend",()=>{vCameraSingleton.browsePicture().then(e=>{i(e)})}),t||"user"==e||i(null)})}setBackground(e){var t=document.getElementById(this.pageId+"-page");null===e||""===e||e.length<15?t.setAttribute("style","background-color:"+e+"!important;"):t.setAttribute("style",'background-image:url("'+e+'")!important;background-size: cover!important; background-repeat: no-repeat!important; background-position: center!important;')}}class VUserEditor extends VAbstractEditor{constructor(e){super(),this.pageId="camera-user",this.isNew=!vUserSingleton.isAuthenticated()}editUserPicture(){$("#sidemenu-left")[0].close(),this.init("user",this.isNew,t=>{let i=document.createElement("img");i.id="test-img";var e=t.width/t.height;i.src=t.data,i.height=window.innerHeight,i.width=i.height*e,$("#app-body")[0].appendChild(i),VMain.modalShow(),i.addEventListener("load",()=>{vCameraSingleton.hide(),vTensorFlowSingleton.blazeFace(i.id).then(()=>{vTensorFlowSingleton.explicit(i.id).then(()=>{VMain.modalHide(),$("#app-body")[0].removeChild(i),VMain.pushMainPage({id:"selected-wines.html",prev:this.pageId+"-page.html"});try{var e=jDrupal.restPath()+"jsonapi/profile/aromanaut/field_user_photo";vDrupalSingleton.uploadImage(t,e).then(e=>{vUserSingleton.updatePicture(e)},()=>{_release_toast(VLocal.UploadError)},()=>{_release_toast("couldn't upload picture"),VMain.pushMainPage({id:"selected-wines.html",prev:this.pageId+"-page.html"})})}catch(e){_debug_toast_err(e)}},()=>{_release_toast("explicit content"),VMain.modalHide(),$("#app-body")[0].removeChild(i)})},()=>{VMain.modalHide(),$("#app-body")[0].removeChild(i)})})})}prompt(a){var e="",t="";if("signin"==a)e='<ons-input id="username-input" placeholder="'+VLocal.Username+'" modifier="underbar" float></ons-input><br><ons-input id="password-input" placeholder="'+VLocal.Password+'" type="password" float></ons-input>',t=VLocal.SignIn;else if("signup"==a||"edit"==a){var i="edit"==a?"disabled":"",n="edit"==a?vUserSingleton.settings.name:"",o="edit"==a?vUserSingleton.settings.mail:"",e='<ons-list style="background-color:'+TRANSPARENT+'"><ons-list-item modifier="nodivider" ><div class="left"><ons-icon icon="md-face" class="list-item__icon"></ons-icon></div><label class="center"><ons-input '+i+' id="username-input" value="'+n+'" placeholder="'+VLocal.Username+'" modifier="underbar" maxlength="20"  float></ons-input></label></ons-list-item><ons-list-item modifier="nodivider" ><div class="left"><ons-icon icon="md-key" class="list-item__icon"></ons-icon></div><label class="center"><ons-input id="password-input" float maxlength="20" placeholder="'+VLocal.Password+'" type="password"></ons-input></label></ons-list-item>';"edit"==a&&(e+='<ons-list-item modifier="nodivider" ><div class="left"><ons-icon icon="md-key" class="list-item__icon"></ons-icon></div><label class="center"><ons-input id="new-password-input" float maxlength="20" placeholder="'+VLocal.NewPassword+'" type="password"></ons-input></label></ons-list-item>'),e+='<ons-list-item modifier="nodivider" ><div class="left"><ons-icon icon="fa-envelope" class="list-item__icon"></ons-icon></div><label class="center"><ons-input id="email-input" float maxlength="20" value="'+o+'" placeholder="'+VLocal.Email+'"></ons-input></label></ons-list-item></ons-list>',t="signup"==a?VLocal.SignUp:VLocal.Edit}else if("signout"==a)return void ons.notification.confirm({title:VLocal.SignOut,messageHTML:VLocal.YouWillBeSignedOut,buttonLabels:[VLocal.Ok,VLocal.Cancel]}).then(function(e){0==e&&vUserSingleton.signout()});var s=document.getElementById("alert-dialog-"+a),i=(s&&s.parentNode.removeChild(s),'<ons-alert-dialog id="alert-dialog-'+a+'" ><div class="alert-dialog-title">'+t+'</div><div class="alert-dialog-content">'+e+"</div><ons-alert-dialog-button>"+VLocal.Ok+"</ons-alert-dialog-button><ons-alert-dialog-button  ontouchend=\"document.getElementById('alert-dialog-"+a+"').hide()\">"+VLocal.Cancel+"</ons-alert-dialog-button></ons-alert-dialog>");(n=document.createElement("template")).id="alert-dialog-"+a+".html",n.innerHTML=i,$("#app-body")[0].appendChild(n),ons.createElement("alert-dialog-"+a+".html",{append:!0}).then(()=>{(s=document.getElementById("alert-dialog-"+a)).querySelectorAll("ons-alert-dialog-button")[0].addEventListener("click",()=>{var e,t,i,n;"signin"==a?(e=document.getElementById("username-input").value,t=document.getElementById("password-input").value,vUserSingleton.signin(e,t).then(()=>{s.hide()})):"signup"==a?(e=document.getElementById("username-input").value,t=document.getElementById("password-input").value,n=document.getElementById("email-input").value,vUserSingleton.signup(e,t,n).then(()=>{vUserSingleton.signin(e,t).then(()=>{s.hide()})})):"edit"==a&&(t=document.getElementById("password-input").value,i=document.getElementById("new-password-input").value,n=document.getElementById("email-input").value,vUserSingleton.updateMail(n,t),""!=i.replace(" ",""))&&vUserSingleton.updatePassword(t,i)}),s.show(),s.addEventListener("posthide",()=>{s.parentNode.removeChild(s)})})}}class VFoodEditor extends VAbstractEditor{constructor(e=null){super(),this.vFood=e,this.is_new=null===this.vWine,this.initTabs=[!1,!1],this.aromaBurst=null,this.initFoodEditor()}createPage(){var e="edit-food";null===document.getElementById(e+".html")&&(document.createElement("template").id=e+".html")}initFoodEditor(){this.init("food").then(()=>{VPageFactory.buildSaveFoodErrorUls(this.vFood)})}}class VBottleEditor extends VAbstractEditor{constructor(e=null,t=null){super(),this.pageId=null==t?"edit-cellar":"edit-wine";var i=null==e;this.vWine=i?new VWine(null==t?SEALED:OPEN):e,this.init("wine",i,e=>{this.vWine.setCallback(()=>{VMain.pushMainPage({id:"selected-wines.html",prev:this.pageId+"-page.html"})}),this.initBottle(e,t)})}verifyImage(n){return new Promise((e,t)=>{let i=document.createElement("img");i.id="test-img",i.crossOrigin="anonymous",i.src=n.data,$("#app-body")[0].appendChild(i),i.addEventListener("load",()=>{i.height=window.innerHeight,i.style="position:absolute;  left:"+(-i.width+window.innerWidth)/2+"px",vTensorFlowSingleton.classify(i.id).then(()=>{vTensorFlowSingleton.explicit(i.id).then(()=>{$("#app-body")[0].removeChild(i),e()},e=>{_release_toast(VLocal.ExplicitContent+"<br>"+e),$("#app-body")[0].removeChild(i),t()})},()=>{_release_toast(VLocal.NotABottle),$("#app-body")[0].removeChild(i),t()})})})}recognizeImage(e){vCameraSingleton.toDataURL(e.data).then(t=>{(async()=>{try{await tessWorker.initialize("fra");var e=await tessWorker.recognize(t.data);console.log(e),_release_toast(e.text)}catch(e){_debug_toast_err(e)}})()})}initBottle(e,t){vDrupalSingleton.getAppellationsOnline().then(()=>{}),VPageFactory.createPage(this.pageId,this.buildMainHTML());let i=()=>{VMain.pushPage({id:this.pageId+".html"}).then(()=>{VMain.setBackground(MILKY),$(document.getElementById("wine-boutique")).selectize(new SelectizeOptions("boutique",vDataSingleton.allBoutiques,[this.vWine.getBoutiqueId()],1)),$(document.getElementById("wine-producer")).selectize(new SelectizeOptions("producer",vDataSingleton.allProducers,[this.vWine.getProducerId()],1)),$(document.getElementById("wine-varieties")).selectize(new SelectizeOptions("varieties",vDataSingleton.allVarieties,this.vWine.getVarietiesIds(),20)),$(document.getElementById("wine-appellation")).selectize(new SelectizeOptions("appellation",vDataSingleton.allAppellations,this.vWine.getAppellationsIds(),3)),$("input").focus(function(){$("html, body").animate({scrollTop:$(this).offset().top+"px"},"fast")}),$.extend($(document.getElementById("#wine-name input")),new InputOptions("name",e=>{this.vWine.setName(e)})),$.extend($(document.getElementById("#wine-vintage input")),new InputOptions("vintage",e=>{this.vWine.setVintage(e)})),$.extend($(document.getElementById("#wine-alcohol input")),new InputOptions("alcohol",e=>{this.vWine.setAlcohol(e)})),$.extend($(document.getElementById("#wine-stock input")),new InputOptions("stock",e=>{this.vWine.setStock(e)})),document.getElementById("wine-tasting-date").addEventListener("blur",()=>{this.vWine.setTastingDate(document.getElementById("wine-tasting-date").value)}),this.vWine.isOpen()?document.getElementById("wine-tasting-date").value=this.vWine.getTastingDate():($(".save-wine-button").on("click",()=>{this.vWine.validate(VPageFactory.buildSaveWineErrorUls(this.vWine))}),document.getElementById("wine-price").value=this.vWine.getPrice(),document.getElementById("choose-currency").value=this.vWine.getCurrency(),$.extend($(document.getElementById("#wine-price input")),new InputOptions("price",e=>{this.vWine.setStock(e)})),document.getElementById(this.pageId+"-page").addEventListener("show",e=>{this.setBackground(this.vWine.getImage().data)})),document.getElementById("wine-vintage").value=this.vWine.getVintage(),document.getElementById("wine-name").value=this.vWine.getName(),document.getElementById("wine-alcohol").value=this.vWine.getAlcohol(),document.getElementById("wine-appellation").value=this.vWine.getAppellationsText(),document.getElementById("wine-producer").value=this.vWine.getProducerText(),document.getElementById("wine-boutique").value=this.vWine.getBoutiqueName(),document.getElementById("wine-varieties").value=this.vWine.getVarietiesText(),document.getElementById("wine-bio").value=this.vWine.getBio(),document.getElementById("wine-sulfites").value=this.vWine.getSulfites(),document.getElementById("wine-vegan").value=this.vWine.getVegan(),document.getElementById("wine-stock").value=this.vWine.getStock(),document.getElementById("wine-bio").addEventListener("change",e=>{this.vWine.setBio(e.target.value)}),document.getElementById("wine-sulfites").addEventListener("change",e=>{this.vWine.setSulfites(e.target.value)}),document.getElementById("wine-vegan").addEventListener("change",e=>{this.vWine.setVegan(e.target.value)}),t&&t()})};e?void 0===e||""===e||"css/splash.png"===e||"default"===e?this.vWine.setImage({data:"css/splash.png",url:"css/splash.png"}):VMain.modalShow().then(()=>{document.getElementById("modal-text").innerHTML=VLocal.ProcessingImage,this.verifyImage(e).then(()=>{this.vWine.setImage(e),VMain.modalHide(),i()},()=>{VMain.modalHide(),this.vWine.setImage(null)})}):(e=this.vWine.getImage(),i())}buildMainHTML(){return'<ons-page id="'+this.pageId+'-page" class="page__transparent">'+VPageFactory.buildCancelFab(this.pageId,-10)+'<ons-list modifier="noborder" style="padding: 0; width: 100%; margin-top: 40px; background-color:'+TRANSPARENT+'">'+VPageFactory.buildGeneralListItems()+VPageFactory.buildPriceListItem()+VPageFactory.buildSaveFab(-10)+VPageFactory.buildStockListItem()+VPageFactory.buildBottomListItem()+"</ons-list></ons-page>"}}class VWineEditor extends VBottleEditor{constructor(e=null){VPageFactory.createPage("edit-wine-page-general",VPageFactory.buildWineGeneralPage("edit-wine-page-general")),VPageFactory.createPage("edit-wine-page-visual",VPageFactory.buildWineVisualPage("edit-wine-page-visual")),VPageFactory.createPage("edit-wine-page-olfaction",VPageFactory.buildWineOlfactionPage("edit-wine-page-olfaction")),VPageFactory.createPage("edit-wine-page-taste",VPageFactory.buildWineTastePage("edit-wine-page-taste")),VPageFactory.createPage("edit-wine-page-conclusion",VPageFactory.buildWineConclusionPage("edit-wine-page-conclusion")),super(e,()=>{this.initWine()})}buildMainHTML(){return'<ons-page id="'+this.pageId+'-page" class="page__transparent">'+VPageFactory.buildCancelFab(this.pageId,30)+VPageFactory.buildWinePageTabbar()+"</ons-page>"}initWine(){document.getElementById("edit-wine-page-general").addEventListener("show",e=>{VMain.setBackground(MILKY),this.setBackground(this.vWine.getImage().data)}),this.initTabs=[!1,!1,!1,!1,!1],this.aromaBurst=null,document.getElementById("edit-wine-tabbar").addEventListener("prechange",e=>{switch(e.index){case 0:vCameraSingleton.hide(),VMain.setBackground(MILKY),this.setBackground(this.vWine.getImage().data);break;case 1:if(vCameraSingleton.show(),VMain.setBackground(TRANSPARENT),this.setBackground(TRANSPARENT),!this.initTabs[e.index]){var t=document.getElementById("edit-wine-page-visual"),i=(t.firstChild.style="background-color:transparent",document.getElementById("color-transparency-range")),n=(i.parentNode.parentNode.showItems().then(()=>{i.value=128+31*(this.vWine.getTransparency()-1)}),document.getElementById("color-particles-range")),a=(document.getElementById("color-particles-range").parentNode.parentNode.showItems().then(()=>{n.value=49*(this.vWine.getParticles()-1)}),document.getElementById("wine-glass")),o=(null===a&&((a=document.createElement("img")).id="wine-glass",a.src="css/glass.png",t.appendChild(a),a.addEventListener("load",()=>{var e=a.width/a.height;this.originalGlassWidth=a.width,this.originalGlassHeight=a.height,a.height=t.clientHeight,a.width=a.height*e,a.style="z-index: 999; position:absolute; left:50%; margin-left:-"+a.width/2+"px; bottom:0px",this.updateWineglass()})),document.getElementById("red-palette")),s=document.getElementById("white-palette"),r=document.getElementById("rose-palette");i.addEventListener("change",e=>{this.vWine.setTransparency(Math.round((parseInt(e.target.value)-127)/33)+1),this.updateWineglass()}),n.addEventListener("change",e=>{this.vWine.setParticles(Math.ceil(parseInt(e.target.value)/33)),this.updateWineglass()});for(var l=0;l<3;l++){var c,d=[],p=null;0==l?(d=vDataSingleton.wineColors.red,p=o):1==l?(d=vDataSingleton.wineColors.white,p=s):2==l&&(d=vDataSingleton.wineColors.rose,p=r);for(c of d){var u=document.createElement("ons-speed-dial-item");u.innerHTML=c.name,u.color=c,u.style="font-size:15px; border-radius:10px; margin-right:-20px; width:80px; background: "+c.code,u.addEventListener("touchend",e=>{this.vWine.setColor(e.target.color),this.updateWineglass()}),p.appendChild(u)}p.addEventListener("touchend",function(){this==o?(s.hideItems(),r.hideItems()):this==r?(s.hideItems(),o.hideItems()):this==s&&(o.hideItems(),r.hideItems())})}o.showItems()}break;case 2:if(vCameraSingleton.hide(),VMain.setBackground(OPAQUE),this.setBackground(OPAQUE),!this.initTabs[e.index]){var g,h=document.getElementById("olfaction-intensity-range");h.value=20*this.vWine.getIntensity(),h.addEventListener("change",e=>{this.vWine.setIntensity(Math.round(e.target.value/25)+1),document.getElementById("intensity-checked").checked=0<this.vWine.getIntensity(),document.getElementById("intensity-range-link").innerHTML=VLocal.wineIntensityRangeNames[this.vWine.getIntensity()-1]});for(g of this.vWine.getAromas())vDataSingleton.selectedAromasIds.push(g.tid);vDataSingleton.selectedAromasIds=[],this.aromaBurst=new VBurst("sunburstchart",this.vWine)}break;case 3:vCameraSingleton.hide(),VMain.setBackground(OPAQUE),this.setBackground(OPAQUE),this.initTabs[e.index]||(new VRadar).generateEditableChart(this.vWine,"taste-radar").then(()=>{});break;case 4:vCameraSingleton.hide(),VMain.setBackground(MILKY),this.setBackground(this.vWine.getImage().data),this.initTabs[e.index]||($(".save-wine-button").on("click",()=>{null!=this.aromaBurst&&this.vWine.updateSelectedAromas(this.aromaBurst.getSelectedItemsIds()),this.vWine.validate(VPageFactory.buildSaveWineErrorUls(this.vWine))}),document.getElementById("wine-food"),$(document.getElementById("wine-food")).selectize(new SelectizeOptions("food",vDataSingleton.allFood,this.vWine.getFoodIds(),20,e=>{this.vWine.food=[];for(var t of e)this.vWine.food.push(vDataSingleton.searchSeriesById(t,vDataSingleton.foodSeries))})),$.extend($(document.getElementById("#wine-conclusion input")),new InputOptions("conclusion",e=>{this.vWine.setConclusion(e)})),$.extend($(document.getElementById("#wine-price input")),new InputOptions("price",e=>{this.vWine.setPrice(e)})),document.getElementById("wine-conclusion").text=this.vWine.getConclusion(),document.getElementById("wine-price").value=this.vWine.getPrice(),document.getElementById("choose-currency").value=this.vWine.getCurrency(),document.getElementById("choose-currency").addEventListener("change",e=>{this.vWine.setCurrency(e.target.value)}))}this.initTabs[e.index]=!0})}updateWineglass(){var e=document.getElementById("color-transparency-range"),t=document.getElementById("color-particles-range"),i=this.vWine.getColor().code+parseInt(e.value).toString(16),n=t.value,e=document.getElementById("edit-wine-page-visual");if(null!==e){var a,t=document.getElementById("drawing");null!==t&&e.removeChild(t),(t=document.createElement("div")).id="drawing";for(var o=document.getElementById("wine-glass").width/this.originalGlassWidth,t=(t.style="position:absolute; width:"+e.clientWidth+"px; height: "+e.clientHeight+"px; margin-top: 15px;",e.appendChild(t),(a=SVG("drawing").size(e.clientWidth,e.clientHeight)).path(this.wineSpot)),s=180*o,r=(t.size(s,200*o),i.substr(0,7)),l=parseInt(i.substr(7,2),16)/255,c=vServiceSingleton.hexToRgb(r),d=254<(d=c.r+6)?255:d,p=254<(p=c.g+6)?255:p,c=254<(c=c.b+6)?255:c,u=vServiceSingleton.rgbToHex(d,p,c),d=a.gradient("radial",e=>{e.at({offset:.3,color:r,opacity:l}),e.at({offset:.85,color:u,opacity:.99*l}),e.at({offset:1,color:u,opacity:0})}),g=(e.clientWidth-s)/2,h=16*o,m=(t.fill(d).move(g,h),Math.floor(Math.sqrt(n))),v=0;v<10*n;v++){var y=a.path("M "+vServiceSingleton.getRandomInt(0,m)+","+vServiceSingleton.getRandomInt(0,m)+" "+vServiceSingleton.getRandomInt(0,m)+","+vServiceSingleton.getRandomInt(0,m)+" "+vServiceSingleton.getRandomInt(0,m)+","+vServiceSingleton.getRandomInt(0,m)+" "+vServiceSingleton.getRandomInt(0,m)+","+vServiceSingleton.getRandomInt(0,m)+" Z"),f=s/2-20,b=vServiceSingleton.getRandomPolar(f);y.fill(i).move(b.x+g+f+17,b.y+h+f+32)}}}wineSpot="M2.7,108.4c-0.4,7.6-0.3,16.4-0.3,16.4c0,0.4,0.1,4.5,0.3,7.6c0.7,13.4,4.3,24.9,4.5,25.8c1.6,5.1,5.3,15.5,13.1,26.8c2.9,4.2,6.1,8.8,11.6,13.6c6.5,5.7,12.5,8.7,16.9,10.9c9,4.4,16.5,6.1,18.7,6.6c7.9,1.7,13.9,1.7,20.5,1.8c7.2,0,12.7,0.1,20-1.5c8.6-1.9,14.8-5,18.9-7.1c2.4-1.2,9.3-4.9,17.2-11.4c3.8-3.1,8.6-7.1,13.1-13.1c5.8-7.7,8-14.3,11.9-26.3c2.6-7.9,5.1-15.9,5.3-25.8c0-0.5,0-0.5,0-7.8c0-10.1,0-16.3,0-16.7c0-3.8-1.3-41.4-30.1-68.7c-6.6-6.3-26.3-25.1-56.3-25c-30.1,0-49.9,19-55.8,24.8C32.2,39.2,5,65.3,2.7,108.4z"}class VWine extends VAbstractProduct{constructor(e=!0){super("wine"),Object.assign(this,this.reset()),this.willBeOpen=e}originalGlassWidth=0;originalGlassHeight=0;getTasteKeys(){return["acidity","bitterness","salt","sugar","body","persistence","gas","tannins","astringency"]}reset(){var e=new Date;return{editable:!0,call:0,nid:-1,open:!1,author:jDrupal.currentUser().id(),name:"Château Paris",vintage:e.getFullYear(),publishDate:vServiceSingleton.date_str(e),tastingDate:vServiceSingleton.date_str(e),alcohol:13,appellations:[null],producer:[null],boutique:[null],varieties:[null],bio:{value:0,name:VLocal.wineBioRangeNames[0]},sulfites:{value:0,name:VLocal.wineSulfitesRangeNames[0]},vegan:{value:0,name:VLocal.wineVeganRangeNames[0]},aromas:[{tid:0,name:"Grape"}],intensity:1,visual:{transparency:3,particles:1},color:vDataSingleton.wineColors.red[0],taste:{sugar:1,salt:1,tannins:1,astringency:1,persistence:1,bitterness:1,acidity:1,body:1,gas:1},conclusion:"",image:null,price:10,stock:0,currency:"EUR",food:[{tid:0,name:"French fries"}],entity:null}}decreaseStock(){return new Promise((e,t)=>{this.node.entity.field_stock_counter[0].value=this.stock-1,this.node.save().then(()=>{e(--this.stock)})})}getStock(){return null===this.stock?0:this.stock}setStock(e){this.stock=e}isOpen(){return this.open|this.willBeOpen}wasOpen(){return this.open}getTastingDate(){return this.tastingDate}setTastingDate(e){this.tastingDate=e}getBio(){return this.bio.value}setBio(e){return this.bio.value=e}getSulfites(){return this.sulfites.value}setSulfites(e){this.sulfites.value=e}getVegan(){return this.vegan.value}setVegan(e){this.vegan.value=e}getVintage(){return this.vintage}setVintage(e){this.vintage=e}getCurrency(){return this.currency}setCurrency(e){this.currency=e}getAlcohol(){return this.alcohol}setAlcohol(e){this.alcohol=e}getVarieties(){return this.varieties}getVarietiesText(){return null!=this.getVarieties()&&0<this.varieties.length?this.varieties.map(e=>e?e.name:"").join(", "):""}getVarietiesIds(){return null!=this.getVarieties()&&0<this.varieties.length?this.varieties.map(e=>e?e.tid:null):[]}getFood(){return this.food}getFoodText(){return null!=this.getFood()&&0<this.food.length?this.food.map(e=>e?e.name:"").join(", "):""}getFoodIds(){return null!=this.getFood()&&0<this.varieties.length?this.food.map(e=>e?e.tid:null):[]}getTransparency(){return this.visual.transparency}setTransparency(e){this.visual.transparency=e}getParticles(){return this.visual.particles}setParticles(e){this.visual.particles=e}getColor(){return this.color}setColor(e){this.color=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getAromas(){return this.aromas}load(t){return new Promise((I,e)=>{VMain.modalShow("modal-custom"),jDrupal.entityLoad("node",t).then(i=>{var e=[];for(let t of i.entity.field_grape_varieties)e.push(vDataSingleton.allVarieties.find(e=>parseInt(e.tid)===parseInt(t.target_id)));var n=[];for(let t of i.entity.field_wine_appellation)n.push(vDataSingleton.allAppellations.find(e=>parseInt(e.tid)===parseInt(t.target_id)));var a=[];for(let t of i.entity.field_producer)a.push(vDataSingleton.allProducers.find(e=>parseInt(e.tid)==parseInt(t.target_id)));var o=[];for(let t of i.entity.field_boutique)o.push(vDataSingleton.allBoutiques.find(e=>parseInt(e.tid)==parseInt(t.target_id)));var t,s=[];for(t of i.entity.field_wine_aromas)s.push(vDataSingleton.searchSeriesById(t.target_id,vDataSingleton.aromasSeries));var r,l=[];for(r of i.entity.field_food_pairing)l.push(vDataSingleton.searchSeriesById(r.target_id,vDataSingleton.foodSeries));var c=null,d=(0<i.entity.field_wine_color.length&&null==(c=null==(c=vDataSingleton.wineColors.red.find(e=>parseInt(e.tid)==parseInt(i.entity.field_wine_color[0].target_id)))?vDataSingleton.wineColors.white.find(e=>parseInt(e.tid)==parseInt(i.entity.field_wine_color[0].target_id)):c)&&(c=vDataSingleton.wineColors.rose.find(e=>parseInt(e.tid)==parseInt(i.entity.field_wine_color[0].target_id))),(new Date).toDateString()),p=(0<i.entity.field_tasting_date.length&&(d=new Date(i.entity.created[0].value).toDateString()),0),u=(0<i.entity.field_tasting_date.length&&(p=i.entity.field_tasting_date[0].value),""),g=(0<i.entity.field_conclusion.length&&(u=i.entity.field_conclusion[0].value),0),h=(0<i.entity.field_wine_bio.length&&(g=parseInt(i.entity.field_wine_bio[0].value)),!1),m=(void 0!==i.entity.field_vegan&&0<i.entity.field_vegan.length&&(h=1==i.entity.field_vegan[0].value),!0),v=(0<i.entity.field_open.length&&(m=1==i.entity.field_open[0].value),0),y=(0<i.entity.field_wine_sulfites.length&&(v=parseInt(i.entity.field_wine_sulfites[0].value)),0),f=(0<i.entity.field_vintage.length&&(y=parseInt(i.entity.field_vintage[0].value)),0),b=(0<i.entity.field_alcohol.length&&(f=parseFloat(i.entity.field_alcohol[0].value)),"css/splash.png"),w=null,S=(0<i.entity.field_wine_label.length&&(b=i.entity.field_wine_label[0].url,w=i.entity.field_wine_label[0]),0),A="EUR",E=(0<i.entity.field_bottle_price.length&&(S=parseFloat(i.entity.field_bottle_price[0].number),A=i.entity.field_bottle_price[0].currency_code),0),V=(null!=i.entity.field_stock_counter&&0<i.entity.field_stock_counter.length&&(E=parseInt(i.entity.field_stock_counter[0].value)),i.entity.uid[0].target_id);Object.assign(this,{editable:!1,open:m,call:0,nid:parseInt(i.entity.nid[0].value),name:i.entity.title[0].value,author:null,vintage:y,publishDate:d,tastingDate:p,alcohol:f,appellations:n,producer:a,boutique:o,varieties:e,bio:{value:g,name:VLocal.wineBioRangeNames[g]},sulfites:{value:v,name:VLocal.wineSulfitesRangeNames[v]},vegan:{value:h,name:VLocal.wineVeganRangeNames[h]},aromas:s,intensity:parseInt(i.entity.field_wine_intensity[0].value),visual:{transparency:parseInt(i.entity.field_wine_transparency[0].value),particles:parseInt(i.entity.field_wine_particules[0].value)},color:c,taste:{sugar:parseInt(i.entity.field_wine_sugar[0].value),salt:parseInt(i.entity.field_wine_salt[0].value),tannins:parseInt(i.entity.field_wine_tannins[0].value),astringency:parseInt(i.entity.field_wine_astringency[0].value),persistence:parseInt(i.entity.field_wine_persistence[0].value),bitterness:parseInt(i.entity.field_wine_bitterness[0].value),acidity:parseInt(i.entity.field_wine_acidity[0].value),gas:parseInt(i.entity.field_wine_gas[0].value),body:parseInt(i.entity.field_wine_body[0].value)},conclusion:u,image:{data:b,url:b,info:w},price:S,currency:A,stock:E,food:l,node:i}),jDrupal.viewsLoad("authorapp/"+V+"?_format=json").then(e=>{e=e.getResults();0==e.length?this.author={uid:-1,name:VLocal.Unknown,pic:""}:(this.author=e[0],this.editable=!(!_isDebugUser()&&this.author.uid!=jDrupal.currentUser().id()&&1!=jDrupal.currentUser().id())),VMain.modalHide(),I()})})},()=>{_release_toast(VLocal.ServerGetResultsError),reject()})}createNewNode(){!this.wasOpen()&&this.isOpen()&&0<this.getStock()&&this.stock--;var e,t=[];for(e of this.aromas)e&&t.push({target_id:e.tid});var i,n=[];for(i of this.varieties)i&&n.push({target_id:i.tid});var a,o=[];for(a of this.appellations)a&&o.push({target_id:a.tid});var s,r=[];for(s of this.food)s&&r.push({target_id:s.tid});var l,c=[];for(l of this.producer)l&&c.push({target_id:l.tid});var d,p=[];for(d of this.boutique)d&&p.push({target_id:d.tid});var u=new jDrupal.Node({type:[{target_id:"wine"}],title:[{value:this.name}],field_conclusion:[{value:this.conclusion}],field_vintage:[{value:this.vintage}],field_alcohol:[{value:this.alcohol}],field_bottle_price:[{number:this.price,currency_code:this.currency}],field_stock_counter:[{value:parseInt(this.stock)}],field_wine_aromas:t,field_producer:c,field_boutique:p,field_tasting_date:[{value:this.tastingDate}],field_grape_varieties:n,field_wine_appellation:o,field_food_pairing:r,field_wine_transparency:[{value:this.visual.transparency}],field_wine_particules:[{value:this.visual.particles}],field_wine_gas:[{value:this.taste.gas}],field_wine_body:[{value:this.taste.body}],field_wine_acidity:[{value:this.taste.acidity}],field_wine_bitterness:[{value:this.taste.bitterness}],field_wine_astringency:[{value:this.taste.astringency}],field_wine_tannins:[{value:this.taste.tannins}],field_wine_sugar:[{value:this.taste.sugar}],field_wine_salt:[{value:this.taste.salt}],field_wine_persistence:[{value:this.taste.persistence}],field_wine_intensity:[{value:this.intensity}],field_wine_bio:[{value:this.bio.value}],field_wine_sulfites:[{value:this.sulfites.value}],field_wine_color:[{target_id:this.color.tid}],field_wine_label:[{target_id:null}],field_open:[{value:this.isOpen()}],field_vegan:[{value:this.vegan.value}],nid:[{value:this.nid}]});return this.nid<0&&delete u.entity.nid,u}save(t){var e,i,n,a;!t||(e=t.producer,i=t.boutique,n=t.appellations,a=t.varieties,0==e.length&&0==i.length&&0==n.length&&0==a.length)?this.tidsCreated():0<e.length?this.createTag("producer",e[0]).then(e=>{this.producer.push(e),this.tidsCreated()}):0<i.length?this.createTag("boutique",i[0]).then(e=>{this.boutique.push(e),this.tidsCreated()}):0<n.length?this.createTag("appellation",n.pop()).then(e=>{this.appellations.push(e),t.appellations=n,this.save(t)}):0<a.length&&this.createTag("variety",a.pop()).then(e=>{this.varieties.push(e),t.varieties=a,this.save(t)})}tidsCreated(){var t=this.createNewNode(),e=jDrupal.restPath()+"jsonapi/node/"+this.getType()+"/field_"+this.getType()+"_label",i=this.getImage();vDrupalSingleton.uploadImage(i,e).then(e=>{console.log("width"+this.getImage().width),null==e?delete t.entity.field_wine_label:t.entity.field_wine_label=[{target_id:e.attributes.drupal_internal__fid,alt:"",title:e.attributes.filename,width:this.getImage().width,height:this.getImage().height,target_type:"file",target_uuid:e.id,url:jDrupal.restPath()+e.attributes.uri.url}],t.save().then(e=>{_release_toast(VLocal.WineSaved),this.callback&&this.callback()},()=>{VMain.modalHide(),VMain.setBackground(OPAQUE),_release_toast(VLocal.WineNotSaved)})},()=>{VMain.modalHide(),_release_toast(VLocal.UnableToConnect)})}previewLabel(e){var t=new FormData($("#wine-label-form")[0]);if(1e5<t.get("img").size/1024){for(var i of t.keys())t.delete(i);_release_toast("File too big!")}else{var e=e.target.files[0],n=new FileReader;e&&n.readAsDataURL(e),n.addEventListener("load",()=>{ABCamera.mode="photo",ABCamera.takePicture(n.result)},!1)}}generateImage(){let e="<strong>"+this.name+" "+this.vintage+"</strong>";""!==this.producer&&(e+=" "+this.producer.name),VMain.pushPage({id:"generate-image-page.html",title:e},"fade").then(()=>{let e=vDataSingleton.selectedWines.find(e=>e.nid==this.nid);var t=document.getElementById("generate-image-page"),i=document.getElementById("image-export"),n=(null!==i&&t.removeChild(i),(i=document.createElement("div")).id="image-export",i.style="padding-top:40px; height:100%",document.createElement("div")),a=(n.setAttribute("id","chart_generate_"+this.nid),document.createElement("ons-list-element")),o=document.createElement("div"),s=(o.classList.add("center"),o.style="padding: 0px 6px 0px 0; background-color: white!important",document.createElement("div")),r=(s.style="margin-left:-14px; position: absolute; height:220px;-webkit-mask-image: linear-gradient(to right, transparent 0%, black 25%,  black 75%, transparent 100%);",s.innerHTML='<img src="'+this.image.url+'" style="height:220px;" width: '+window.innerWidth+'px;"/>',this.color.code+(parseInt(this.visual.transparency)/5*255).toString(16)),r=(n.style="margin-left:auto; margin-right: -6px; height:220px; width:"+.8*window.innerWidth+"px; background: linear-gradient(to right, transparent,  "+r+")",o.appendChild(s),o.appendChild(n),document.createElement("div")),l=(r.style='width:"'+window.outerWidth+'"px; height:220px;',r.id="appellation-map-"+this.nid,document.createElement("div")),s=(l.id="wine-generate-sankey-"+this.nid,l.classList.add("center"),l.style="height: "+(window.innerHeight-440-40)+"px; width: "+window.innerWidth+"px",setTimeout(()=>{new VSankey(this,l.id)},100),a.appendChild(o),i.appendChild(a),i.appendChild(r),i.appendChild(l),t.appendChild(i),new VRadar);vMapSingleton.setGoogleMap(r.id).then(()=>{vMapSingleton.loadAppellation(e,"map-legend")}),s.generateChart(e,"",this.nid,"chart_generate_"+this.nid).then(()=>{var e=document.createElement("div"),t=(e.style="right: 10px;  top: 20px;  position: absolute;",2<parseInt(this.taste.gas)?0:2),t=parseInt(this.taste.sugar)-1+t;e.innerHTML=VLocal.wineSugarRangeNames[5<t?5:t],a.appendChild(e),setTimeout(()=>{VAlcohol.setGauge("generate-gauge-"+this.nid,this.alcohol,40,"chart_generate_"+this.nid)})},100)})}}class VBurst{constructor(e,t){this.sunBurstChart=null;var i=360,n=window.innerWidth*window.innerHeight,i=n<=181760?30:n<=250125?20:n<=304704?15:n<=786432?10:5,n=("wine"==t||"wine"==t.type?(this.selectedIds="string"==typeof t?vDataSingleton.selectedAromasIds:t.getAromasIds(),this.sunburstOptions={tooltip:null,backgroundColor:OPAQUE,aria:{show:!1},sort:null,downplay:null,highlight:null,emphasis:null,nodeClick:!1,highlightPolicy:"none",series:{zlevel:2,type:"sunburst",emphasis:{focus:"descendant"},data:vDataSingleton.aromasSeries,center:["50%","50%"],radius:[0,"80%"],label:{fontSize:10,formatter:function(e){return 4==e.treePathInfo.length?["{image|}"].join(""):e.name}},levels:[{},{r0:"10%",r:"45%",itemStyle:{borderWidth:2},label:{rotate:"0",align:"center"}},{minAngle:i,r0:"45%",r:"85%",label:{minAngle:i,rotate:"0",align:"center"}},{r0:"85%",r:"95%",minAngle:i,label:{minAngle:i,padding:3,rotate:0},itemStyle:{borderWidth:3,opacity:.2}}]}}):(this.selectedIds=vDataSingleton.selectedFoodIds,this.sunburstOptions={tooltip:null,aria:{show:!0},sort:null,series:{zlevel:2,type:"sunburst",emphasis:{focus:"descendant"},data:vDataSingleton.foodSeries,center:["50%","50%"],radius:[0,"80%"],label:{fontSize:10,formatter:function(e){return 4==e.treePathInfo.length?["{image|}"].join(""):e.name}},levels:[{},{r0:"10%",r:"45%",itemStyle:{borderWidth:2},label:{rotate:"0",align:"center"}},{minAngle:i,r0:"45%",r:"85%",label:{minAngle:i,rotate:"0",align:"center"}},{r0:"85%",r:"95%",minAngle:i,label:{minAngle:i,padding:3,rotate:0},itemStyle:{borderWidth:3,opacity:.2}}]}}),this.divElement=document.getElementById(e),this.sunBurstChart=echarts.init(this.divElement,"fruit"),this.sunBurstChart.setOption(this.sunburstOptions,!0),this.sunBurstChart.on("click",e=>{"edge"===e.dataType&&console.log("edge"),"series"==e.componentType&&4==(e={depth:e.treePathInfo.length,direction:e.dataType,data:e.data}).depth&&(console.log(e.data),this.selectizeInstance.addItem(e.data.tid))}),document.createElement("div")),t=(n.width="100%",this.selectizeElement=document.createElement("select"),this.selectizeElement.id="selectize-select",this.selectizeElement.setAttribute("multiple","multiple"),this.selectizeElement.classList.add("demo-default","selectized"),this.selectizeElement.placeholder=VLocal.Aromas,n.appendChild(this.selectizeElement),this.divElement.parentNode.appendChild(n),$(this.selectizeElement).selectize({plugins:["restore_on_backspace","remove_button"],delimiter:",",persist:!1,hideSelected:!1,closeAfterSelect:!0,maxItems:20,openOnFocus:!1,options:vDataSingleton.allAromas,labelField:"name",searchField:"name",valueField:"tid",create:_isDebugUser(),showAddOptionOnCreate:!1,render:{item:function(e,t){let i='<div class="item">';return e.hasOwnProperty("img")&&(i+='<img height="24px" src="'+e.img+'"/ >&nbsp;'),i+='<span class="name">'+t(e.name)+"</span></div>"}}}));this.selectizeInstance=t[0].selectize,setTimeout(()=>{for(var e of this.selectedIds)this.selectizeInstance.addItem(e)},500)}getSelectedItemsIds(){return this.selectizeInstance.items}}class VFood extends VAbstractProduct{constructor(){super("food"),Object.assign(this,this.reset())}getTasteKeys(){return["acidity","bitterness","salt","sugar","fat","spiciness"]}}class VFoodSearch{constructor(e){this.divElement=document.getElementById(e);e=document.createElement("div"),e.width="100%",e.style="border: 1px solid "+VIVID10+"; border-radius: 4px;",this.selectizeElement=document.createElement("select"),this.selectizeElement.id="selectize-select",this.selectizeElement.setAttribute("multiple","multiple"),this.selectizeElement.classList.add("demo-default","selectized"),this.selectizeElement.placeholder=VLocal.Aromas,e.appendChild(this.selectizeElement),this.divElement.parentNode.appendChild(e),e=$(this.selectizeElement).selectize({plugins:["restore_on_backspace","remove_button"],delimiter:",",persist:!1,hideSelected:!1,closeAfterSelect:!0,maxItems:20,maxOptions:1,openOnFocus:!1,options:vDataSingleton.allFood,labelField:"name",searchField:"name",valueField:"tid",create:_isDebugUser(),showAddOptionOnCreate:!1,render:{item:function(e,t){let i='<div class="item">';return e.hasOwnProperty("img")&&(i+='<img height="24px" src="'+e.img+'"/ >&nbsp;'),i+='<span class="name">'+t(e.name)+"</span></div>"}}});this.selectizeInstance=e[0].selectize,setTimeout(()=>{this.selectizeInstance.addItem(vDataSingleton.allFood[0].tid)},1e3)}}class VSankey{constructor(e,t="wine-sankey"){return VSankey.instance&&"wine-sankey"==t||(this._data=[],(VSankey.instance=this).chart=echarts.init(document.getElementById(t),"macarons2")),VSankey.instance.init(e),VSankey.instance}init(e){var p=[],u=[],i=[],t="Unknown appellation";let n=0;for(;null===e.appellations[n]||0==e.appellations.length||void 0===e.appellations[n]?i=["hot","mild","cold"]:(i=0===e.appellations[n].climates.length?["hot","mild","cold"]:e.appellations[n].climates,t=e.appellations[n].name,t+=void 0!==e.appellations[n].type?" "+e.appellations[n].type:""),p.push(C(t,e.color.code.substr(0,7),0)),++n<e.appellations.length;);var a,g=[],o=[],s=[],r=[],l=[],c=[],d=[],h=[],m=[];for(a of e.varieties)g[a.name]=[],p.push(C(a.name,"white"==a.color?"#EDE06E":"#9C121F",1)),u.push({source:p[0].name,target:a.name,value:1});var v=1,y=3;for(let t of e.aromas)if(v%7==0&&y++,p.push(T(t.name,t.color,y,null===t.label.rich?"":t.label.rich.image.backgroundColor.image)),u.push({source:t.name,target:e.name,color:t.color,value:1}),v++,0!=e.varieties.length)for(var f of e.varieties){for(var b of i){for(var w of f.hot)"hot"!=b||t.tid!=w&&t.pid!=w||g[f.name].includes(t.name)||(p.find(e=>e.name==t.name).depth=2,u.push({source:f.name,target:t.name,value:1}),g[f.name].push(t.name),v--);for(var S of f.mild)"mild"!=b||t.tid!=S&&t.pid!=S||g[f.name].includes(t.name)||(p.find(e=>e.name==t.name).depth=2,u.push({source:f.name,target:t.name,value:1}),g[f.name].push(t.name),v--);for(var A of f.cold)"cold"!=b||t.tid!=A&&t.pid!=A||g[f.name].includes(t.name)||(p.find(e=>e.name==t.name).depth=2,u.push({source:f.name,target:t.name,value:1}),g[f.name].push(t.name),v--)}var E="white"==f.color?"#EDE06E":"#9C121F",v=_(f.age,E,o,t.tid,t.pid,t.name,"css/bottles.png",f.name,"Age",v);v=_(f.botrytis,E,s,t.tid,t.pid,t.name,"css/grapes.png",f.name,"Botrytis",v),v=_(f.fort,E,r,t.tid,t.pid,t.name,"css/thermometer.png",f.name,"Fortified",v),v=_(f.late,E,l,t.tid,t.pid,t.name,"css/grapes.png",f.name,"Late harvest",v),v=_(f.malo,E,c,t.tid,t.pid,t.name,"css/fermentation.png",f.name,"Malolactic fermentation",v),v=_(f.oak,E,d,t.tid,t.pid,t.name,"css/barrels.png",f.name,"Oak",v),v=_(f.oxide,E,h,t.tid,t.pid,t.name,"css/oxydative.png",f.name,"Oxidative",v),v=_(f.yeast,E,m,t.tid,t.pid,t.name,"css/yeast.png",f.name,"Yeast",v)}v%7==0&&3<y&&y--,p.push(C(e.name,e.color.code.substr(0,7),y+1,!1)),0==e.varieties.length&&(p.push(C("Unknown variety","grey",1)),u.push({source:p[0].name,target:"Unknown variety",value:1}));var V=p.filter(e=>1==e.depth),I=p.filter(e=>2==e.depth);for(let t of V){var D=u.filter(e=>e.source==t.name);0<D.length?u.find(e=>e.target==t.name).value=D.length:u.push({source:t.name,target:e.name,value:1})}if(0<I.length){var L=p.filter(e=>1.5==e.depth);for(let i of I){var x,M=u.filter(e=>e.target==i.name),P=M.length,B=!1;for(let t of L)void 0!==M.find(e=>e.source==t.name)&&(P+=0==(x=u.filter(e=>e.target==t.name)).length?0:x.length-1,B=!0,M.find(e=>e.target==i.name&&e.source==t.name).value=0==x.length?1:x.length);B&&(u.find(e=>e.source==i.name).value=0==P?1:P)}}function _(e,t,i,n,a,o,s,r,l,c){for(var d of e)n!=d&&a!=d||(p.find(e=>e.name==o).depth=2,0===i.length&&p.push(T(l,t,1.5,s,40)),g[r].includes(l)||(u.push({source:r,target:l,value:1}),g[r].push(l)),i.includes(o))||(u.push({source:l,target:o,value:1}),i.push(o),c--);return c}function C(e,t,i,n=!0){var a=e;return n&&0<a.indexOf(" - ")?a=a.replace(" - ","\n"):n&&0<a.indexOf(" ")&&(a=a.replace(" ","\n")),{name:e,depth:i,value:1,itemStyle:{normal:{color:t,borderColor:t}},label:{normal:{formatter:a,position:"inside",verticalAlign:"middle",color:"white",textBorderColor:"black"}}}}function T(e,t,i,n,a=40){var o=[64==a?16:6,5],s=e;return 0<s.indexOf(" ")&&(s=s.replace(" ","\n"),o[1]=10),{name:e,depth:i,value:1,itemStyle:{normal:{color:t,borderColor:t}},label:{verticalAlign:"bottom",position:"inside",offset:o,formatter:["{b|}","{a|"+s+"}"].join("\n"),rich:{a:{color:"white",textBorderColor:"black",fontSize:10},b:{backgroundColor:{image:n},height:a}}}}}V={backgroundColor:PASTEL,animation:!1,silent:!1,series:[{type:"sankey",top:"5%",bottom:"5%",left:"5%",right:"5%",width:"90%",height:"90%",layoutIterations:1,nodeGap:40,focusNodeAdjacency:"allEdges",data:p,nodeWidth:20,links:u,orient:"vertical",label:{position:"top"},lineStyle:{color:"source",curveness:.6}}]};this.chart.setOption(V,!0)}}Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]});var WaveProgress={center:0,points:10,smooth:!0,path:null,pathHeight:1,progress:0,frameInterval:null,size:{w:0,h:0},can:null,setProgress:function(e){this.progress=this.size.h-Math.round(e/100*this.size.h)},init:function(e){var e=document.getElementById(e),t=document.getElementById("wave-progress-canvas"),i=(null!==t&&(paper.clear(),e.removeChild(t)),(t=document.createElement("canvas")).id="wave-progress-canvas",t.style="width:100%; height:100%; position: absolute; top:0px; left: 0px; z-index:-1",e.insertBefore(t,e.firstChild),t.width=window.innerWidth,t.height=window.innerHeight,paper.setup(t),this.size.h=paper.view.size.height,this.size.w=paper.view.size.width+50,this.pathHeight=0,this.progress=this.size.h,this.path=new paper.Path,this.path.fillColor=VIVID,this.path.opacity=.9,this.center=paper.view.center,this.path.segments=[],this.path.add(paper.view.bounds.bottomLeft),new paper.Point(-50,this.size.h));this.path.add(i);for(var n=1;n<this.points+1;n++)i=new paper.Point(this.size.w/this.points*n,this.size.h),this.path.add(i);this.path.add(paper.view.bounds.bottomRight),paper.view.onFrame=function(e){e.count%5==0&&WaveProgress.updateFrame()}},updateFrame:function(){var e=0;30<this.progress&&(e=this.progress),this.pathHeight+=(this.center.y-this.pathHeight)/100;for(var t=1;t<this.points+2;t++){var i=2*this.progress+100*(t+t%10),n=.1*Math.sin(i/(200*Math.random()))*this.pathHeight,i=Math.sin(i/100*Math.random())*n+e;this.path.segments[t].point.y=i}this.path.smooth({type:"continuous"})}};function testWaveProgress(){WaveProgress.init("body");var e=0;setInterval(function(){(e+=Math.round(Math.random()))<100?WaveProgress.setProgress(e):(e=0,WaveProgress.init("body"))},30)}DEFAULT_ZOOM=11;class VMap{constructor(){return VMap.instance||(this._data=[],(VMap.instance=this).is_googleMapLoaded=!1,this.geolocationSuccess=!0),VMap.instance}reset(){this.mapchart=null,this.funnelchart=null,this.boutiquesGoogleMap=null,this.appellationGoogleMap=null,this.aopTagGoogleMap=null,this.appellations=[],this.taxonomy=[],this.target=null,this.legend=null,this.funnel=null,this.color=null,this.producerMarker=null,this.userMarker=null,this.boutiqueMarkers=[],this.appellationPolygones=[],this.nameToSearch="",this.mapOptions={center:this.lastLocation,zoom:DEFAULT_ZOOM,mapTypeControl:!1,disableDefaultUI:!0,zoomControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},backgroundColor:"rgba(255,255,255,0.5)",styles:_googleMapStyle,mapTypeId:"terrain"},""!==vUserSingleton.getCity()&&vServiceSingleton.getTimezone()==vUserSingleton.getTimezone()?this.setLocation(vUserSingleton.getLocation()):this.geocodePosition({address:vServiceSingleton.getTimezone()}).then(e=>{this.setLocation(e)})}getSuggestions(i,n){const a=["bar","restaurant","cafe","department_store","supermarket","shopping_mall","store","meal_delivery","meal_takeaway","liquor_store","point_of_interest"];var r=[];return new Promise((e,t)=>{n==google.maps.places.PlacesServiceStatus.OK&&i||(console.log(n),t()),i.forEach(s=>{var e;0<s.types.filter(e=>a.includes(e)).length&&(e={placeId:s.place_id,fields:["name","geometry","type","vicinity","address_components"]},this.googlePlacesService.getDetails(e,(e,t)=>{if(t==google.maps.places.PlacesServiceStatus.OK){var i,n="",a="",o="";for(i of e.address_components)"postal_code"==i.types[0]?n=i.long_name:"country"==i.types[0]?a=i.short_name:"locality"==i.types[0]&&(o=i.long_name);r.push({name:e.name,search:e.name+" ("+e.vicinity+")",tid:s.place_id,address:e.vicinity,postcode:n,country:a,city:o,location:{lat:e.geometry.location.lat(),lng:e.geometry.location.lng()}}),console.log(e)}}))}),setTimeout(()=>{e(r)},500)})}getAutocompleteService(){return this.autocompleteService}loadGoogleMapScript(){return new Promise((t,e)=>{this.is_googleMapLoaded?t():navigator.geolocation?(_debug_toast("Geolocation supported","DEBUG"),vDrupalSingleton.getGoogleMapKey().then(e=>{_load_script("https://maps.googleapis.com/maps/api/js?&key="+e+"&libraries=geometry,places,drawing").then(()=>{_debug_toast("Geolocation google maps loaded","DEBUG"),this.is_googleMapLoaded=!0,this.patchGoogleMaps(),this.googlePlacesService=new google.maps.places.PlacesService(document.createElement("div")),this.autocompleteService=new google.maps.places.AutocompleteService,this.reset(),t()},()=>{_debug_toast("Geolocation google maps not loaded","ERROR")})})):(e(),_debug_toast("Geolocation not supported","ERROR"))})}patchGoogleMaps(){google.maps.Polygon.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds,t=this.getPaths(),i=0;i<t.getLength();i++)for(var n=t.getAt(i),a=0;a<n.getLength();a++)e.extend(n.getAt(a));return e}}geocodePosition(i){return new Promise(function(n,e){var a=[48.85,2.34],t=new google.maps.Geocoder;console.log(),t.geocode(i,(e,t)=>{if(console.log(e),t==google.maps.GeocoderStatus.OK){for(var i of e[0].address_components)"address"==i.types[0]?vUserSingleton.setAddress(i.long_name):"postal_code"==i.types[0]?vUserSingleton.setPostalCode(i.long_name):"country"==i.types[0]?vUserSingleton.setCountryCode(i.short_name):"locality"==i.types[0]&&vUserSingleton.setCity(i.long_name);a=[e[0].geometry.location.lat(),e[0].geometry.location.lng()],vUserSingleton.setLocation(a)}n(a)},()=>{n(a)})})}setUserPositionMarker(e,t){null!==this.boutiquesGoogleMap&&(this.boutiquesGoogleMap.setCenter({lat:e,lng:t}),new google.maps.Marker({position:{lat:e,lng:t},map:this.boutiquesGoogleMap,animation:google.maps.Animation.DROP,icon:"css/geoloc.svg"}))}setProducerPositionMarker(e){var t;this.producerMarker&&this.producerMarker.setMap(null),e.geo&&(t=e.geo.split(";"),this.appellationGoogleMap.setCenter(e.location),this.producerMarker=new google.maps.Marker({position:{lat:parseFloat(t[0]),lng:parseFloat(t[1])},map:this.appellationGoogleMap,animation:google.maps.Animation.DROP}),t="<h3>"+e.name+"</h3><p>"+e.address+"</p>",new google.maps.InfoWindow({content:t}).open({anchor:this.producerMarker,map:this.appellationGoogleMap,shouldFocus:!1}))}getUserLocation(){return new Promise((t,i)=>{_localInterface.is_appInReview?i():this.geolocationSuccess||ons.notification.confirm({title:VLocal.PermissionsNeeded,messageHTML:VLocal.MapPermissions,buttonLabels:[VLocal.Ok,VLocal.Cancel]}).then(function(e){0==e?this.userLocationGranted().then(t,i):(this.geolocationSuccess=!1,i())})})}userLocationGranted(){return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(e=>{this.geolocationSuccess=!0,this.setLocation([e.coords.latitude,e.coords.longitude]),this.geocodePosition({location:this.lastLocation}),t()},()=>{this.geolocationSuccess=!1,this.setLocation(vUserSingleton.getLocation()),t(),_debug_toast("Geolocation failed","DEBUG")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}setLocation(e){this.lastLocation=new google.maps.LatLng(e[0],e[1])}setGoogleMap(o){return new Promise((e,t)=>{var i=document.getElementById(o);if("boutiques-map-canvas"==o){this.boutiquesGoogleMap||(this.boutiquesGoogleMap=new google.maps.Map(i,this.mapOptions)),this.setUserPositionMarker(this.lastLocation.lat(),this.lastLocation.lng());var n={componentRestrictions:{country:"fr"},fields:["formatted_address","geometry","name"],origin:this.boutiquesGoogleMap.getCenter(),strictBounds:!1,types:["establishment"]};const a=new google.maps.places.Autocomplete(document.getElementById("address-search").childNodes[1],n);a.bindTo("bounds",this.boutiquesGoogleMap),a.addListener("place_changed",()=>{var e=a.getPlace();e.geometry&&e.geometry.location?(e.geometry.viewport?this.boutiquesGoogleMap.fitBounds(e.geometry.viewport):this.boutiquesGoogleMap.setCenter(e.geometry.location),this.boutiquesGoogleMap.setZoom(DEFAULT_ZOOM),this.setUserPositionMarker(e.geometry.location.lat(),e.geometry.location.lng())):_release_toast("No details available for input: '"+e.name+"'")})}else this.appellationGoogleMap=new google.maps.Map(i,this.mapOptions);e()})}createFunnelChart(e){return}createFunnelChartX(e){var t,i=[],n=0;for(t of e){var a={value:n,name:"订单",itemStyle:{borderColor:"#fff",borderWidth:2,color:n<e.length-1?"gris":"gold"}};i.push(a),n++}var o={title:{text:"漏斗图",subtext:"纯属虚构"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}%"},toolbox:{feature:{dataView:{readOnly:!0},restore:{},saveAsImage:{}}},legend:{data:["展现","点击","访问","咨询","订单"]},series:[{type:"funnel",left:"10%",top:60,bottom:60,width:"80%",min:0,max:2<e.length?e[1]:e.length,minSize:"0%",maxSize:"100%",sort:"ascending",gap:2,label:{show:!0,position:"inside"},labelLine:{length:10,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{fontSize:20}},data:i}]};echarts.init(document.getElementById(this.legend),"vintage").setOption(o,!0)}setPoly(n,a){if(0!=n.length&&this.appellationGoogleMap){var o=vServiceSingleton.getArrayDepth(n);if(1==o)void 0!==n&&this.appellationGoogleMap.setCenter({lat:n[0],lng:n[1]});else{let e=0,t=0;var s,r;let i=0;for(r of n=2==o?[n]:n){var l,c=[];for(l of r)c.push({lat:l[0],lng:l[1]});this.appellationPolygones.push(new google.maps.Polygon({paths:c,strokeOpacity:.8,strokeWeight:0,fillColor:a,fillOpacity:.35})),this.appellationPolygones[e].setMap(this.appellationGoogleMap),(s=google.maps.geometry.spherical.computeArea(this.appellationPolygones[e].getPath()))>t&&(t=s,i=e),e++}this.appellationGoogleMap.fitBounds(this.appellationPolygones[i].getBounds())}}else _release_toast(VLocal.EmptyAppellation)}loadAppellation(e,t){this.legend=t,this.color=e.color.code;for(var t=vServiceSingleton.searchArrayExact(e.producer,vDataSingleton.allProducers),i=(null!=t&&1==t.length&&this.setProducerPositionMarker(t[0]),this.appellationPolygones.length-1);this.appellationPolygones[i];)this.appellationPolygones.pop().setMap(null),i--;if(0!=e.appellations.length){this.taxonomy=[];for(var n of e.appellations)this.taxonomy=this.taxonomy.concat(vDataSingleton.getFullHierarchy(n,vDataSingleton.allAppellations));console.log(this.taxonomy),1<this.taxonomy.length&&""==this.taxonomy[0].pid&&this.taxonomy.shift(),this.loopOnTaxonomy(0)}}loopOnTaxonomy(a){jDrupal.viewsLoad("detailedappellationsapp/"+this.taxonomy[a].tid+"?_format=json").then(e=>{try{var t=e.getResults()[0],i=a*Math.floor(255/this.taxonomy.length/10),n=vServiceSingleton.hexToRgb(this.color);n.r+=i,n.g+=i,n.b+=i,n=vServiceSingleton.saturateRgb(n),this.color=vServiceSingleton.rgbToHex(n.r,n.g,n.b),console.log(this.color),this.setPoly(JSON.parse(t.geojson),this.color),delete t.geojson,this.appellations.push(t)}catch(e){console.log(e)}a<this.taxonomy.length-1&&setTimeout(()=>{this.loopOnTaxonomy(++a)},10)},e=>{console.log(e)})}createMapChart(){var e=mapchart.getOption().series;mapchart.setOption({geo:[{center:JSON.parse(results[0].geojson)[0]}]});for(let o in results)e.push({name:results[o].name,type:"custom",coordinateSystem:"geo",renderItem:function(e,t){try{var i=JSON.parse(results[o].geojson);if(null!==i&&0!=i.length){for(var n=[],a=0;a<i.length;a++)n.push(t.coord(i[a]));return{type:"polygon",shape:{points:echarts.graphic.clipPointsByRect(n,{x:e.coordSys.x,y:e.coordSys.y,width:20*e.coordSys.width,height:20*e.coordSys.height})},style:t.style({fill:"white",stroke:echarts.color.lift("white")})}}}catch(e){return null}},itemStyle:{opacity:.5},animation:!1,silent:!1,data:[{value:0}],tooltip:{trigger:"item",formatter:"{a}"}});mapchart.setOption({series:e}),(map_option={backgroundColor:"transparent",roam:!0,geo:{zoom:15,map:"world",label:{emphasis:{show:!0}},itemStyle:{normal:{areaColor:VIDID,borderColor:"#ce1906"},emphasis:{areaColor:"#95473f"}},silent:!0,regions:[{name:taxonomy[0].name,itemStyle:{areaColor:"red",color:"red"},label:{show:!0}}]},series:[]})&&"object"==typeof map_option&&mapchart.setOption(map_option,!0),mapchart=echarts.init(document.getElementById(this.target),"vintage")}zoomIn(){mapchart.setOption({geo:[{zoom:mapchart.getOption().geo[0].zoom+1}]})}zoomOut(){mapchart.setOption({geo:[{zoom:mapchart.getOption().geo[0].zoom-1}]})}static createAOPTag(){var e=document.getElementById("AOP-map.html"),l=(null===e&&(e=document.createElement("template")),vCameraSingleton.init("back"),e.id="AOP-map.html",e.innerHTML='<ons-page id="AOP-map-page" class="page__transparent"><ons-toolbar><div class="left"><ons-back-button ontouchend="VMain.pushMainPage({\'id\': \'aromaburst.html\', prev: \'camera.html\'});"></ons-back-button></div><div class="center" style="width: 100%;max-height: 24px; margin-top: 8px;"><ons-search-input  style="width: 100%;" id="google-place-input" placeholder="Search place" float></ons-search-input></div><div class="right"><ons-toolbar-button id="map-save-fab" ><ons-icon icon="md-save"></ons-icon></ons-toolbar-button><ons-toolbar-button id="map-undo-fab" ><ons-icon icon="md-undo"></ons-icon></ons-toolbar-button></div></ons-toolbar><div id="map-image-div" style="pointer-events: none; position:fixed; top:0px; left: 0px; width:100%; height:100%; background-color:transparent"><img  style="position:absolute" id="map-image" /></div><div id="google-map-AOP-canvas" style="filter: opacity(0.2);  position:absolute; top:0; bottom: 0px; width:100%; height:100%; background-color:transparent"></div><div id="drawing-canvas" style="display:none; position:absolute; top:0; bottom: 0px; width:100%; height:100%; background-color:transparent"></div><ons-fab position="bottom center" id="map-camera-fab" ><ons-icon icon="md-camera-alt"></ons-icon></ons-fab></ons-page>',$("#app-body")[0].appendChild(e),$("#sidemenu-left")[0].close(),[]),c=[];let a=0;VMain.setBackground(TRANSPARENT),document.getElementById("splitter-content").load("AOP-map.html").then(()=>{vCameraSingleton.show(),document.getElementById("map-save-fab").addEventListener("touchend",()=>{l=[];var e,t=.5*this.zoomScales[0]/this.zoomScales[this.aopTagGoogleMap.getZoom()];for(e of c){var i,n=[];for(i of e.array().value){var a=r(i[0],i[1],this.aopTagGoogleMap);n.push([s(a.lat(),t),s(a.lng(),t)])}var o=function(e,t){var i={};return e.filter(function(e){e=t(e);return!i.hasOwnProperty(e)&&(i[e]=!0)})}(n,JSON.stringify);console.log(o.length+"vs"+n.length),l.push(o)}function s(e,t){return Math.round(e*t)/t}vServiceSingleton.textToClipboard(JSON.stringify(l))}),document.getElementById("map-camera-fab").addEventListener("touchend",()=>{_is_app?vCameraSingleton.takePicture().then(e=>{t(e),document.getElementById("map-camera-fab").style.display="none"}):t(null)}),document.getElementById("map-undo-fab").addEventListener("touchend",()=>{a--,c.pop().remove(),l.pop()});let r=(e,t,i)=>{var n=i.getProjection().fromLatLngToPoint(i.getBounds().getNorthEast()),a=i.getProjection().fromLatLngToPoint(i.getBounds().getSouthWest()),o=Math.pow(2,i.getZoom()),e=new google.maps.Point(e/o+a.x,t/o+n.y);return i.getProjection().fromPointToLatLng(e)},t=e=>{var t=document.getElementById("map-image");null==(t.src=e)&&(t.src="data:image/jpeg;base64,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"),t.onload=()=>{var e=t.naturalHeight/t.naturalWidth,i=(t.height=window.outerHeight+44,t.width=t.height/e,t.style.left=(window.outerWidth-t.width)/2+"px",document.getElementById("drawing-canvas").style.display="block",new SVG("drawing-canvas").size("100%","100%"));console.log(i);i.on("mousedown",function(e){var t=i.polyline().fill("none").stroke({stroke:"#ff0099",width:1});console.log(a),(c[a]=t).draw(e)}),i.on("mousemove",function(e){c[a]&&c[a].draw("point",e)}),i.on("mouseup",function(e){c[a].draw("stop",e),a++})}};this.zoomScalesAbs=[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722],this.zoomScales=[1048576,524288,262144,131072,65536,32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1];var e={center:new google.maps.LatLng(48.85,2.35),zoom:15,mapTypeControl:!0,disableDefaultUI:!0,zoomControl:!1,scaleControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},backgroundColor:"none",styles:_googleMapStyle},i=document.getElementById("google-map-AOP-canvas"),i=(this.aopTagGoogleMap=new google.maps.Map(i,e),document.getElementById("google-place-input")),n=new google.maps.places.SearchBox(i);this.aopTagGoogleMap.addListener("bounds_changed",()=>{n.setBounds(this.aopTagGoogleMap.getBounds())}),n.addListener("places_changed",()=>{var t=new google.maps.LatLngBounds;n.getPlaces().forEach(function(e){e.geometry?e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location):console.log("Returned place contains no geometry")}),this.aopTagGoogleMap.fitBounds(t)})})}googleMapStyle=[{featureType:"all",elementType:"geometry",stylers:[{color:"#212121"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#b10c0c"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"administrative.province",elementType:"geometry.fill",stylers:[{visibility:"on"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"simplified"},{color:"#ff0000"}]},{featureType:"administrative.locality",elementType:"geometry.fill",stylers:[{visibility:"simplified"}]},{featureType:"administrative.locality",elementType:"geometry.stroke",stylers:[{visibility:"on"}]},{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#663030"}]},{featureType:"administrative.locality",elementType:"labels.text.stroke",stylers:[{visibility:"simplified"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ff0000"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#757575"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"},{visibility:"simplified"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#5c06ff"}]},{featureType:"water",elementType:"geometry.stroke",stylers:[{visibility:"on"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{color:"#f60000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#d61313"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#ff0000"},{visibility:"on"}]},{featureType:"water",elementType:"labels.icon",stylers:[{visibility:"off"}]}]}const vMapSingleton=new VMap,BOUTIQUE_ICON=(vMapSingleton.loadGoogleMapScript().then(()=>{console.log("Map initialized")}),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAABEuAAARLgB9zfXegAABihJREFUaN7tl9tvXFcVxn9rn7nYnhlfMnZsEzshURSC5LrUBKSEcBOKFBP1oUVOJEqagir1DXjiEXjKH8ADf0BfKCY8FJCIxANCTV5wFB6SKnJpYxffk7k5mduZOXsvHmZ8mcSNZ6ZpEdJ80pbOOXuvdb5vrbXX2Qc66KCDDjrooIMO2oa0alC5OAMQA14EwjiH98aPnblwwQDYt99W96d3BRG816+oefll0VQK+6tfohsbeK/9SM0rrwiAnf29utlZwfMEWAQWI7N/aIlPqE3hrwK/BQ3R3e3kyBELhLBWefjAAR7GQCxmAW/bShXN5bafyegXLKGQQTUMvAtcrlycKbcioiUB9ej3AJeAOE6REycCOX7cAEbTaav374OIRySiMjriGgQAurZmCQJDKCRy/LiTgQE0nTaIfA/4KnCzFU6mjeifBb4FgIiaU6eEri4DoB9+qJrJGESQREIZHGq0FIGHD6CQVwAZGhKOHnU4BzAAzJiQSOXSzPMXUI9+FHgTSKCKJAdVJl/cie78vFCtCqqQHFRJJBr9i6C5nGg6owCEQmImXgBjtL5i2gU6hjbDqL0MTALfrbFVZGrKyehozUe55HRxoRZlVWRkBKLRpzNQLotubOw8OnlSiMcVVYBjwHcA7OVXn5+AevQN8ENgEFXo6VFz5owgIgC6uqa6tCSIgAhy6JBuzTUgCITVle0Yy9CQSDK5JSAEXALtsb7XDLWWMjABzGxHf/ywk6NHt+313j0ln68JMEbp69vbtyq6vAJaY0wiIXLixJYAgLMgX2uW1L4C7JXXcb6PiFxE5BAi4HlqTp9Wenq2oqr6/vuCqgBINKoyMuwaHInUvjrGoBvrUCptMRbzwiQSiWg9e30iMh3ki9jLr+0rYN82mr6/ANAbCoe/iZEAxZI8oPbIF1UzWQuKZLPq3bkD2WwAwNCQWuOpZjIWQLJZQtkcms7UnH78sdqVFdFksqagr0895wJSKUHEQ/UbNgj6CoXHm59aQDGXA5GCWnsDY05JNNoTP3+eykA/qfV1AA7EY3RPTpKfnwdVEtPfx++JkVrfQIDB3gRmaorH77wDIsTPT1OORsms1zbzYG8v0a+8RP7aNbRSKeLc38Xz8rvK6tNhYWKCu9CVvnr1rdLcnO8KBXXOaaFQ0EKhoNY5daWS+rdva/nWLXXFoton54tFLd26peXbt9WVSg32zjm1+byW5ub89NWrb92FroWJiaa4NX0Wqu+5bwN/LTntLjtF6uaK1lyZep1bBXbmDZAI1e4eOygGrmFeUXo9Q7cnJWAa+MdeDaytEtoLNzcrvJerYJ6hXwScKtmKZTxq+NmRBGERZlfzXE8V8XbZKvDmWJxzg90tc2lLQNEqmapi5JNrNF+1pP2AbNUS6dv5oD0KHGu+JbQrwk6h6Nqr97YEyK7xJHynpP0qGd8SaK29mydszXbx1LBVeZ+bgL0EBapk/ICUH1CpR7NdUp+DgFrIRATrlEdVS8qvUgjcvpauLpaGPaC0WUHtZ8CvlqnYgGwQ5lHgUKXei7aPR6gqWu9RW/hSLMy5ZDdmV3oUGOtq7uzzXAR8sPEB1/91k0pQ5eDBCZL9h8mXHjHad5B8xWezmAWUWFcvw7F+DoR3+tXZgSgv9UYaykuB/lA7vyYtCPjL4jwVa8NVZ+V3d97j4eYDjAi6Nkcpc48HxU26D46z/HiTVCEHQCzaw9dPTvHGl09vd51r68W92+h4nHPJz7CN/vRvf8RVK2fEmK7AOZK1QzTqFymUC8RF+Gjl3wjQVyfrijn+fOcGPxgfZ2TsGPCMNmo/4zb6i6V5fBuMGGkx1aokVhehLuB/1ka7V9doPcG1jRwuFnfu66NhTZvkockfmqWlZVbuzqGhiHEmRCtDvRC6lTVVPJSI8NSo9y2x1oZr71xtSsC+mfvP8kp9pVzIbyz/plp4fKzVfPcOjxHrT6IoK2XLw4p9ysVYV4jBiNFKNfinc+7XwHWAw2OHnum72RKKo3olMTweQWShGeG7oeoolcsgwpDAcPTpNU4DSj4IjAE/AW4A+f18NyugDPxc1XntFuz2xw2wn7Rm59ICpfbe1EEHHXTQQQf/R/gvNvX3YT7/I3cAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMDMtMjlUMTE6NDQ6MDUrMDA6MDDVkMETAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTAzLTI5VDExOjQ0OjA1KzAwOjAwpM15rwAAAEZ0RVh0c29mdHdhcmUASW1hZ2VNYWdpY2sgNi43LjgtOSAyMDE5LTAyLTAxIFExNiBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZ0F74sgAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6aGVpZ2h0ADUxMsDQUFEAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgANTEyHHwD3AAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTUzODU5ODQ1ASR1+wAAABN0RVh0VGh1bWI6OlNpemUAMTEuNEtCQtZTjksAAAA7dEVYdFRodW1iOjpVUkkAZmlsZTovLy4vdXBsb2Fkcy81Ni9MTm9HZ0o5LzE4NjEvc2hvcF8xMTgxOTQucG5nIy75CQAAAABJRU5ErkJggg==");class VMapEditor extends VAbstractEditor{constructor(e=0,t){super(),this.pageId="edit-map",this.aopTagGoogleMap=null,this.init("map",!1,e=>{null==e?this.initMapEditor():this.pictureTaken(e.data),console.log(e)}),this.polygonData=[],this.shapes=[],this.shapes_index=0,this.zoomScalesAbs=[591657550.5,295828775.3,147914387.6,73957193.82,36978596.91,18489298.45,9244649.227,4622324.614,2311162.307,1155581.153,577790.5767,288895.2884,144447.6442,72223.82209,36111.91104,18055.95552,9027.977761,4513.98888,2256.99444,1128.49722],this.zoomScales=[1048576,524288,262144,131072,65536,32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1]}initMapEditor(){VMain.toggleLeftMenu(),VPageFactory.createPage(this.pageId,this.buildMainHTML());var e={center:new google.maps.LatLng(48.85,2.35),zoom:15,mapTypeControl:!0,disableDefaultUI:!0,zoomControl:!1,scaleControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},backgroundColor:"none",styles:_googleMapStyle},t=document.getElementById("google-map-canvas");this.aopTagGoogleMap=new google.maps.Map(t,e),setTimeout(()=>{new zoomist(".zoomist-container",{bounds:!1,slider:!0,maxScale:1.3,minScale:.4,initScale:.7});document.getElementsByClassName(".zoomist-slider").style="bottom:0px; top:100%"},1e3),document.getElementById("map-camera-skip-fab").addEventListener("click",()=>{this.polygonData=[];var e,t=.5*this.zoomScales[0]/this.zoomScales[this.aopTagGoogleMap.getZoom()];for(e of this.shapes){var i,n=[];for(i of e.array().value){var a=this.point2LatLng(i[0],i[1],this.aopTagGoogleMap);n.push([s(a.lat(),t),s(a.lng(),t)])}var o=function(e,t){var i={};return e.filter(function(e){e=t(e);return!i.hasOwnProperty(e)&&(i[e]=!0)})}(n,JSON.stringify);console.log(o.length+"vs"+n.length),this.polygonData.push(o)}function s(e,t){return Math.round(e*t)/t}vServiceSingleton.textToClipboard(JSON.stringify(this.polygonData))}),document.getElementById("flash-fab").addEventListener("click",()=>{if(0==this.shapes_index){this.aopTagGoogleMap.setOptions({gestureHandling:"none"}),document.getElementById("drawing-canvas").style.display="block";var i=new SVG("drawing-canvas").size("100%","100%");console.log(i);i.on("mousedown",e=>{var t=i.polyline().fill("none").stroke({stroke:"#ff0099",width:1});console.log(this.shapes_index),(this.shapes[this.shapes_index]=t).draw(e)}),i.on("mousemove",e=>{this.shapes[this.shapes_index]&&this.shapes[this.shapes_index].draw("point",e)}),i.on("mouseup",e=>{this.shapes[this.shapes_index].draw("stop",e),this.shapes_index++})}else this.shapes_index--,this.shapes.pop().remove(),this.polygonData.pop(),0==this.shapes_index&&(document.getElementById("drawing-canvas").style.display="none",this.aopTagGoogleMap.setOptions({gestureHandling:"greedy"}))})}buildMainHTML(){return'<ons-page id="'+this.pageId+'-page" class="page__transparent">'+VPageFactory.buildCancelFab(this.pageId,-10)+'<ons-list modifier="noborder" style="padding: 0; width: 100%; margin-top: 40px; background-color:'+TRANSPARENT+'">'+VPageFactory.buildBottomListItem()+"</ons-list></ons-page>"}pictureTaken(e){this.aopTagGoogleMap.setOptions({gestureHandling:"greedy"});var t=document.getElementById("map-image");null==(t.src=e)&&(t.src="data:image/jpeg;base64,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"),t.onload=()=>{var e=t.naturalHeight/t.naturalWidth;t.height=window.outerHeight+44,t.width=t.height/e,t.style.left=(window.outerWidth-t.width)/2+"px",document.getElementById("drawing-canvas").style.display="none"}}point2LatLng(e,t,i){var n=i.getProjection().fromLatLngToPoint(i.getBounds().getNorthEast()),a=i.getProjection().fromLatLngToPoint(i.getBounds().getSouthWest()),o=Math.pow(2,i.getZoom()),e=new google.maps.Point(e/o+a.x,t/o+n.y);return i.getProjection().fromPointToLatLng(e)}}class VCellar{constructor(){this.createPage(),this.cellarWines=[]}myCellarListProgressBar=null;open(){$("#sidemenu-left")[0].close(),this.createPage(),VMain.pushPage({id:"my-cellar-page.html"}).then(()=>{this.myCellarListProgressBar=document.getElementById("my-cellar-list-progressbar"),this.getWines()})}nid=0;getWines(){this.cellarWines=[];var e="0"==(e=jDrupal.currentUser().id())&&_isDebugUser()?"1":e;jDrupal.viewsLoad("mycellarapp/"+e+"?_format=json").then(e=>{this.myCellarListProgressBar.style="display:none",this.cellarWines=e.getResults();e=document.getElementById("my-cellar-infinite-list");e.delegate={createItemContent:t=>{var n=document.createElement("ons-carousel"),e=(n.setAttribute("auto-scroll",""),n.setAttribute("swipeable",""),n.setAttribute("centered",""),n.setAttribute("initial-index","1"),document.createElement("ons-carousel-item")),i=document.createElement("ons-carousel-item"),a=document.createElement("ons-carousel-item"),o=(e.style=a.style="background:"+PASTEL+";height:auto; display: flex;  align-items: center; padding-inline: 20px; color: "+VIVID,e.innerHTML=a.innerHTML=VLocal.OpenANewBottle,e.style.justifyContent="flex-end",document.createElement("ons-card")),s=(o.style="padding:2px; margin:4px;",document.createElement("ons-list-item")),r=(s.setAttribute("modifier","nodivider"),document.createElement("ons-list-title")),l=(r.setAttribute("modifier","nodivider"),r.style="text-transform:none; border-radius: inherit;",r.innerHTML="<strong>"+this.cellarWines[t].name+" "+this.cellarWines[t].year+"</strong>",document.createElement("div")),c=(l.setAttribute("class","left"),l.innerHTML='<img height="60px" src="'+jDrupal.settings.sitePath+this.cellarWines[t].label+'" />',l.addEventListener("click",()=>{var e=new VWine(SEALED,this.getWines);e.load(this.cellarWines[t].nid).then(()=>{VMain.editBottle(e)})}),document.createElement("div")),d=(c.setAttribute("class","center"),vDataSingleton.allAppellations.find(e=>parseInt(e.tid)===parseInt(this.cellarWines[t].app))),d=(c.innerHTML="",1<parseInt(this.cellarWines[t].sugar)&&(c.innerHTML+="<p>"+VLocal.wineSugarRangeNames[parseInt(this.cellarWines[t].sugar)-1]+"</p>"),null!=d&&(c.innerHTML+="<p>"+d.name+"</p>"),""!==this.cellarWines[t].producer&&(c.innerHTML+="<br>"+this.cellarWines[t].producer),""!==this.cellarWines[t].alcohol&&(c.innerHTML+="<br>"+this.cellarWines[t].alcohol+"%"),document.createElement("div")),p=(d.setAttribute("class","right"),document.createElement("span")),u=(p.setAttribute("class","fa-stack"),document.createElement("span")),g=(u.setAttribute("class","fa fa-circle-o fa-stack-2x"),document.createElement("strong"));return g.setAttribute("class","fa-stack-1x"),g.innerHTML=this.cellarWines[t].stock,p.appendChild(u),p.appendChild(g),n.addEventListener("postchange",e=>{var i;e.stopPropagation(),1!=e.activeIndex&&(i=new VWine(OPEN,this.getWines)).load(this.cellarWines[t].nid).then(()=>{i.wasOpen()?i.decreaseStock().then(t=>{n.setActiveIndex(1).then(()=>{var e;0==(g.innerHTML=t)&&-1<(e=this.cellarWines.findIndex(e=>e.nid===i.getId()))&&(this.cellarWines.splice(e,1),n)&&VMain.removeElement(n)})}):n.setActiveIndex(1).then(()=>{VMain.editWine(i)})})}),d.appendChild(p),s.appendChild(l),s.appendChild(c),s.appendChild(d),o.appendChild(r),o.appendChild(s),o.style.backgroundColor=this.cellarWines[t].color,i.appendChild(o),n.appendChild(e),n.appendChild(i),n.appendChild(a),n},countItems:()=>this.cellarWines.length,calculateItemHeight:e=>109},e.refresh()})}createPage(){var e;null===document.getElementById("my-cellar-page.html")&&((e=document.createElement("template")).id="my-cellar-page.html",e.innerHTML='<ons-page id="my-cellar-page"><ons-toolbar><div class="left"><ons-back-button ontouchend="VMain.pushMainPage({\'id\': \'selected-wines.html\', prev: \'my-cellar-page.html\'});"></ons-back-button></div><div class="center" id="my-cellar-toolbar-title">'+VLocal.MyCellar+'</div><div class="right"><ons-toolbar-button id="add-wine-button" onclick="VMain.addBottle();"><img style="width: 1.28571429em; vertical-align: middle;" class="list-item__icon cellar" src="css/wine-bottle-solid.svg"></ons-toolbar-button></div></ons-toolbar><div style="background-color: '+PASTEL+';" class="page__white"><ons-progress-bar id="my-cellar-list-progressbar" style="width:100%; height:5px;" secondary-value="100"class="progressStyle" indeterminate></ons-progress-bar><ons-list style="margin-top: -5px; background-color: '+OPAQUE+';" modifier="noborder"><ons-lazy-repeat id="my-cellar-infinite-list"></ons-lazy-repeat></ons-list></div></ons-page>',$("#app-body")[0].appendChild(e))}}class VOpenCV{constructor(){return VOpenCV.instance||(this._data=[],VOpenCV.instance=this),VOpenCV.instance}createFileFromUrl(a,o){return new Promise((i,e)=>{let n=new XMLHttpRequest;n.open("GET",o,!0),n.responseType="arraybuffer",n.onload=function(e){var t;4===n.readyState&&(200===n.status?(t=new Uint8Array(n.response),cv.FS_createDataFile("/",a,t,!0,!1,!1),i()):console.log("Failed to load "+o+" status: "+n.status))},n.send()})}faceDetect(e){var t=cv.imread(e);let n=new cv.Mat,a=(cv.cvtColor(t,n,cv.COLOR_RGBA2GRAY,0),new cv.CascadeClassifier),o="https://raw.githubusercontent.com/opencv/opencv/4.x/data/haarcascades/",s=["lbpcascade_frontalface.xml","lbpcascade_frontalface_improved.xml","haarcascade_lowerbody.xml","haarcascade_frontalface_default.xml","haarcascade_frontalface_alt.xml","haarcascade_frontalface_alt2.xml"];let r=()=>{if(0==s.length)return i.delete(),n.delete(),a.delete(),void $("#app-body")[0].removeChild(document.getElementById(e));let i=s.pop();i.includes("lbpcascade")&&(o="https://raw.githubusercontent.com/opencv/opencv/4.x/data/lbpcascades/"),this.createFileFromUrl(i,o+i).then(()=>{vBench.begin("faceDetect"),a.load(i);var e=new cv.Size(0,0),t=new cv.RectVector,e=(a.detectMultiScale(n,t,1.1,3,0,e,e),vBench.end("faceDetect"));_release_toast(i+" detected "+t.size()+" faces in "+e+"ms"),r()})};r()}}const vOpenCVSingleton=new VOpenCV;Object.freeze(vOpenCVSingleton);class VTensorFlow{constructor(){return VTensorFlow.instance||(this._data=[],(VTensorFlow.instance=this).classifyModel=null,this.nsfwjsModel=null,this.blazeFaceModel=null),VTensorFlow.instance}setLoadState(e=""){document.getElementById("modal-text").innerHTML=VLocal.Loading+" "+e}classify(i){return new Promise((n,a)=>{let t=()=>{var e=document.getElementById(i);vBench.begin("classify"),this.classifyModel.classify(e,5).then(e=>{let t="mobilenet <br>";for(var i of e)t+=i.className+": "+i.probability+"<br>";_release_toast("classify took "+vBench.end("classify")+"ms",2e3),(t.includes("wine")&&t.includes("bottle")?n:a)()},e=>{_release_toast("couldn't classify: "+e,1e3),a()})};null==this.classifyModel?VMain.modalShow().then(()=>{this.setLoadState("mobilnet classify"),mobilenet.load({version:2,alpha:1}).then(e=>{this.classifyModel=e,VMain.modalHide(),t()},e=>{VMain.modalHide(),_release_toast("couldn't load mobilenet classify model: "+e),a()})}):t()})}explicit(s){return new Promise((t,o)=>{let i=()=>{var e=document.getElementById(s);vBench.begin("explicit");let n=!1,a=["Porn","Hentai","Sexy"];this.nsfwjsModel.classify(e).then(e=>{let i="explicit <br>";for(let t of e)i+=JSON.stringify(t)+"<br>",.01<parseFloat(t.probability)&&a.find(e=>e==t.className)&&(n=!0);_release_toast("explicit took "+vBench.end("explicit")+"ms "+i,2e3),n?o(i):t()},e=>{_release_toast("couldn't classify explicit: "+e),o()})};null==this.nsfwjsModel?VMain.modalShow().then(()=>{this.setLoadState("nsfwjs explicit"),nsfwjs.load(_localInterface.serverUrl+"/min_nsfwjs/",{size:299}).then(e=>{this.nsfwjsModel=e,VMain.modalHide(),i()},e=>{VMain.modalHide(),_release_toast("couldn't load nsfwjs explicit model: "+e),o()})}):i()})}detect(e){}blazeFace(a){return new Promise((i,n)=>{let t=()=>{var e=document.getElementById(a);vBench.begin("blazeFace");this.blazeFaceModel.estimateFaces(e,!1).then(e=>{var t="blazeFace<br>";e.length,t+="took "+vBench.end("blazeFace")+"ms",_release_toast("detected faces: "+e.length+"<br> "+t),(1==e.length?i:n)()},()=>n)};null==this.blazeFaceModel?VMain.modalShow().then(()=>{this.setLoadState("blazeface"),blazeface.load().then(e=>{this.blazeFaceModel=e,VMain.modalHide(),t()},e=>{VMain.modalHide(),_release_toast("couldn't load blazeface model: "+e),n()})}):t()})}toxicity(e=0){return new Promise((e,t)=>{e()})}}var vTensorFlowSingleton=new VTensorFlow;class SelectizeOptions{constructor(i,e,t,n,a,o){let s=""!==i?document.getElementById("wine-"+i+"-checked"):null,r=null;return{timeoutExpired:!1,timeoutTyping:null,plugins:["restore_on_backspace","remove_button"],delimiter:",",persist:!0,hideSelected:!1,loadThrottle:1e3,maxItems:n,maxOptions:4,openOnFocus:!1,options:e,items:t,labelField:"name",searchField:"name",valueField:"tid",preload:!1,createOnBlur:!1,create:_isDebugUser()&&("producer"==i||"boutique"==i||"appellation"==i),onFocus:function(){r=new google.maps.places.AutocompleteSessionToken,$(".bottom-item").show()},onBlur:function(){$(".bottom-item").hide(),a&&a(this.items)},onChange:function(e){$(".bottom-item").hide(),s&&(0<this.items.length?s.setAttribute("checked",""):s.removeAttribute("checked"))},onType:function(e){this.timeoutTyping&&!this.timeoutExpired&&(clearTimeout(this.timeoutTyping),this.timeoutTyping=null),"boutique"!=i&&"producer"!=i||e.length<3||0<this.currentResults.items.length||(this.timeoutTyping=setTimeout(()=>{this.timeoutExpired=!0,vMapSingleton.getAutocompleteService().getPlacePredictions({input:e,sessionToken:r,componentRestrictions:"boutique"==i?{country:vUserSingleton.getCountryCode()}:null},(e,t)=>{vMapSingleton.getSuggestions(e,t).then(e=>{for(var t of e)this.addOption(t),"boutique"==i?vDataSingleton.allBoutiques.push(t):"producer"==i&&vDataSingleton.allProducers.push(t);this.setTextboxValue(e[0].search),this.refreshOptions(),console.log(this.options),clearTimeout(this.timeoutTyping),this.timeoutTyping=null,this.timeoutExpired=!1})})},3e3))},onItemRemove:function(e){this.blur()},render:{item:function(e,t){let i='<div class="item">';return e.hasOwnProperty("img")&&(i+='<img height="24px" src="'+e.img+'"/ >&nbsp;'),i+='<span class="name">'+t(e.name)+"</span></div>"}}}}}class InputOptions{constructor(e,t){let i=""!==e?document.getElementById("wine-"+e+"-checked"):null;e=""!==e?document.getElementById("wine-"+e):null;e&&(e.addEventListener("focus",function(){$(".bottom-item").show()}),e.addEventListener("blur",function(e){$(".bottom-item").hide(),t(e.target.value)}),e.addEventListener("change",function(e){$(".bottom-item").hide(),""!==String(e.target.value).trim()?i.setAttribute("checked",""):i.removeAttribute("checked")}))}}